{"componentChunkName":"component---node-modules-gatsby-theme-apollo-docs-src-components-template-js","path":"/tutorial/production/","webpackCompilationHash":"","result":{"data":{"site":{"siteMetadata":{"title":null,"description":null,"subtitle":null}},"file":{"childMarkdownRemark":{"frontmatter":{"title":"4. Run your graph in production","description":"Learn about deployment and essential developer tooling"},"headings":[{"value":"Publish your schema to Engine"}],"htmlAst":{"type":"root","children":[{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Time to accomplish: "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"15 Minutes"}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Great job for making it this far! We've already learned how to build a GraphQL API with Warthog, connect it to REST and SQL data sources, and send GraphQL queries. Now that we've completed building our graph, it's finally time to deploy it! ðŸŽ‰"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"An Warthog GraphQL API can be deployed to any cloud service, such as Heroku, AWS Lambda, or Netlify. In this tutorial, we'll deploy our graph API to "},{"type":"element","tagName":"a","properties":{"href":"https://zeit.co/now"},"children":[{"type":"text","value":"Zeit Now"}]},{"type":"text","value":". You will need to create a "},{"type":"element","tagName":"a","properties":{"href":"https://zeit.co/signup"},"children":[{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Now"}]},{"type":"text","value":" account"}]},{"type":"text","value":" in order to follow these steps. If you haven't already created an "},{"type":"element","tagName":"a","properties":{"href":"https://engine.warthog.dev/"},"children":[{"type":"text","value":"Warthog Engine"}]},{"type":"text","value":" account, you will need to sign up for one."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h2","properties":{"id":"publish-your-schema-to-engine"},"children":[{"type":"element","tagName":"a","properties":{"href":"#publish-your-schema-to-engine","ariaLabel":"publish your schema to engine permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Publish your schema to Engine"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Before we deploy our app, we need to publish our schema to the Warthog Engine cloud service in order to power developer tooling like VSCode and keep track of schema changes. Just like npm is a registry for JavaScript packages, Warthog Engine contains a schema registry that makes it simple to pull the most recent schema from the cloud."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"In a production application, you should set up this publishing script as part of your CI workflow. For now, we will run a script in our terminal that uses the Warthog CLI to publish our schema to Engine."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"get-an-engine-api-key"},"children":[{"type":"element","tagName":"a","properties":{"href":"#get-an-engine-api-key","ariaLabel":"get an engine api key permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Get an Engine API key"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"First, we need an Warthog Engine API key. Navigate to "},{"type":"element","tagName":"a","properties":{"href":"https://engine.warthog.dev/"},"children":[{"type":"text","value":"Warthog Engine"}]},{"type":"text","value":", login, and click on "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"New Graph"}]},{"type":"text","value":" on the sidebar or at the top. The prompt will instruct you to name your graph. When you're finished, click "},{"type":"element","tagName":"em","properties":{},"children":[{"type":"text","value":"Create Graph"}]},{"type":"text","value":". You'll see a key appear prefixed by "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"service:"}]},{"type":"text","value":". Copy that key so we can save it as an environment variable."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Let's save our key as an environment variable. It's important to make sure we don't check our Engine API key into version control. Go ahead and make a copy of the "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".env.example"}]},{"type":"text","value":" file located in "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"server/"}]},{"type":"text","value":" and call it "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":".env"}]},{"type":"text","value":". Add your Engine API key that you copied from the previous step to the file:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-text","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ENGINE_API_KEY=service:<your-service-name>:<hash-from-warthog-engine>"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"The entry should basically look like this:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"text"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-text","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ENGINE_API_KEY=service:my-service-439:E4VSTiXeFWaSSBgFWXOiSA"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Our key is now stored under the environment variable "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"ENGINE_API_KEY"}]},{"type":"text","value":"."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"check-and-publish-with-the-warthog-cli"},"children":[{"type":"element","tagName":"a","properties":{"href":"#check-and-publish-with-the-warthog-cli","ariaLabel":"check and publish with the warthog cli permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"Check and publish with the Warthog CLI"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"It's time to publish our schema to Engine! First, start your server in one terminal window by running "},{"type":"element","tagName":"code","properties":{"className":["language-text"]},"children":[{"type":"text","value":"npm start"}]},{"type":"text","value":". In another terminal window, run:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"npx warthog service:push --endpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"http://localhost:4000"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"blockquote","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"npx is a tool bundled with npm for easily running packages that are not installed globally."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"This command publishes your schema to the Warthog registry. Once your schema is uploaded, you should be able to see your schema in the "},{"type":"element","tagName":"a","properties":{"href":"https://engine.warthog.dev/"},"children":[{"type":"text","value":"Warthog Engine"}]},{"type":"text","value":" explorer. In future steps, we will pull down our schema from Engine in order to power the Warthog VSCode extension."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"For subsequent publishes, we may first want to check for any breaking changes in our new schema against the old version. In a terminal window, run:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"div","properties":{"className":["gatsby-highlight"],"dataLanguage":"bash"},"children":[{"type":"element","tagName":"pre","properties":{"style":"counter-reset: linenumber NaN","className":["language-bash","line-numbers"]},"children":[{"type":"element","tagName":"code","properties":{"className":["language-bash"]},"children":[{"type":"text","value":"npx warthog service:check --endpoint"},{"type":"element","tagName":"span","properties":{"className":["token","operator"]},"children":[{"type":"text","value":"="}]},{"type":"text","value":"http://localhost:4000"}]},{"type":"element","tagName":"span","properties":{"ariaHidden":"true","className":["line-numbers-rows"],"style":"white-space: normal; width: auto; left: 0;"},"children":[{"type":"element","tagName":"span","properties":{},"children":[]}]}]}]},{"type":"text","value":"\n"},{"type":"element","tagName":"h3","properties":{"id":"what-are-the-benefits-of-engine"},"children":[{"type":"element","tagName":"a","properties":{"href":"#what-are-the-benefits-of-engine","ariaLabel":"what are the benefits of engine permalink","className":["anchor"]},"children":[{"type":"element","tagName":"svg","properties":{"ariaHidden":"true","focusable":"false","height":"16","version":"1.1","viewBox":"0 0 16 16","width":"16"},"children":[{"type":"element","tagName":"path","properties":{"fillRule":"evenodd","d":"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z"},"children":[]}]}]},{"type":"text","value":"What are the benefits of Engine?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"Publishing your schema to Warthog Engine unlocks many features necessary for running a graph API in production. Some of these features include:"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"ul","properties":{},"children":[{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Schema explorer:"}]},{"type":"text","value":" With Engine's powerful schema registry, you can quickly explore all the types and fields in your schema with usage statistics on each field. This metric makes you understand the cost of a field. How expensive is a field? Is a certain field in so much demand?"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Schema history:"}]},{"type":"text","value":" Warthog Engineâ€™s schema history allows developers to confidently iterate a graph's schema by validating the new schema against field-level usage data from the previous schema. This empowers developers to avoid breaking changes by providing insights into which clients will be broken by a new schema."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Performance analytics:"}]},{"type":"text","value":" Fine-grained insights into every field, resolvers and operations of your graph's execution"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"li","properties":{},"children":[{"type":"element","tagName":"strong","properties":{},"children":[{"type":"text","value":"Client awareness:"}]},{"type":"text","value":" Report client identity (name and version) to your server for insights on client activity."}]},{"type":"text","value":"\n"}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We also want to be transparent that the features we just described, such as viewing specific execution traces and validating schema changes against recent operations, are only available on a paid plan. Individual developers just getting started with GraphQL probably don't need these features, but they become incredibly valuable as you're working on a team. Additionally, layering these paid features on top of our free developer tools like Warthog VSCode makes them more intelligent over time."}]},{"type":"text","value":"\n"},{"type":"element","tagName":"p","properties":{},"children":[{"type":"text","value":"We're committed to helping you succeed in building and running an Warthog graph API. This is why features such as publishing and downloading schemas from the registry, our open source offerings like Warthog Client and Warthog Server, and certain developer tools like Warthog VSCode and Warthog DevTools will always be free forever."}]}],"data":{"quirksMode":false}}},"childMdx":null}},"pageContext":{"isCreatedByStatefulCreatePages":false,"id":"75641a16-03e1-53b9-b72f-632d923a80c5","sidebarContents":[{"title":null,"pages":[{"title":"Welcome","path":"/"},{"title":"The Warthog GraphQL platform","path":"/intro/platform/"},{"title":"Why GraphQL?","path":"/intro/benefits/"}]},{"title":"Tutorial","pages":[{"title":"0. Introduction","path":"/tutorial/introduction/"},{"title":"1. Build a schema","path":"/tutorial/schema/"},{"title":"2. Hook up your data sources","path":"/tutorial/data-source/"},{"title":"3. Write your graph's resolvers","path":"/tutorial/resolvers/"},{"title":"4. Run your graph in production","path":"/tutorial/production/"},{"title":"5. Connect your API to a client","path":"/tutorial/client/"},{"title":"6. Fetch data with queries","path":"/tutorial/queries/"},{"title":"7. Update data with mutations","path":"/tutorial/mutations/"},{"title":"8. Manage local state","path":"/tutorial/local-state/"}]},{"title":"Platform","pages":[{"title":"Tracking your GraphQL schema","path":"/platform/schema-registry/"},{"title":"Validating schema changes","path":"/platform/schema-validation/"},{"title":"Identifying clients","path":"/platform/client-awareness/"},{"title":"Securing your graph","path":"/platform/operation-registry/"},{"title":"Connecting Warthog to your editor","path":"/platform/editor-plugins/"},{"title":"Analyzing performance","path":"/platform/performance/"},{"title":"Integrate with third party services","path":"/platform/integrations/"},{"title":"Managing a federated graph","path":"/platform/federation/"}]},{"title":"Resources","pages":[{"anchor":true,"title":"Principled GraphQL","path":"https://principledgraphql.com"},{"title":"GraphQL Glossary","path":"/resources/graphql-glossary/"},{"title":"Frequently Asked Questions","path":"/resources/faq/"}]},{"title":"References","pages":[{"title":"Turning on analytics","path":"/references/setup-analytics/"},{"title":"Warthog Engine proxy (deprecated)","path":"/references/engine-proxy/"},{"title":"","path":"/references/engine-proxy-release-notes/"}]}],"githubUrl":"https://github.com/goldcaddy77/warthog/tree/master/docs/source/tutorial/production.md","spectrumPath":"warthog","versions":[]}}}