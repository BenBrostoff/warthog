{"expireTime":9007200819376320000,"key":"gatsby-plugin-mdx-entire-payload-585c73066319751b578f2496241907f4-","val":{"mdast":{"type":"root","children":[{"type":"import","value":"import { ExpansionPanel } from \"gatsby-theme-apollo-docs\";","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":59,"offset":59},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Overview","position":{"start":{"line":4,"column":4,"offset":64},"end":{"line":4,"column":12,"offset":72},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":61},"end":{"line":4,"column":12,"offset":72},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":6,"column":5,"offset":78},"end":{"line":6,"column":10,"offset":83},"indent":[]}}],"position":{"start":{"line":6,"column":3,"offset":76},"end":{"line":6,"column":12,"offset":85},"indent":[]}},{"type":"text","value":" Operation safelisting is an Warthog Platform feature that is only available to subscribers of the ","position":{"start":{"line":6,"column":12,"offset":85},"end":{"line":6,"column":111,"offset":184},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/plans/","children":[{"type":"emphasis","children":[{"type":"text","value":"Apollo Team","position":{"start":{"line":6,"column":113,"offset":186},"end":{"line":6,"column":124,"offset":197},"indent":[]}}],"position":{"start":{"line":6,"column":112,"offset":185},"end":{"line":6,"column":125,"offset":198},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":6,"column":125,"offset":198},"end":{"line":6,"column":130,"offset":203},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"Enterprise","position":{"start":{"line":6,"column":131,"offset":204},"end":{"line":6,"column":141,"offset":214},"indent":[]}}],"position":{"start":{"line":6,"column":130,"offset":203},"end":{"line":6,"column":142,"offset":215},"indent":[]}},{"type":"text","value":" plans","position":{"start":{"line":6,"column":142,"offset":215},"end":{"line":6,"column":148,"offset":221},"indent":[]}}],"position":{"start":{"line":6,"column":111,"offset":184},"end":{"line":6,"column":181,"offset":254},"indent":[]}},{"type":"text","value":". Visit ","position":{"start":{"line":6,"column":181,"offset":254},"end":{"line":6,"column":189,"offset":262},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/intro/platform.html","children":[{"type":"text","value":"this guide","position":{"start":{"line":6,"column":190,"offset":263},"end":{"line":6,"column":200,"offset":273},"indent":[]}}],"position":{"start":{"line":6,"column":189,"offset":262},"end":{"line":6,"column":251,"offset":324},"indent":[]}},{"type":"text","value":" to learn more about the Warthog Platform.","position":{"start":{"line":6,"column":251,"offset":324},"end":{"line":6,"column":293,"offset":366},"indent":[]}}],"position":{"start":{"line":6,"column":3,"offset":76},"end":{"line":6,"column":293,"offset":366},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":74},"end":{"line":6,"column":293,"offset":366},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Any API requires security and confidence prior to going to production. During development, GraphQL offers front-end engineers the ability to explore all the data available to them and fetch exactly what they need for the components they're building. However, in production, it can be unnecessary and undesirable to provide this flexibility.","position":{"start":{"line":8,"column":1,"offset":368},"end":{"line":8,"column":341,"offset":708},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":368},"end":{"line":8,"column":341,"offset":708},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The Warthog Platform comes with an ","position":{"start":{"line":10,"column":1,"offset":710},"end":{"line":10,"column":36,"offset":745},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"operation registry","position":{"start":{"line":10,"column":38,"offset":747},"end":{"line":10,"column":56,"offset":765},"indent":[]}}],"position":{"start":{"line":10,"column":36,"offset":745},"end":{"line":10,"column":58,"offset":767},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":10,"column":58,"offset":767},"end":{"line":10,"column":63,"offset":772},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"safelisting","position":{"start":{"line":10,"column":65,"offset":774},"end":{"line":10,"column":76,"offset":785},"indent":[]}}],"position":{"start":{"line":10,"column":63,"offset":772},"end":{"line":10,"column":78,"offset":787},"indent":[]}},{"type":"text","value":" mechanism built into it, which allows organizations to:","position":{"start":{"line":10,"column":78,"offset":787},"end":{"line":10,"column":134,"offset":843},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":710},"end":{"line":10,"column":134,"offset":843},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Provide demand control for their production GraphQL APIs.","position":{"start":{"line":12,"column":3,"offset":847},"end":{"line":12,"column":60,"offset":904},"indent":[]}}],"position":{"start":{"line":12,"column":3,"offset":847},"end":{"line":12,"column":60,"offset":904},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":845},"end":{"line":12,"column":60,"offset":904},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Permit the exact operations necessary for their client applications.","position":{"start":{"line":13,"column":3,"offset":907},"end":{"line":13,"column":71,"offset":975},"indent":[]}}],"position":{"start":{"line":13,"column":3,"offset":907},"end":{"line":13,"column":71,"offset":975},"indent":[]}}],"position":{"start":{"line":13,"column":1,"offset":905},"end":{"line":13,"column":71,"offset":975},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Eliminate the risk of unexpected, and possibly costly, operations being executed against their graph.","position":{"start":{"line":14,"column":3,"offset":978},"end":{"line":14,"column":104,"offset":1079},"indent":[]}}],"position":{"start":{"line":14,"column":3,"offset":978},"end":{"line":14,"column":104,"offset":1079},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":976},"end":{"line":14,"column":104,"offset":1079},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":845},"end":{"line":14,"column":104,"offset":1079},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Operations defined within client applications can be extracted and uploaded to Warthog Engine using the Warthog CLI. Warthog Server then fetches a manifest of these operations from Warthog Engine and forbids the execution of any operations that were not in that manifest.","position":{"start":{"line":16,"column":1,"offset":1081},"end":{"line":16,"column":272,"offset":1352},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1081},"end":{"line":16,"column":272,"offset":1352},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Prerequisites","position":{"start":{"line":18,"column":5,"offset":1358},"end":{"line":18,"column":18,"offset":1371},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1354},"end":{"line":18,"column":18,"offset":1371},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"https://www.warthog.dev/docs/warthog-server/","children":[{"type":"text","value":"Warthog Server 2.2.x","position":{"start":{"line":20,"column":4,"offset":1376},"end":{"line":20,"column":24,"offset":1396},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1375},"end":{"line":20,"column":71,"offset":1443},"indent":[]}},{"type":"text","value":" (or newer).","position":{"start":{"line":20,"column":71,"offset":1443},"end":{"line":20,"column":83,"offset":1455},"indent":[]}}],"position":{"start":{"line":20,"column":3,"offset":1375},"end":{"line":20,"column":83,"offset":1455},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To get started with Warthog Server, visit ","position":{"start":{"line":21,"column":5,"offset":1460},"end":{"line":21,"column":47,"offset":1502},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/warthog-server/","children":[{"type":"text","value":"its documentation","position":{"start":{"line":21,"column":48,"offset":1503},"end":{"line":21,"column":65,"offset":1520},"indent":[]}}],"position":{"start":{"line":21,"column":47,"offset":1502},"end":{"line":21,"column":112,"offset":1567},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":21,"column":112,"offset":1567},"end":{"line":21,"column":113,"offset":1568},"indent":[]}}],"position":{"start":{"line":21,"column":5,"offset":1460},"end":{"line":21,"column":113,"offset":1568},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":1458},"end":{"line":21,"column":113,"offset":1568},"indent":[]}}],"position":{"start":{"line":21,"column":3,"offset":1458},"end":{"line":21,"column":113,"offset":1568},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1373},"end":{"line":21,"column":113,"offset":1568},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"A client application which utilizes ","position":{"start":{"line":22,"column":3,"offset":1571},"end":{"line":22,"column":39,"offset":1607},"indent":[]}},{"type":"inlineCode","value":"gql","position":{"start":{"line":22,"column":39,"offset":1607},"end":{"line":22,"column":44,"offset":1612},"indent":[]}},{"type":"text","value":" tagged template literals for its operations or, alternatively, stores operations in ","position":{"start":{"line":22,"column":44,"offset":1612},"end":{"line":22,"column":129,"offset":1697},"indent":[]}},{"type":"inlineCode","value":".graphql","position":{"start":{"line":22,"column":129,"offset":1697},"end":{"line":22,"column":139,"offset":1707},"indent":[]}},{"type":"text","value":" files.","position":{"start":{"line":22,"column":139,"offset":1707},"end":{"line":22,"column":146,"offset":1714},"indent":[]}}],"position":{"start":{"line":22,"column":3,"offset":1571},"end":{"line":22,"column":146,"offset":1714},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1569},"end":{"line":22,"column":146,"offset":1714},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"An Warthog Engine API key.","position":{"start":{"line":23,"column":3,"offset":1717},"end":{"line":23,"column":29,"offset":1743},"indent":[]}}],"position":{"start":{"line":23,"column":3,"offset":1717},"end":{"line":23,"column":29,"offset":1743},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"To obtain an API key, visit ","position":{"start":{"line":24,"column":5,"offset":1748},"end":{"line":24,"column":33,"offset":1776},"indent":[]}},{"type":"link","title":null,"url":"https://engine.warthog.dev","children":[{"type":"text","value":"Warthog Engine","position":{"start":{"line":24,"column":34,"offset":1777},"end":{"line":24,"column":48,"offset":1791},"indent":[]}}],"position":{"start":{"line":24,"column":33,"offset":1776},"end":{"line":24,"column":77,"offset":1820},"indent":[]}},{"type":"text","value":" and create a service. You will need and Engine account with a Team or Enterprise subscription to be able to upload to the operation registry.","position":{"start":{"line":24,"column":77,"offset":1820},"end":{"line":24,"column":219,"offset":1962},"indent":[]}}],"position":{"start":{"line":24,"column":5,"offset":1748},"end":{"line":24,"column":219,"offset":1962},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":1746},"end":{"line":24,"column":219,"offset":1962},"indent":[]}}],"position":{"start":{"line":24,"column":3,"offset":1746},"end":{"line":24,"column":219,"offset":1962},"indent":[]}}],"position":{"start":{"line":23,"column":1,"offset":1715},"end":{"line":24,"column":219,"offset":1962},"indent":[1]}}],"position":{"start":{"line":20,"column":1,"offset":1373},"end":{"line":24,"column":219,"offset":1962},"indent":[1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Limitations","position":{"start":{"line":26,"column":5,"offset":1968},"end":{"line":26,"column":16,"offset":1979},"indent":[]}}],"position":{"start":{"line":26,"column":1,"offset":1964},"end":{"line":26,"column":16,"offset":1979},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Subscriptions within Warthog Server should be disabled. For more information, see the instructions below.","position":{"start":{"line":28,"column":3,"offset":1983},"end":{"line":28,"column":108,"offset":2088},"indent":[]}}],"position":{"start":{"line":28,"column":3,"offset":1983},"end":{"line":28,"column":108,"offset":2088},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1981},"end":{"line":28,"column":108,"offset":2088},"indent":[]}}],"position":{"start":{"line":28,"column":1,"offset":1981},"end":{"line":28,"column":108,"offset":2088},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Please ","position":{"start":{"line":30,"column":1,"offset":2090},"end":{"line":30,"column":8,"offset":2097},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/contact-sales/","children":[{"type":"text","value":"contact the Warthog sales team","position":{"start":{"line":30,"column":9,"offset":2098},"end":{"line":30,"column":39,"offset":2128},"indent":[]}}],"position":{"start":{"line":30,"column":8,"offset":2097},"end":{"line":30,"column":80,"offset":2169},"indent":[]}},{"type":"text","value":" if you require a solution to any of these limitations.","position":{"start":{"line":30,"column":80,"offset":2169},"end":{"line":30,"column":135,"offset":2224},"indent":[]}}],"position":{"start":{"line":30,"column":1,"offset":2090},"end":{"line":30,"column":135,"offset":2224},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Installation steps","position":{"start":{"line":32,"column":4,"offset":2229},"end":{"line":32,"column":22,"offset":2247},"indent":[]}}],"position":{"start":{"line":32,"column":1,"offset":2226},"end":{"line":32,"column":22,"offset":2247},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Setting up operation registration and safelisting is a full-stack process, so you will need to have access to the client code containing the operations you want to register, and to the server within which you want to enforce the safelist.","position":{"start":{"line":34,"column":1,"offset":2249},"end":{"line":34,"column":239,"offset":2487},"indent":[]}}],"position":{"start":{"line":34,"column":1,"offset":2249},"end":{"line":34,"column":239,"offset":2487},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":36,"column":3,"offset":2491},"end":{"line":36,"column":7,"offset":2495},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Warthog CLI","position":{"start":{"line":36,"column":9,"offset":2497},"end":{"line":36,"column":20,"offset":2508},"indent":[]}}],"position":{"start":{"line":36,"column":7,"offset":2495},"end":{"line":36,"column":22,"offset":2510},"indent":[]}},{"type":"text","value":" is used to search the client codebase for GraphQL operations and upload them to Warthog Engine.","position":{"start":{"line":36,"column":22,"offset":2510},"end":{"line":36,"column":118,"offset":2606},"indent":[]}}],"position":{"start":{"line":36,"column":3,"offset":2491},"end":{"line":36,"column":118,"offset":2606},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2489},"end":{"line":36,"column":118,"offset":2606},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Warthog Server","position":{"start":{"line":37,"column":5,"offset":2611},"end":{"line":37,"column":19,"offset":2625},"indent":[]}}],"position":{"start":{"line":37,"column":3,"offset":2609},"end":{"line":37,"column":21,"offset":2627},"indent":[]}},{"type":"text","value":" is then configured with a plugin which fetches the manifest from Warthog Engine and enforces safelisting using that manifest.","position":{"start":{"line":37,"column":21,"offset":2627},"end":{"line":37,"column":147,"offset":2753},"indent":[]}}],"position":{"start":{"line":37,"column":3,"offset":2609},"end":{"line":37,"column":147,"offset":2753},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2607},"end":{"line":37,"column":147,"offset":2753},"indent":[]}}],"position":{"start":{"line":36,"column":1,"offset":2489},"end":{"line":37,"column":147,"offset":2753},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"The following steps will walk through the steps necessary for both the client and server codebases.","position":{"start":{"line":39,"column":1,"offset":2755},"end":{"line":39,"column":100,"offset":2854},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2755},"end":{"line":39,"column":100,"offset":2854},"indent":[]}},{"type":"list","ordered":true,"start":1,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#1-install-the-warthog-command-line-tool","children":[{"type":"text","value":"Install the Warthog CLI","position":{"start":{"line":41,"column":5,"offset":2860},"end":{"line":41,"column":28,"offset":2883},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":2859},"end":{"line":41,"column":71,"offset":2926},"indent":[]}}],"position":{"start":{"line":41,"column":4,"offset":2859},"end":{"line":41,"column":71,"offset":2926},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2856},"end":{"line":41,"column":71,"offset":2926},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#2-push-your-schema-to-the-warthog-schema-registry","children":[{"type":"text","value":"Push your schema to the Warthog schema registry","position":{"start":{"line":42,"column":5,"offset":2931},"end":{"line":42,"column":52,"offset":2978},"indent":[]}}],"position":{"start":{"line":42,"column":4,"offset":2930},"end":{"line":42,"column":105,"offset":3031},"indent":[]}}],"position":{"start":{"line":42,"column":4,"offset":2930},"end":{"line":42,"column":105,"offset":3031},"indent":[]}}],"position":{"start":{"line":42,"column":1,"offset":2927},"end":{"line":42,"column":105,"offset":3031},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#3-register-operations-from-your-client-bundle","children":[{"type":"text","value":"Register operations from your client bundle","position":{"start":{"line":43,"column":5,"offset":3036},"end":{"line":43,"column":48,"offset":3079},"indent":[]}}],"position":{"start":{"line":43,"column":4,"offset":3035},"end":{"line":43,"column":97,"offset":3128},"indent":[]}}],"position":{"start":{"line":43,"column":4,"offset":3035},"end":{"line":43,"column":97,"offset":3128},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":3032},"end":{"line":43,"column":97,"offset":3128},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#4-disable-subscription-support-on-warthog-server","children":[{"type":"text","value":"Disable subscription support on Warthog Server","position":{"start":{"line":44,"column":5,"offset":3133},"end":{"line":44,"column":51,"offset":3179},"indent":[]}}],"position":{"start":{"line":44,"column":4,"offset":3132},"end":{"line":44,"column":103,"offset":3231},"indent":[]}}],"position":{"start":{"line":44,"column":4,"offset":3132},"end":{"line":44,"column":103,"offset":3231},"indent":[]}}],"position":{"start":{"line":44,"column":1,"offset":3129},"end":{"line":44,"column":103,"offset":3231},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#5-add-the-operation-registry-plugin-to-warthog-server","children":[{"type":"text","value":"Add the operation registry plugin to Warthog Server","position":{"start":{"line":45,"column":5,"offset":3236},"end":{"line":45,"column":56,"offset":3287},"indent":[]}}],"position":{"start":{"line":45,"column":4,"offset":3235},"end":{"line":45,"column":113,"offset":3344},"indent":[]}}],"position":{"start":{"line":45,"column":4,"offset":3235},"end":{"line":45,"column":113,"offset":3344},"indent":[]}}],"position":{"start":{"line":45,"column":1,"offset":3232},"end":{"line":45,"column":113,"offset":3344},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#6-start-warthog-server-with-warthog-engine-enabled","children":[{"type":"text","value":"Start Warthog Server with Warthog Engine enabled","position":{"start":{"line":46,"column":5,"offset":3349},"end":{"line":46,"column":53,"offset":3397},"indent":[]}}],"position":{"start":{"line":46,"column":4,"offset":3348},"end":{"line":46,"column":107,"offset":3451},"indent":[]}}],"position":{"start":{"line":46,"column":4,"offset":3348},"end":{"line":46,"column":107,"offset":3451},"indent":[]}}],"position":{"start":{"line":46,"column":1,"offset":3345},"end":{"line":46,"column":107,"offset":3451},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"link","title":null,"url":"#7-verification","children":[{"type":"text","value":"Verify","position":{"start":{"line":47,"column":5,"offset":3456},"end":{"line":47,"column":11,"offset":3462},"indent":[]}}],"position":{"start":{"line":47,"column":4,"offset":3455},"end":{"line":47,"column":29,"offset":3480},"indent":[]}}],"position":{"start":{"line":47,"column":4,"offset":3455},"end":{"line":47,"column":29,"offset":3480},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":3452},"end":{"line":47,"column":29,"offset":3480},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2856},"end":{"line":47,"column":29,"offset":3480},"indent":[1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"1. Install the ","position":{"start":{"line":49,"column":5,"offset":3486},"end":{"line":49,"column":20,"offset":3501},"indent":[]}},{"type":"inlineCode","value":"warthog","position":{"start":{"line":49,"column":20,"offset":3501},"end":{"line":49,"column":29,"offset":3510},"indent":[]}},{"type":"text","value":" command line tool","position":{"start":{"line":49,"column":29,"offset":3510},"end":{"line":49,"column":47,"offset":3528},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":3482},"end":{"line":49,"column":47,"offset":3528},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Install the ","position":{"start":{"line":51,"column":1,"offset":3530},"end":{"line":51,"column":13,"offset":3542},"indent":[]}},{"type":"inlineCode","value":"warthog","position":{"start":{"line":51,"column":13,"offset":3542},"end":{"line":51,"column":22,"offset":3551},"indent":[]}},{"type":"text","value":" command line tool as a development dependency of your client application:","position":{"start":{"line":51,"column":22,"offset":3551},"end":{"line":51,"column":96,"offset":3625},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":3530},"end":{"line":51,"column":96,"offset":3625},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"npm install warthog --save-dev","position":{"start":{"line":53,"column":1,"offset":3627},"end":{"line":55,"column":4,"offset":3665},"indent":[1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"2. Push your schema to the Warthog schema registry","position":{"start":{"line":57,"column":5,"offset":3671},"end":{"line":57,"column":55,"offset":3721},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":3667},"end":{"line":57,"column":55,"offset":3721},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":59,"column":5,"offset":3727},"end":{"line":59,"column":10,"offset":3732},"indent":[]}}],"position":{"start":{"line":59,"column":3,"offset":3725},"end":{"line":59,"column":12,"offset":3734},"indent":[]}},{"type":"text","value":" If this server's schema has already been registered using ","position":{"start":{"line":59,"column":12,"offset":3734},"end":{"line":59,"column":71,"offset":3793},"indent":[]}},{"type":"inlineCode","value":"warthog service:push","position":{"start":{"line":59,"column":71,"offset":3793},"end":{"line":59,"column":93,"offset":3815},"indent":[]}},{"type":"text","value":", you can skip this step. For additional options and details, see the ","position":{"start":{"line":59,"column":93,"offset":3815},"end":{"line":59,"column":163,"offset":3885},"indent":[]}},{"type":"link","title":null,"url":"/platform/schema-registry/","children":[{"type":"text","value":"documentation for the schema registry","position":{"start":{"line":59,"column":164,"offset":3886},"end":{"line":59,"column":201,"offset":3923},"indent":[]}}],"position":{"start":{"line":59,"column":163,"offset":3885},"end":{"line":59,"column":230,"offset":3952},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":59,"column":230,"offset":3952},"end":{"line":59,"column":231,"offset":3953},"indent":[]}}],"position":{"start":{"line":59,"column":3,"offset":3725},"end":{"line":59,"column":231,"offset":3953},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":3723},"end":{"line":59,"column":231,"offset":3953},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"First, make sure Warthog Server is running and that introspection is enabled (it is often disabled in production).","position":{"start":{"line":61,"column":1,"offset":3955},"end":{"line":61,"column":115,"offset":4069},"indent":[]}}],"position":{"start":{"line":61,"column":1,"offset":3955},"end":{"line":61,"column":115,"offset":4069},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, using the following command as a reference, replace the ","position":{"start":{"line":63,"column":1,"offset":4071},"end":{"line":63,"column":63,"offset":4133},"indent":[]}},{"type":"inlineCode","value":"<ENGINE_API_KEY>","position":{"start":{"line":63,"column":63,"offset":4133},"end":{"line":63,"column":81,"offset":4151},"indent":[]}},{"type":"text","value":" with the Warthog Engine API key from the appropriate service and specify the correct server endpoint with the ","position":{"start":{"line":63,"column":81,"offset":4151},"end":{"line":63,"column":192,"offset":4262},"indent":[]}},{"type":"inlineCode","value":"--endpoint","position":{"start":{"line":63,"column":192,"offset":4262},"end":{"line":63,"column":204,"offset":4274},"indent":[]}},{"type":"text","value":" flag:","position":{"start":{"line":63,"column":204,"offset":4274},"end":{"line":63,"column":210,"offset":4280},"indent":[]}}],"position":{"start":{"line":63,"column":1,"offset":4071},"end":{"line":63,"column":210,"offset":4280},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"npx warthog service:push               \\\n    --key <ENGINE_API_KEY>            \\\n    --endpoint https://server/graphql","position":{"start":{"line":65,"column":1,"offset":4282},"end":{"line":69,"column":4,"offset":4408},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When successful, this command should return output similar to the following:","position":{"start":{"line":71,"column":1,"offset":4410},"end":{"line":71,"column":77,"offset":4486},"indent":[]}}],"position":{"start":{"line":71,"column":1,"offset":4410},"end":{"line":71,"column":77,"offset":4486},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"✔ Loading Warthog config\n✔ Fetching current schema\n✔ Publishing <service> to Warthog Engine\n\nid      schema        tag\n------  ------------- -------\nabc123  <service>     current","position":{"start":{"line":73,"column":1,"offset":4488},"end":{"line":81,"column":4,"offset":4674},"indent":[1,1,1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"If you encounter any errors, refer to the ","position":{"start":{"line":83,"column":3,"offset":4678},"end":{"line":83,"column":45,"offset":4720},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":83,"column":48,"offset":4723},"end":{"line":83,"column":63,"offset":4738},"indent":[]}}],"position":{"start":{"line":83,"column":46,"offset":4721},"end":{"line":83,"column":65,"offset":4740},"indent":[]}}],"position":{"start":{"line":83,"column":45,"offset":4720},"end":{"line":83,"column":66,"offset":4741},"indent":[]}},{"type":"text","value":" section below.","position":{"start":{"line":83,"column":66,"offset":4741},"end":{"line":83,"column":81,"offset":4756},"indent":[]}}],"position":{"start":{"line":83,"column":3,"offset":4678},"end":{"line":83,"column":81,"offset":4756},"indent":[]}}],"position":{"start":{"line":83,"column":1,"offset":4676},"end":{"line":83,"column":81,"offset":4756},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"3. Register operations from your client bundle","position":{"start":{"line":85,"column":5,"offset":4762},"end":{"line":85,"column":51,"offset":4808},"indent":[]}}],"position":{"start":{"line":85,"column":1,"offset":4758},"end":{"line":85,"column":51,"offset":4808},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now we'll use ","position":{"start":{"line":87,"column":1,"offset":4810},"end":{"line":87,"column":15,"offset":4824},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":87,"column":15,"offset":4824},"end":{"line":87,"column":36,"offset":4845},"indent":[]}},{"type":"text","value":" to locate operations within the client codebase and upload a manifest of those operations to Warthog operation registry. Once Warthog Server has been configured to respect the operation registry, only operations which have been included in the manifest will be permitted.","position":{"start":{"line":87,"column":36,"offset":4845},"end":{"line":87,"column":308,"offset":5117},"indent":[]}}],"position":{"start":{"line":87,"column":1,"offset":4810},"end":{"line":87,"column":308,"offset":5117},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":89,"column":1,"offset":5119},"end":{"line":89,"column":5,"offset":5123},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":89,"column":5,"offset":5123},"end":{"line":89,"column":26,"offset":5144},"indent":[]}},{"type":"text","value":" command:","position":{"start":{"line":89,"column":26,"offset":5144},"end":{"line":89,"column":35,"offset":5153},"indent":[]}}],"position":{"start":{"line":89,"column":1,"offset":5119},"end":{"line":89,"column":35,"offset":5153},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Supports multiple client bundles. Each bundle is identified by a ","position":{"start":{"line":91,"column":3,"offset":5157},"end":{"line":91,"column":68,"offset":5222},"indent":[]}},{"type":"inlineCode","value":"clientName","position":{"start":{"line":91,"column":68,"offset":5222},"end":{"line":91,"column":80,"offset":5234},"indent":[]}},{"type":"text","value":" (e.g. ","position":{"start":{"line":91,"column":80,"offset":5234},"end":{"line":91,"column":87,"offset":5241},"indent":[]}},{"type":"inlineCode","value":"react-web","position":{"start":{"line":91,"column":87,"offset":5241},"end":{"line":91,"column":98,"offset":5252},"indent":[]}},{"type":"text","value":") and ","position":{"start":{"line":91,"column":98,"offset":5252},"end":{"line":91,"column":104,"offset":5258},"indent":[]}},{"type":"inlineCode","value":"clientVersion","position":{"start":{"line":91,"column":104,"offset":5258},"end":{"line":91,"column":119,"offset":5273},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":91,"column":119,"offset":5273},"end":{"line":91,"column":120,"offset":5274},"indent":[]}}],"position":{"start":{"line":91,"column":3,"offset":5157},"end":{"line":91,"column":120,"offset":5274},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":5155},"end":{"line":91,"column":120,"offset":5274},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Supports JavaScript, TypeScript and ","position":{"start":{"line":92,"column":3,"offset":5277},"end":{"line":92,"column":39,"offset":5313},"indent":[]}},{"type":"inlineCode","value":".graphql","position":{"start":{"line":92,"column":39,"offset":5313},"end":{"line":92,"column":49,"offset":5323},"indent":[]}},{"type":"text","value":" files.","position":{"start":{"line":92,"column":49,"offset":5323},"end":{"line":92,"column":56,"offset":5330},"indent":[]}}],"position":{"start":{"line":92,"column":3,"offset":5277},"end":{"line":92,"column":56,"offset":5330},"indent":[]}}],"position":{"start":{"line":92,"column":1,"offset":5275},"end":{"line":92,"column":56,"offset":5330},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Accepts a list of files as a glob (e.g. ","position":{"start":{"line":93,"column":3,"offset":5333},"end":{"line":93,"column":43,"offset":5373},"indent":[]}},{"type":"inlineCode","value":"src/**/*.ts","position":{"start":{"line":93,"column":43,"offset":5373},"end":{"line":93,"column":56,"offset":5386},"indent":[]}},{"type":"text","value":") to search for GraphQL operations.","position":{"start":{"line":93,"column":56,"offset":5386},"end":{"line":93,"column":91,"offset":5421},"indent":[]}}],"position":{"start":{"line":93,"column":3,"offset":5333},"end":{"line":93,"column":91,"offset":5421},"indent":[]}}],"position":{"start":{"line":93,"column":1,"offset":5331},"end":{"line":93,"column":91,"offset":5421},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"By default, includes the ","position":{"start":{"line":94,"column":3,"offset":5424},"end":{"line":94,"column":28,"offset":5449},"indent":[]}},{"type":"inlineCode","value":"__typename","position":{"start":{"line":94,"column":28,"offset":5449},"end":{"line":94,"column":40,"offset":5461},"indent":[]}},{"type":"text","value":" fields which are added by Warthog Client at runtime.","position":{"start":{"line":94,"column":40,"offset":5461},"end":{"line":94,"column":93,"offset":5514},"indent":[]}}],"position":{"start":{"line":94,"column":3,"offset":5424},"end":{"line":94,"column":93,"offset":5514},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":5422},"end":{"line":94,"column":93,"offset":5514},"indent":[]}}],"position":{"start":{"line":91,"column":1,"offset":5155},"end":{"line":94,"column":93,"offset":5514},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"To register operations, use the following command as a reference, taking care to replace the ","position":{"start":{"line":96,"column":1,"offset":5516},"end":{"line":96,"column":94,"offset":5609},"indent":[]}},{"type":"inlineCode","value":"<ENGINE_API_KEY>","position":{"start":{"line":96,"column":94,"offset":5609},"end":{"line":96,"column":112,"offset":5627},"indent":[]}},{"type":"text","value":" with the appropriate Warthog Engine API key, specifying a unique name for this application with ","position":{"start":{"line":96,"column":112,"offset":5627},"end":{"line":96,"column":209,"offset":5724},"indent":[]}},{"type":"inlineCode","value":"<CLIENT_IDENTIFIER>","position":{"start":{"line":96,"column":209,"offset":5724},"end":{"line":96,"column":230,"offset":5745},"indent":[]}},{"type":"text","value":", and indicating the correct glob of files to search:","position":{"start":{"line":96,"column":230,"offset":5745},"end":{"line":96,"column":283,"offset":5798},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":5516},"end":{"line":96,"column":283,"offset":5798},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"npx warthog client:push \\\n    --key <ENGINE_API_KEY> \\\n    --clientName <CLIENT_IDENTIFIER> \\\n    --clientVersion <CLIENT_VERSION> \\\n    --includes=\"src/**/*.{ts,js,graphql}\"","position":{"start":{"line":98,"column":1,"offset":5800},"end":{"line":104,"column":4,"offset":5982},"indent":[1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Note:","position":{"start":{"line":106,"column":4,"offset":5987},"end":{"line":106,"column":9,"offset":5992},"indent":[]}}],"position":{"start":{"line":106,"column":3,"offset":5986},"end":{"line":106,"column":10,"offset":5993},"indent":[]}},{"type":"text","value":" Operations that are stored in the registry are legal for ","position":{"start":{"line":106,"column":10,"offset":5993},"end":{"line":106,"column":68,"offset":6051},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"all","position":{"start":{"line":106,"column":69,"offset":6052},"end":{"line":106,"column":72,"offset":6055},"indent":[]}}],"position":{"start":{"line":106,"column":68,"offset":6051},"end":{"line":106,"column":73,"offset":6056},"indent":[]}},{"type":"text","value":" clients. The client name and client version are collected as metadata to make debugging easier and provide more insights.","position":{"start":{"line":106,"column":73,"offset":6056},"end":{"line":106,"column":195,"offset":6178},"indent":[]}}],"position":{"start":{"line":106,"column":3,"offset":5986},"end":{"line":106,"column":195,"offset":6178},"indent":[]}}],"position":{"start":{"line":106,"column":1,"offset":5984},"end":{"line":106,"column":195,"offset":6178},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When succesfull, the output from this command should look similar to the following:","position":{"start":{"line":108,"column":1,"offset":6180},"end":{"line":108,"column":84,"offset":6263},"indent":[]}}],"position":{"start":{"line":108,"column":1,"offset":6180},"end":{"line":108,"column":84,"offset":6263},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"✔ Loading Warthog project\n✔ Pushing client to Engine service <service>","position":{"start":{"line":110,"column":1,"offset":6265},"end":{"line":113,"column":4,"offset":6343},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Currently, once an operation is registered it will remain registered indefinitely. For production operation registration, it's recommended that operations be registered from a deployment pipeline step rather than manually.","position":{"start":{"line":115,"column":1,"offset":6345},"end":{"line":115,"column":223,"offset":6567},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":6345},"end":{"line":115,"column":223,"offset":6567},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you encounter any errors, check the ","position":{"start":{"line":117,"column":1,"offset":6569},"end":{"line":117,"column":40,"offset":6608},"indent":[]}},{"type":"emphasis","children":[{"type":"strong","children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":117,"column":43,"offset":6611},"end":{"line":117,"column":58,"offset":6626},"indent":[]}}],"position":{"start":{"line":117,"column":41,"offset":6609},"end":{"line":117,"column":60,"offset":6628},"indent":[]}}],"position":{"start":{"line":117,"column":40,"offset":6608},"end":{"line":117,"column":61,"offset":6629},"indent":[]}},{"type":"text","value":" section below.","position":{"start":{"line":117,"column":61,"offset":6629},"end":{"line":117,"column":76,"offset":6644},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":6569},"end":{"line":117,"column":76,"offset":6644},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"3.1 Optionally, set the schema tag","position":{"start":{"line":119,"column":6,"offset":6651},"end":{"line":119,"column":40,"offset":6685},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":6646},"end":{"line":119,"column":40,"offset":6685},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To specify the schema tag to register operations on, pass an additional ","position":{"start":{"line":121,"column":1,"offset":6687},"end":{"line":121,"column":73,"offset":6759},"indent":[]}},{"type":"inlineCode","value":"--tag <TAG>","position":{"start":{"line":121,"column":73,"offset":6759},"end":{"line":121,"column":86,"offset":6772},"indent":[]}},{"type":"text","value":" argument (","position":{"start":{"line":121,"column":86,"offset":6772},"end":{"line":121,"column":97,"offset":6783},"indent":[]}},{"type":"inlineCode","value":"npx warthog client:push --tag <TAG>","position":{"start":{"line":121,"column":97,"offset":6783},"end":{"line":121,"column":134,"offset":6820},"indent":[]}},{"type":"text","value":").","position":{"start":{"line":121,"column":134,"offset":6820},"end":{"line":121,"column":136,"offset":6822},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":6687},"end":{"line":121,"column":136,"offset":6822},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"4. Disable subscription support on Warthog Server","position":{"start":{"line":123,"column":5,"offset":6828},"end":{"line":123,"column":54,"offset":6877},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":6824},"end":{"line":123,"column":54,"offset":6877},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Subscription support is enabled by default in Warthog Server 2.x and provided by a separate server which does not utilize Warthog Server 2.x's primary request pipeline. Therefore, the operation registry plugin (and any plugin) is unable to be invoked during a request which comes into the subscription server and enforcement of operation safelisting is not possible. ","position":{"start":{"line":125,"column":1,"offset":6879},"end":{"line":125,"column":368,"offset":7246},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"For proper enforcement of operation safelisting, subscriptions should be disabled.","position":{"start":{"line":125,"column":370,"offset":7248},"end":{"line":125,"column":452,"offset":7330},"indent":[]}}],"position":{"start":{"line":125,"column":368,"offset":7246},"end":{"line":125,"column":454,"offset":7332},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":6879},"end":{"line":125,"column":454,"offset":7332},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":127,"column":5,"offset":7338},"end":{"line":127,"column":10,"offset":7343},"indent":[]}}],"position":{"start":{"line":127,"column":3,"offset":7336},"end":{"line":127,"column":12,"offset":7345},"indent":[]}},{"type":"text","value":" In the future, the subscription support will have its request pipeline unified with that of the main request pipeline, thus enabling plugin support and permitting the the operation registry to work with subscriptions in the same way that it works with regular GraphQL requests.","position":{"start":{"line":127,"column":12,"offset":7345},"end":{"line":127,"column":290,"offset":7623},"indent":[]}}],"position":{"start":{"line":127,"column":3,"offset":7336},"end":{"line":127,"column":290,"offset":7623},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":7334},"end":{"line":127,"column":290,"offset":7623},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To disable subscriptions support on Warthog Server 2.x, a ","position":{"start":{"line":129,"column":1,"offset":7625},"end":{"line":129,"column":59,"offset":7683},"indent":[]}},{"type":"inlineCode","value":"subscriptions: false","position":{"start":{"line":129,"column":59,"offset":7683},"end":{"line":129,"column":81,"offset":7705},"indent":[]}},{"type":"text","value":" setting should be included on the instantiation of Warthog Server, as follows:","position":{"start":{"line":129,"column":81,"offset":7705},"end":{"line":129,"column":160,"offset":7784},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":7625},"end":{"line":129,"column":160,"offset":7784},"indent":[]}},{"type":"code","lang":"js{5-6}","meta":null,"value":"const server = new ApolloServer({\n  // Existing configuration\n  typeDefs,\n  resolvers,\n  // Ensure that subscriptions are disabled.\n  subscriptions: false\n  // ...\n});","position":{"start":{"line":131,"column":1,"offset":7786},"end":{"line":140,"column":4,"offset":7968},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"5. Add the operation registry plugin to Warthog Server","position":{"start":{"line":142,"column":5,"offset":7974},"end":{"line":142,"column":59,"offset":8028},"indent":[]}}],"position":{"start":{"line":142,"column":1,"offset":7970},"end":{"line":142,"column":59,"offset":8028},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Enable demand control by adding the operation registry to Warthog Server. To enable the operation registry within Warthog Server, it's necessary to install and enable the ","position":{"start":{"line":144,"column":1,"offset":8030},"end":{"line":144,"column":172,"offset":8201},"indent":[]}},{"type":"inlineCode","value":"warthog-server-plugin-operation-registry","position":{"start":{"line":144,"column":172,"offset":8201},"end":{"line":144,"column":214,"offset":8243},"indent":[]}},{"type":"text","value":" plugin and ensure Warthog Server is configured to communicate with Warthog Engine.","position":{"start":{"line":144,"column":214,"offset":8243},"end":{"line":144,"column":297,"offset":8326},"indent":[]}}],"position":{"start":{"line":144,"column":1,"offset":8030},"end":{"line":144,"column":297,"offset":8326},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"First, add the appropriate plugin to the Warthog Server's ","position":{"start":{"line":146,"column":1,"offset":8328},"end":{"line":146,"column":59,"offset":8386},"indent":[]}},{"type":"inlineCode","value":"package.json","position":{"start":{"line":146,"column":59,"offset":8386},"end":{"line":146,"column":73,"offset":8400},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":146,"column":73,"offset":8400},"end":{"line":146,"column":74,"offset":8401},"indent":[]}}],"position":{"start":{"line":146,"column":1,"offset":8328},"end":{"line":146,"column":74,"offset":8401},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"\nnpm install warthog-server-plugin-operation-registry\n","position":{"start":{"line":148,"column":1,"offset":8403},"end":{"line":152,"column":4,"offset":8465},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Next, the plugin must be enabled. This requires adding the appropriate module to the ","position":{"start":{"line":154,"column":1,"offset":8467},"end":{"line":154,"column":86,"offset":8552},"indent":[]}},{"type":"inlineCode","value":"plugins","position":{"start":{"line":154,"column":86,"offset":8552},"end":{"line":154,"column":95,"offset":8561},"indent":[]}},{"type":"text","value":" parameter to the Warthog Server options:","position":{"start":{"line":154,"column":95,"offset":8561},"end":{"line":154,"column":136,"offset":8602},"indent":[]}}],"position":{"start":{"line":154,"column":1,"offset":8467},"end":{"line":154,"column":136,"offset":8602},"indent":[]}},{"type":"code","lang":"js{8-12}","meta":null,"value":"const server = new ApolloServer({\n  // Existing configuration\n  typeDefs,\n  resolvers,\n  subscriptions: false,\n  // ...\n  // New configuration\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      forbidUnregisteredOperations: true\n    })\n  ]\n});","position":{"start":{"line":156,"column":1,"offset":8604},"end":{"line":170,"column":4,"offset":8889},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"<ExpansionPanel title=\"Running Federation using the Warthog Gateway? These same steps should work!\">","position":{"start":{"line":172,"column":1,"offset":8891},"end":{"line":172,"column":101,"offset":8991},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The full setup:","position":{"start":{"line":174,"column":1,"offset":8993},"end":{"line":174,"column":16,"offset":9008},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":8993},"end":{"line":174,"column":16,"offset":9008},"indent":[]}},{"type":"code","lang":"js{21-25}","meta":null,"value":"const { ApolloServer } = require('warthog-server');\nconst { ApolloGateway } = require(\"@warthog/gateway\");\n\nconst gateway = new ApolloGateway({\n  serviceList: [\n    { name: 'accounts', url: 'http://localhost:4001' },\n    // more services\n  ],\n});\n\n(async () => {\n  const { schema, executor } = await gateway.load();\n\n  const server = new ApolloServer({\n    // Existing configuration\n    schema,\n    executor,\n    subscriptions: false\n    // ...\n    // New configuration\n    plugins: [\n      require(\"warthog-server-plugin-operation-registry\")({\n        forbidUnregisteredOperations: true\n      })\n    ]\n  });\n\n  server.listen().then(({ url }) => {\n    console.log(`🚀 Server ready at ${url}`);\n  });\n})();","position":{"start":{"line":176,"column":1,"offset":9010},"end":{"line":208,"column":4,"offset":9732},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"jsx","value":"</ExpansionPanel>","position":{"start":{"line":210,"column":1,"offset":9734},"end":{"line":210,"column":18,"offset":9751},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"5.1 Optionally, set the schema tag","position":{"start":{"line":212,"column":6,"offset":9758},"end":{"line":212,"column":40,"offset":9792},"indent":[]}}],"position":{"start":{"line":212,"column":1,"offset":9753},"end":{"line":212,"column":40,"offset":9792},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Configure the ","position":{"start":{"line":214,"column":1,"offset":9794},"end":{"line":214,"column":15,"offset":9808},"indent":[]}},{"type":"inlineCode","value":"schemaTag","position":{"start":{"line":214,"column":15,"offset":9808},"end":{"line":214,"column":26,"offset":9819},"indent":[]}},{"type":"text","value":" field to specify which tag to pull operation manifests from.","position":{"start":{"line":214,"column":26,"offset":9819},"end":{"line":214,"column":87,"offset":9880},"indent":[]}}],"position":{"start":{"line":214,"column":1,"offset":9794},"end":{"line":214,"column":87,"offset":9880},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"const server = new ApolloServer({\n  // Existing configuration\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      schemaTag: \"overrideTag\" // highlight-line\n    })\n  ]\n});","position":{"start":{"line":216,"column":1,"offset":9882},"end":{"line":225,"column":4,"offset":10088},"indent":[1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"6. Start Warthog Server with Warthog Engine enabled","position":{"start":{"line":227,"column":5,"offset":10094},"end":{"line":227,"column":56,"offset":10145},"indent":[]}}],"position":{"start":{"line":227,"column":1,"offset":10090},"end":{"line":227,"column":56,"offset":10145},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If the server was already configured to use Warthog Engine, no additional changes are necessary, but it's important to make sure that the server is configured to use the same service as the operations were registered with in step 3.","position":{"start":{"line":229,"column":1,"offset":10147},"end":{"line":229,"column":233,"offset":10379},"indent":[]}}],"position":{"start":{"line":229,"column":1,"offset":10147},"end":{"line":229,"column":233,"offset":10379},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If the server was not previously configured with Warthog Engine, be sure to start the server with the ","position":{"start":{"line":231,"column":1,"offset":10381},"end":{"line":231,"column":103,"offset":10483},"indent":[]}},{"type":"inlineCode","value":"ENGINE_API_KEY","position":{"start":{"line":231,"column":103,"offset":10483},"end":{"line":231,"column":119,"offset":10499},"indent":[]}},{"type":"text","value":" variable set to the appropriate API key. For example:","position":{"start":{"line":231,"column":119,"offset":10499},"end":{"line":231,"column":173,"offset":10553},"indent":[]}}],"position":{"start":{"line":231,"column":1,"offset":10381},"end":{"line":231,"column":173,"offset":10553},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"ENGINE_API_KEY=<ENGINE_API_KEY> npm start","position":{"start":{"line":233,"column":1,"offset":10555},"end":{"line":235,"column":4,"offset":10604},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Alternatively, the API key can be specified with the ","position":{"start":{"line":237,"column":1,"offset":10606},"end":{"line":237,"column":54,"offset":10659},"indent":[]}},{"type":"inlineCode","value":"engine","position":{"start":{"line":237,"column":54,"offset":10659},"end":{"line":237,"column":62,"offset":10667},"indent":[]}},{"type":"text","value":" parameter on the Warthog Server constructor options:","position":{"start":{"line":237,"column":62,"offset":10667},"end":{"line":237,"column":115,"offset":10720},"indent":[]}}],"position":{"start":{"line":237,"column":1,"offset":10606},"end":{"line":237,"column":115,"offset":10720},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"const server = new ApolloServer({\n  // ...\n  engine: \"<ENGINE_API_KEY>\" // highlight-line\n  // ...\n});","position":{"start":{"line":239,"column":1,"offset":10722},"end":{"line":245,"column":4,"offset":10834},"indent":[1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"Note:","position":{"start":{"line":247,"column":5,"offset":10840},"end":{"line":247,"column":10,"offset":10845},"indent":[]}}],"position":{"start":{"line":247,"column":3,"offset":10838},"end":{"line":247,"column":12,"offset":10847},"indent":[]}},{"type":"text","value":" For security, it's recommended to pass the Engine API key as an environment variable so it will not be checked into version control (VCS).","position":{"start":{"line":247,"column":12,"offset":10847},"end":{"line":247,"column":151,"offset":10986},"indent":[]}}],"position":{"start":{"line":247,"column":3,"offset":10838},"end":{"line":247,"column":151,"offset":10986},"indent":[]}}],"position":{"start":{"line":247,"column":1,"offset":10836},"end":{"line":247,"column":151,"offset":10986},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"7. Verification","position":{"start":{"line":249,"column":5,"offset":10992},"end":{"line":249,"column":20,"offset":11007},"indent":[]}}],"position":{"start":{"line":249,"column":1,"offset":10988},"end":{"line":249,"column":20,"offset":11007},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"With the operation registry enabled, ","position":{"start":{"line":251,"column":1,"offset":11009},"end":{"line":251,"column":38,"offset":11046},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"only","position":{"start":{"line":251,"column":39,"offset":11047},"end":{"line":251,"column":43,"offset":11051},"indent":[]}}],"position":{"start":{"line":251,"column":38,"offset":11046},"end":{"line":251,"column":44,"offset":11052},"indent":[]}},{"type":"text","value":" operations which have been registered will be permitted.","position":{"start":{"line":251,"column":44,"offset":11052},"end":{"line":251,"column":101,"offset":11109},"indent":[]}}],"position":{"start":{"line":251,"column":1,"offset":11009},"end":{"line":251,"column":101,"offset":11109},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To confirm that everything is configured properly, try executing an operation against the server which was ","position":{"start":{"line":253,"column":1,"offset":11111},"end":{"line":253,"column":108,"offset":11218},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"not","position":{"start":{"line":253,"column":110,"offset":11220},"end":{"line":253,"column":113,"offset":11223},"indent":[]}}],"position":{"start":{"line":253,"column":108,"offset":11218},"end":{"line":253,"column":115,"offset":11225},"indent":[]}},{"type":"text","value":" registered from the client bundle in step 3.","position":{"start":{"line":253,"column":115,"offset":11225},"end":{"line":253,"column":160,"offset":11270},"indent":[]}}],"position":{"start":{"line":253,"column":1,"offset":11111},"end":{"line":253,"column":160,"offset":11270},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, using ","position":{"start":{"line":255,"column":1,"offset":11272},"end":{"line":255,"column":20,"offset":11291},"indent":[]}},{"type":"inlineCode","value":"curl","position":{"start":{"line":255,"column":20,"offset":11291},"end":{"line":255,"column":26,"offset":11297},"indent":[]}},{"type":"text","value":" this could be done with a command similar to:","position":{"start":{"line":255,"column":26,"offset":11297},"end":{"line":255,"column":72,"offset":11343},"indent":[]}}],"position":{"start":{"line":255,"column":1,"offset":11272},"end":{"line":255,"column":72,"offset":11343},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"curl 'http://server/graphql/' \\\n    -H 'Content-Type: application/json' \\\n    --data-binary '{\"query\":\"query { likes{title} }\"}'","position":{"start":{"line":257,"column":1,"offset":11345},"end":{"line":261,"column":4,"offset":11481},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If the server is configured properly, it should return:","position":{"start":{"line":263,"column":1,"offset":11483},"end":{"line":263,"column":56,"offset":11538},"indent":[]}}],"position":{"start":{"line":263,"column":1,"offset":11483},"end":{"line":263,"column":56,"offset":11538},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"Execution forbidden","position":{"start":{"line":265,"column":1,"offset":11540},"end":{"line":267,"column":4,"offset":11567},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Finally, to confirm that the server will allow permitted operations, try running an operation from the client.","position":{"start":{"line":269,"column":1,"offset":11569},"end":{"line":269,"column":111,"offset":11679},"indent":[]}}],"position":{"start":{"line":269,"column":1,"offset":11569},"end":{"line":269,"column":111,"offset":11679},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Configuration","position":{"start":{"line":271,"column":4,"offset":11684},"end":{"line":271,"column":17,"offset":11697},"indent":[]}}],"position":{"start":{"line":271,"column":1,"offset":11681},"end":{"line":271,"column":17,"offset":11697},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Selective enforcement","position":{"start":{"line":273,"column":5,"offset":11703},"end":{"line":273,"column":26,"offset":11724},"indent":[]}}],"position":{"start":{"line":273,"column":1,"offset":11699},"end":{"line":273,"column":26,"offset":11724},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In some cases, deployments may want to selectively enable the behavior of ","position":{"start":{"line":275,"column":1,"offset":11726},"end":{"line":275,"column":75,"offset":11800},"indent":[]}},{"type":"inlineCode","value":"forbidUnregisteredOperations","position":{"start":{"line":275,"column":75,"offset":11800},"end":{"line":275,"column":105,"offset":11830},"indent":[]}},{"type":"text","value":" depending on environmental conditions (e.g. based on headers).","position":{"start":{"line":275,"column":105,"offset":11830},"end":{"line":275,"column":168,"offset":11893},"indent":[]}}],"position":{"start":{"line":275,"column":1,"offset":11726},"end":{"line":275,"column":168,"offset":11893},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To selectively enable operation safelisting, the ","position":{"start":{"line":277,"column":1,"offset":11895},"end":{"line":277,"column":50,"offset":11944},"indent":[]}},{"type":"inlineCode","value":"forbidUnregisteredOperations","position":{"start":{"line":277,"column":50,"offset":11944},"end":{"line":277,"column":80,"offset":11974},"indent":[]}},{"type":"text","value":" setting supports a ","position":{"start":{"line":277,"column":80,"offset":11974},"end":{"line":277,"column":100,"offset":11994},"indent":[]}},{"type":"link","title":null,"url":"https://en.wikipedia.org/wiki/Predicate_(mathematical_logic)","children":[{"type":"text","value":"predicate function","position":{"start":{"line":277,"column":101,"offset":11995},"end":{"line":277,"column":119,"offset":12013},"indent":[]}}],"position":{"start":{"line":277,"column":100,"offset":11994},"end":{"line":277,"column":184,"offset":12078},"indent":[]}},{"type":"text","value":" which receives the request context and can return ","position":{"start":{"line":277,"column":184,"offset":12078},"end":{"line":277,"column":235,"offset":12129},"indent":[]}},{"type":"inlineCode","value":"true","position":{"start":{"line":277,"column":235,"offset":12129},"end":{"line":277,"column":241,"offset":12135},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":277,"column":241,"offset":12135},"end":{"line":277,"column":245,"offset":12139},"indent":[]}},{"type":"inlineCode","value":"false","position":{"start":{"line":277,"column":245,"offset":12139},"end":{"line":277,"column":252,"offset":12146},"indent":[]}},{"type":"text","value":" to indicate whether enforcement is enabled or disabled respectively.","position":{"start":{"line":277,"column":252,"offset":12146},"end":{"line":277,"column":321,"offset":12215},"indent":[]}}],"position":{"start":{"line":277,"column":1,"offset":11895},"end":{"line":277,"column":321,"offset":12215},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"In the example below, the ","position":{"start":{"line":279,"column":3,"offset":12219},"end":{"line":279,"column":29,"offset":12245},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":279,"column":29,"offset":12245},"end":{"line":279,"column":38,"offset":12254},"indent":[]}},{"type":"text","value":" is the shared request context which can be modified per-request by plugins or using the ","position":{"start":{"line":279,"column":38,"offset":12254},"end":{"line":279,"column":127,"offset":12343},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt","children":[{"type":"inlineCode","value":"context","position":{"start":{"line":279,"column":128,"offset":12344},"end":{"line":279,"column":137,"offset":12353},"indent":[]}}],"position":{"start":{"line":279,"column":127,"offset":12343},"end":{"line":279,"column":242,"offset":12458},"indent":[]}},{"type":"text","value":" function on the ","position":{"start":{"line":279,"column":242,"offset":12458},"end":{"line":279,"column":259,"offset":12475},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":279,"column":259,"offset":12475},"end":{"line":279,"column":273,"offset":12489},"indent":[]}},{"type":"text","value":" constructor. The ","position":{"start":{"line":279,"column":273,"offset":12489},"end":{"line":279,"column":291,"offset":12507},"indent":[]}},{"type":"inlineCode","value":"headers","position":{"start":{"line":279,"column":291,"offset":12507},"end":{"line":279,"column":300,"offset":12516},"indent":[]}},{"type":"text","value":" are the HTTP headers of the request which are accessed in the same way as the ","position":{"start":{"line":279,"column":300,"offset":12516},"end":{"line":279,"column":379,"offset":12595},"indent":[]}},{"type":"link","title":null,"url":"https://developer.mozilla.org/en-US/docs/Web/API/Headers","children":[{"type":"text","value":"Fetch API ","position":{"start":{"line":279,"column":380,"offset":12596},"end":{"line":279,"column":390,"offset":12606},"indent":[]}},{"type":"inlineCode","value":"Headers","position":{"start":{"line":279,"column":390,"offset":12606},"end":{"line":279,"column":399,"offset":12615},"indent":[]}},{"type":"text","value":" interface","position":{"start":{"line":279,"column":399,"offset":12615},"end":{"line":279,"column":409,"offset":12625},"indent":[]}}],"position":{"start":{"line":279,"column":379,"offset":12595},"end":{"line":279,"column":468,"offset":12684},"indent":[]}},{"type":"text","value":" (e.g. ","position":{"start":{"line":279,"column":468,"offset":12684},"end":{"line":279,"column":475,"offset":12691},"indent":[]}},{"type":"inlineCode","value":"get(...)","position":{"start":{"line":279,"column":475,"offset":12691},"end":{"line":279,"column":485,"offset":12701},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":279,"column":485,"offset":12701},"end":{"line":279,"column":487,"offset":12703},"indent":[]}},{"type":"inlineCode","value":"has(...)","position":{"start":{"line":279,"column":487,"offset":12703},"end":{"line":279,"column":497,"offset":12713},"indent":[]}},{"type":"text","value":", etc.).","position":{"start":{"line":279,"column":497,"offset":12713},"end":{"line":279,"column":505,"offset":12721},"indent":[]}}],"position":{"start":{"line":279,"column":3,"offset":12219},"end":{"line":279,"column":505,"offset":12721},"indent":[]}}],"position":{"start":{"line":279,"column":1,"offset":12217},"end":{"line":279,"column":505,"offset":12721},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"For example, to enforce the operation registry safelisting while skipping enforcement for any request in which the ","position":{"start":{"line":281,"column":1,"offset":12723},"end":{"line":281,"column":116,"offset":12838},"indent":[]}},{"type":"inlineCode","value":"Let-me-pass","position":{"start":{"line":281,"column":116,"offset":12838},"end":{"line":281,"column":129,"offset":12851},"indent":[]}},{"type":"text","value":" header was present with a value of ","position":{"start":{"line":281,"column":129,"offset":12851},"end":{"line":281,"column":165,"offset":12887},"indent":[]}},{"type":"inlineCode","value":"Pretty please?","position":{"start":{"line":281,"column":165,"offset":12887},"end":{"line":281,"column":181,"offset":12903},"indent":[]}},{"type":"text","value":", the following configuration could be used:","position":{"start":{"line":281,"column":181,"offset":12903},"end":{"line":281,"column":225,"offset":12947},"indent":[]}}],"position":{"start":{"line":281,"column":1,"offset":12723},"end":{"line":281,"column":225,"offset":12947},"indent":[]}},{"type":"code","lang":"js{12-27}","meta":null,"value":"const server = new ApolloServer({\n  // Existing configuration\n  typeDefs,\n  resolvers,\n  subscriptions: false,\n  engine: \"<ENGINE_API_KEY>\",\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      // De-structure the object to get the HTTP `headers` and the GraphQL\n      // request `context`.  Additional validation is possible, but this\n      // function must be synchronous.  For more details, see the note below.\n      forbidUnregisteredOperations({\n        context, // Destructure the shared request `context`.\n        request: {\n          http: { headers } // Destructure the `headers` class.\n        }\n      }) {\n        // If a magic header is in place, allow any unregistered operation.\n        if (headers.get(\"Let-me-pass\") === \"Pretty please?\") {\n          return false;\n        }\n\n        // Enforce operation safelisting on all other users.\n        return true;\n      }\n    })\n  ]\n});","position":{"start":{"line":283,"column":1,"offset":12949},"end":{"line":312,"column":4,"offset":13885},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"Note:","position":{"start":{"line":314,"column":4,"offset":13890},"end":{"line":314,"column":9,"offset":13895},"indent":[]}}],"position":{"start":{"line":314,"column":3,"offset":13889},"end":{"line":314,"column":10,"offset":13896},"indent":[]}},{"type":"text","value":" The ","position":{"start":{"line":314,"column":10,"offset":13896},"end":{"line":314,"column":15,"offset":13901},"indent":[]}},{"type":"inlineCode","value":"forbidUnregisteredOperations","position":{"start":{"line":314,"column":15,"offset":13901},"end":{"line":314,"column":45,"offset":13931},"indent":[]}},{"type":"text","value":" callback must be synchronous. If it is necessary to make an ","position":{"start":{"line":314,"column":45,"offset":13931},"end":{"line":314,"column":106,"offset":13992},"indent":[]}},{"type":"inlineCode","value":"async","position":{"start":{"line":314,"column":106,"offset":13992},"end":{"line":314,"column":113,"offset":13999},"indent":[]}},{"type":"text","value":" request (e.g. a database inquiry) to make a determination about access, such a lookup should occur within the ","position":{"start":{"line":314,"column":113,"offset":13999},"end":{"line":314,"column":224,"offset":14110},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt","children":[{"type":"inlineCode","value":"context","position":{"start":{"line":314,"column":225,"offset":14111},"end":{"line":314,"column":234,"offset":14120},"indent":[]}},{"type":"text","value":" function","position":{"start":{"line":314,"column":234,"offset":14120},"end":{"line":314,"column":243,"offset":14129},"indent":[]}}],"position":{"start":{"line":314,"column":224,"offset":14110},"end":{"line":314,"column":348,"offset":14234},"indent":[]}},{"type":"text","value":" on the ","position":{"start":{"line":314,"column":348,"offset":14234},"end":{"line":314,"column":356,"offset":14242},"indent":[]}},{"type":"inlineCode","value":"ApolloServer","position":{"start":{"line":314,"column":356,"offset":14242},"end":{"line":314,"column":370,"offset":14256},"indent":[]}},{"type":"text","value":" constructor (or any life-cycle event which has access to ","position":{"start":{"line":314,"column":370,"offset":14256},"end":{"line":314,"column":428,"offset":14314},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":314,"column":428,"offset":14314},"end":{"line":314,"column":437,"offset":14323},"indent":[]}},{"type":"text","value":") and the result will be available on the ","position":{"start":{"line":314,"column":437,"offset":14323},"end":{"line":314,"column":479,"offset":14365},"indent":[]}},{"type":"inlineCode","value":"context","position":{"start":{"line":314,"column":479,"offset":14365},"end":{"line":314,"column":488,"offset":14374},"indent":[]}},{"type":"text","value":" of ","position":{"start":{"line":314,"column":488,"offset":14374},"end":{"line":314,"column":492,"offset":14378},"indent":[]}},{"type":"inlineCode","value":"forbidUnregisteredOperations","position":{"start":{"line":314,"column":492,"offset":14378},"end":{"line":314,"column":522,"offset":14408},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":314,"column":522,"offset":14408},"end":{"line":314,"column":523,"offset":14409},"indent":[]}}],"position":{"start":{"line":314,"column":3,"offset":13889},"end":{"line":314,"column":523,"offset":14409},"indent":[]}}],"position":{"start":{"line":314,"column":1,"offset":13887},"end":{"line":314,"column":523,"offset":14409},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Testing the plugin","position":{"start":{"line":316,"column":4,"offset":14414},"end":{"line":316,"column":22,"offset":14432},"indent":[]}}],"position":{"start":{"line":316,"column":1,"offset":14411},"end":{"line":316,"column":22,"offset":14432},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"We recommend testing the behavior of the plugin, as well as your ","position":{"start":{"line":318,"column":1,"offset":14434},"end":{"line":318,"column":66,"offset":14499},"indent":[]}},{"type":"inlineCode","value":"forbidUnregisteredOperations","position":{"start":{"line":318,"column":66,"offset":14499},"end":{"line":318,"column":96,"offset":14529},"indent":[]}},{"type":"text","value":" function, before actually forbidding operation execution in production. To do so, you can use the ","position":{"start":{"line":318,"column":96,"offset":14529},"end":{"line":318,"column":195,"offset":14628},"indent":[]}},{"type":"inlineCode","value":"dryRun","position":{"start":{"line":318,"column":195,"offset":14628},"end":{"line":318,"column":203,"offset":14636},"indent":[]}},{"type":"text","value":" option, which will log information about the operation in lieu of actually forbidding anything.","position":{"start":{"line":318,"column":203,"offset":14636},"end":{"line":318,"column":299,"offset":14732},"indent":[]}}],"position":{"start":{"line":318,"column":1,"offset":14434},"end":{"line":318,"column":299,"offset":14732},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"const server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      forbidUnregisteredOperations: true,\n      dryRun: true // highlight-line\n    });\n  ],\n});","position":{"start":{"line":320,"column":1,"offset":14734},"end":{"line":331,"column":4,"offset":14969},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Troubleshooting","position":{"start":{"line":333,"column":4,"offset":14974},"end":{"line":333,"column":19,"offset":14989},"indent":[]}}],"position":{"start":{"line":333,"column":1,"offset":14971},"end":{"line":333,"column":19,"offset":14989},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"The server indicates ","position":{"start":{"line":335,"column":6,"offset":14996},"end":{"line":335,"column":27,"offset":15017},"indent":[]}},{"type":"inlineCode","value":"Access denied.","position":{"start":{"line":335,"column":27,"offset":15017},"end":{"line":335,"column":43,"offset":15033},"indent":[]}},{"type":"text","value":" (or ","position":{"start":{"line":335,"column":43,"offset":15033},"end":{"line":335,"column":48,"offset":15038},"indent":[]}},{"type":"inlineCode","value":"AccessDenied","position":{"start":{"line":335,"column":48,"offset":15038},"end":{"line":335,"column":62,"offset":15052},"indent":[]}},{"type":"text","value":") when fetching the manifest","position":{"start":{"line":335,"column":62,"offset":15052},"end":{"line":335,"column":90,"offset":15080},"indent":[]}}],"position":{"start":{"line":335,"column":1,"offset":14991},"end":{"line":335,"column":90,"offset":15080},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"When the server cannot fetch the manifest, the message may indicate indicate that access is denied:","position":{"start":{"line":337,"column":1,"offset":15082},"end":{"line":337,"column":100,"offset":15181},"indent":[]}}],"position":{"start":{"line":337,"column":1,"offset":15082},"end":{"line":337,"column":100,"offset":15181},"indent":[]}},{"type":"code","lang":"xml","meta":null,"value":"Could not fetch manifest\n<?xml version='1.0' encoding='UTF-8'?>\n<Error>\n   <Code>AccessDenied</Code>\n   <Message>Access denied.</Message>\n   <Details>Anonymous caller does not have storage.objects.get access (...snipped...)</Details>\n</Error>","position":{"start":{"line":339,"column":1,"offset":15183},"end":{"line":347,"column":4,"offset":15436},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This can occur if the schema hasn't been published since the operation registry plugin was enabled. You can publish the schema using the ","position":{"start":{"line":349,"column":1,"offset":15438},"end":{"line":349,"column":138,"offset":15575},"indent":[]}},{"type":"inlineCode","value":"warthog service:push","position":{"start":{"line":349,"column":138,"offset":15575},"end":{"line":349,"column":160,"offset":15597},"indent":[]}},{"type":"text","value":" command. When receiving this message on a service which has already had its schema pushed, the ","position":{"start":{"line":349,"column":160,"offset":15597},"end":{"line":349,"column":256,"offset":15693},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":349,"column":256,"offset":15693},"end":{"line":349,"column":277,"offset":15714},"indent":[]}},{"type":"text","value":" command can be used. Check the above documentation for more information on how to use those commands.","position":{"start":{"line":349,"column":277,"offset":15714},"end":{"line":349,"column":379,"offset":15816},"indent":[]}}],"position":{"start":{"line":349,"column":1,"offset":15438},"end":{"line":349,"column":379,"offset":15816},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Operations aren't being forbidden or operations which should be permitted are not allowed","position":{"start":{"line":351,"column":6,"offset":15823},"end":{"line":351,"column":95,"offset":15912},"indent":[]}}],"position":{"start":{"line":351,"column":1,"offset":15818},"end":{"line":351,"column":95,"offset":15912},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The first step in debugging the operation registry behavior is to enable debugging. This can be done by enabling the ","position":{"start":{"line":353,"column":1,"offset":15914},"end":{"line":353,"column":118,"offset":16031},"indent":[]}},{"type":"inlineCode","value":"debug","position":{"start":{"line":353,"column":118,"offset":16031},"end":{"line":353,"column":125,"offset":16038},"indent":[]}},{"type":"text","value":" setting on the plugin within the Warthog Server constructor options:","position":{"start":{"line":353,"column":125,"offset":16038},"end":{"line":353,"column":194,"offset":16107},"indent":[]}}],"position":{"start":{"line":353,"column":1,"offset":15914},"end":{"line":353,"column":194,"offset":16107},"indent":[]}},{"type":"code","lang":"js","meta":null,"value":"const server = new ApolloServer({\n  typeDefs,\n  resolvers,\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      // ... other, existing options ...\n      debug: true, // highlight-line\n    });\n  ],\n});","position":{"start":{"line":355,"column":1,"offset":16109},"end":{"line":366,"column":4,"offset":16343},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When the server is started with debugging enabled, additional information will be displayed at server startup which can be useful in determining the source of the problem. For example:","position":{"start":{"line":368,"column":1,"offset":16345},"end":{"line":368,"column":185,"offset":16529},"indent":[]}}],"position":{"start":{"line":368,"column":1,"offset":16345},"end":{"line":368,"column":185,"offset":16529},"indent":[]}},{"type":"code","lang":null,"meta":null,"value":"Checking for manifest changes at https://...\n🚀 app running at http://localhost:4000/\nIncoming manifest ADDs: ba4573fca2e1491fd54b9f3984...\nIncoming manifest ADDs: 32a21510374c3c9ad25e064240...\nIncoming manifest ADDs: c60ac6dfe19ba70dd9d6a29a27...","position":{"start":{"line":370,"column":1,"offset":16531},"end":{"line":376,"column":4,"offset":16786},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"By clicking on the URL listed in the ","position":{"start":{"line":378,"column":1,"offset":16788},"end":{"line":378,"column":38,"offset":16825},"indent":[]}},{"type":"inlineCode","value":"Checking for manifest changes at","position":{"start":{"line":378,"column":38,"offset":16825},"end":{"line":378,"column":72,"offset":16859},"indent":[]}},{"type":"text","value":" message, it will be possible to see the full contents of the manifest and see the list of permitted operations. This information is not publicly available and this URL should not be shared.","position":{"start":{"line":378,"column":72,"offset":16859},"end":{"line":378,"column":262,"offset":17049},"indent":[]}}],"position":{"start":{"line":378,"column":1,"offset":16788},"end":{"line":378,"column":262,"offset":17049},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Schema registration","position":{"start":{"line":380,"column":6,"offset":17056},"end":{"line":380,"column":25,"offset":17075},"indent":[]}}],"position":{"start":{"line":380,"column":1,"offset":17051},"end":{"line":380,"column":25,"offset":17075},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If a problem occurs during the ","position":{"start":{"line":382,"column":1,"offset":17077},"end":{"line":382,"column":32,"offset":17108},"indent":[]}},{"type":"inlineCode","value":"warthog service:push","position":{"start":{"line":382,"column":32,"offset":17108},"end":{"line":382,"column":54,"offset":17130},"indent":[]}},{"type":"text","value":" command, make sure that the running Warthog Server can be accessed from the machine where the command is being executed.","position":{"start":{"line":382,"column":54,"offset":17130},"end":{"line":382,"column":175,"offset":17251},"indent":[]}}],"position":{"start":{"line":382,"column":1,"offset":17077},"end":{"line":382,"column":175,"offset":17251},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Additionally, make sure that introspection is enabled on the server since introspection details are used to obtain and publish the schema.","position":{"start":{"line":384,"column":1,"offset":17253},"end":{"line":384,"column":139,"offset":17391},"indent":[]}}],"position":{"start":{"line":384,"column":1,"offset":17253},"end":{"line":384,"column":139,"offset":17391},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"text","value":"Migrating from ","position":{"start":{"line":386,"column":4,"offset":17396},"end":{"line":386,"column":19,"offset":17411},"indent":[]}},{"type":"inlineCode","value":"0.1-alpha.4","position":{"start":{"line":386,"column":19,"offset":17411},"end":{"line":386,"column":32,"offset":17424},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":386,"column":32,"offset":17424},"end":{"line":386,"column":36,"offset":17428},"indent":[]}},{"type":"inlineCode","value":"0.2.0-alpha.1","position":{"start":{"line":386,"column":36,"offset":17428},"end":{"line":386,"column":51,"offset":17443},"indent":[]}}],"position":{"start":{"line":386,"column":1,"offset":17393},"end":{"line":386,"column":51,"offset":17443},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Summary of changes","position":{"start":{"line":388,"column":5,"offset":17449},"end":{"line":388,"column":23,"offset":17467},"indent":[]}}],"position":{"start":{"line":388,"column":1,"offset":17445},"end":{"line":388,"column":23,"offset":17467},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The new release operation registry improves observability and robustness. These changes include: a ","position":{"start":{"line":390,"column":1,"offset":17469},"end":{"line":390,"column":100,"offset":17568},"indent":[]}},{"type":"link","title":null,"url":"#manifest-storage-location","children":[{"type":"strong","children":[{"type":"text","value":"stable operation manifest location","position":{"start":{"line":390,"column":103,"offset":17571},"end":{"line":390,"column":137,"offset":17605},"indent":[]}}],"position":{"start":{"line":390,"column":101,"offset":17569},"end":{"line":390,"column":139,"offset":17607},"indent":[]}}],"position":{"start":{"line":390,"column":100,"offset":17568},"end":{"line":390,"column":168,"offset":17636},"indent":[]}},{"type":"text","value":" based on a schema variant/tag rather than schema hash, registry ","position":{"start":{"line":390,"column":168,"offset":17636},"end":{"line":390,"column":233,"offset":17701},"indent":[]}},{"type":"link","title":null,"url":"#metrics-and-usage-statistics","children":[{"type":"strong","children":[{"type":"text","value":"metrics in the UI","position":{"start":{"line":390,"column":236,"offset":17704},"end":{"line":390,"column":253,"offset":17721},"indent":[]}}],"position":{"start":{"line":390,"column":234,"offset":17702},"end":{"line":390,"column":255,"offset":17723},"indent":[]}}],"position":{"start":{"line":390,"column":233,"offset":17701},"end":{"line":390,"column":287,"offset":17755},"indent":[]}},{"type":"text","value":", warthog ","position":{"start":{"line":390,"column":287,"offset":17755},"end":{"line":390,"column":297,"offset":17765},"indent":[]}},{"type":"link","title":null,"url":"#operation-registration-observability","children":[{"type":"strong","children":[{"type":"text","value":"client:push diagnostics","position":{"start":{"line":390,"column":300,"offset":17768},"end":{"line":390,"column":323,"offset":17791},"indent":[]}}],"position":{"start":{"line":390,"column":298,"offset":17766},"end":{"line":390,"column":325,"offset":17793},"indent":[]}}],"position":{"start":{"line":390,"column":297,"offset":17765},"end":{"line":390,"column":365,"offset":17833},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":390,"column":365,"offset":17833},"end":{"line":390,"column":371,"offset":17839},"indent":[]}},{"type":"link","title":null,"url":"#varianttag-awareness","children":[{"type":"strong","children":[{"type":"text","value":"variant/tag awareness","position":{"start":{"line":390,"column":374,"offset":17842},"end":{"line":390,"column":395,"offset":17863},"indent":[]}}],"position":{"start":{"line":390,"column":372,"offset":17840},"end":{"line":390,"column":397,"offset":17865},"indent":[]}}],"position":{"start":{"line":390,"column":371,"offset":17839},"end":{"line":390,"column":421,"offset":17889},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":390,"column":421,"offset":17889},"end":{"line":390,"column":422,"offset":17890},"indent":[]}}],"position":{"start":{"line":390,"column":1,"offset":17469},"end":{"line":390,"column":422,"offset":17890},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"These updates are designed to be transparent with a ","position":{"start":{"line":392,"column":1,"offset":17892},"end":{"line":392,"column":53,"offset":17944},"indent":[]}},{"type":"link","title":null,"url":"#upgrade-path","children":[{"type":"text","value":"smooth upgrade path","position":{"start":{"line":392,"column":54,"offset":17945},"end":{"line":392,"column":73,"offset":17964},"indent":[]}}],"position":{"start":{"line":392,"column":53,"offset":17944},"end":{"line":392,"column":89,"offset":17980},"indent":[]}},{"type":"text","value":". Since the operation manifest location has changed, all versions of ","position":{"start":{"line":392,"column":89,"offset":17980},"end":{"line":392,"column":158,"offset":18049},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":392,"column":158,"offset":18049},"end":{"line":392,"column":179,"offset":18070},"indent":[]}},{"type":"text","value":" double-write to the new and old storage locations, enabling seamless upgrade. Additionally the server's registry plugin can be upgraded immediately, because the plugin reads from the new location and uses the old location as a fallback, meaning the safelist will always be populated.","position":{"start":{"line":392,"column":179,"offset":18070},"end":{"line":392,"column":463,"offset":18354},"indent":[]}}],"position":{"start":{"line":392,"column":1,"offset":17892},"end":{"line":392,"column":463,"offset":18354},"indent":[]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note: upgrading the warthog cli to ","position":{"start":{"line":394,"column":3,"offset":18358},"end":{"line":394,"column":38,"offset":18393},"indent":[]}},{"type":"inlineCode","value":">2.13","position":{"start":{"line":394,"column":38,"offset":18393},"end":{"line":394,"column":45,"offset":18400},"indent":[]}},{"type":"text","value":" requires some extra caution if a variant/tag is defined in the ","position":{"start":{"line":394,"column":45,"offset":18400},"end":{"line":394,"column":109,"offset":18464},"indent":[]}},{"type":"inlineCode","value":"warthog.config.js","position":{"start":{"line":394,"column":109,"offset":18464},"end":{"line":394,"column":128,"offset":18483},"indent":[]}},{"type":"text","value":" in order to ","position":{"start":{"line":394,"column":128,"offset":18483},"end":{"line":394,"column":141,"offset":18496},"indent":[]}},{"type":"link","title":null,"url":"#target-variantstags-other-than-currentdefault-no-varianttag","children":[{"type":"text","value":"ensure the proper variant/tag during ","position":{"start":{"line":394,"column":142,"offset":18497},"end":{"line":394,"column":179,"offset":18534},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":394,"column":179,"offset":18534},"end":{"line":394,"column":200,"offset":18555},"indent":[]}}],"position":{"start":{"line":394,"column":141,"offset":18496},"end":{"line":394,"column":263,"offset":18618},"indent":[]}},{"type":"text","value":". The changes are completely backwards compatible when using the Warthog platform without variants/tags.","position":{"start":{"line":394,"column":263,"offset":18618},"end":{"line":394,"column":367,"offset":18722},"indent":[]}}],"position":{"start":{"line":394,"column":3,"offset":18358},"end":{"line":394,"column":367,"offset":18722},"indent":[]}}],"position":{"start":{"line":394,"column":1,"offset":18356},"end":{"line":394,"column":367,"offset":18722},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Upgrade path","position":{"start":{"line":396,"column":5,"offset":18728},"end":{"line":396,"column":17,"offset":18740},"indent":[]}}],"position":{"start":{"line":396,"column":1,"offset":18724},"end":{"line":396,"column":17,"offset":18740},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"While this upgrade does not require additional work, we recommend running\nthe new plugin with ","position":{"start":{"line":398,"column":1,"offset":18742},"end":{"line":399,"column":21,"offset":18836},"indent":[1]}},{"type":"inlineCode","value":"dryRun","position":{"start":{"line":399,"column":21,"offset":18836},"end":{"line":399,"column":29,"offset":18844},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":399,"column":29,"offset":18844},"end":{"line":399,"column":34,"offset":18849},"indent":[]}},{"type":"inlineCode","value":"debug","position":{"start":{"line":399,"column":34,"offset":18849},"end":{"line":399,"column":41,"offset":18856},"indent":[]}},{"type":"text","value":" enabled before enforcing the safelist. To report metrics and use the new storage location, upgrade:","position":{"start":{"line":399,"column":41,"offset":18856},"end":{"line":399,"column":141,"offset":18956},"indent":[]}}],"position":{"start":{"line":398,"column":1,"offset":18742},"end":{"line":399,"column":141,"offset":18956},"indent":[1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"warthog-server","position":{"start":{"line":401,"column":3,"offset":18960},"end":{"line":401,"column":19,"offset":18976},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":401,"column":19,"offset":18976},"end":{"line":401,"column":23,"offset":18980},"indent":[]}},{"type":"inlineCode","value":"warthog-server-<variant>","position":{"start":{"line":401,"column":23,"offset":18980},"end":{"line":401,"column":49,"offset":19006},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":401,"column":49,"offset":19006},"end":{"line":401,"column":53,"offset":19010},"indent":[]}},{"type":"inlineCode","value":">2.6.3","position":{"start":{"line":401,"column":53,"offset":19010},"end":{"line":401,"column":61,"offset":19018},"indent":[]}}],"position":{"start":{"line":401,"column":3,"offset":18960},"end":{"line":401,"column":61,"offset":19018},"indent":[]}}],"position":{"start":{"line":401,"column":1,"offset":18958},"end":{"line":401,"column":61,"offset":19018},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"inlineCode","value":"warthog-server-plugin-operation-registry","position":{"start":{"line":402,"column":3,"offset":19021},"end":{"line":402,"column":45,"offset":19063},"indent":[]}},{"type":"text","value":" to ","position":{"start":{"line":402,"column":45,"offset":19063},"end":{"line":402,"column":49,"offset":19067},"indent":[]}},{"type":"inlineCode","value":"0.2.0-alpha.1","position":{"start":{"line":402,"column":49,"offset":19067},"end":{"line":402,"column":64,"offset":19082},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":402,"column":64,"offset":19082},"end":{"line":402,"column":65,"offset":19083},"indent":[]}}],"position":{"start":{"line":402,"column":3,"offset":19021},"end":{"line":402,"column":65,"offset":19083},"indent":[]}}],"position":{"start":{"line":402,"column":1,"offset":19019},"end":{"line":402,"column":65,"offset":19083},"indent":[]}}],"position":{"start":{"line":401,"column":1,"offset":18958},"end":{"line":402,"column":65,"offset":19083},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"In one line, run:","position":{"start":{"line":404,"column":1,"offset":19085},"end":{"line":404,"column":18,"offset":19102},"indent":[]}}],"position":{"start":{"line":404,"column":1,"offset":19085},"end":{"line":404,"column":18,"offset":19102},"indent":[]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"npm install warthog-server warthog-server-plugin-operation-registry","position":{"start":{"line":406,"column":1,"offset":19104},"end":{"line":406,"column":70,"offset":19173},"indent":[]}}],"position":{"start":{"line":406,"column":1,"offset":19104},"end":{"line":406,"column":70,"offset":19173},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If operations have not been registered since June 6th, 2019, the plugin will\nfallback on the old location. With ","position":{"start":{"line":408,"column":1,"offset":19175},"end":{"line":409,"column":36,"offset":19287},"indent":[1]}},{"type":"inlineCode","value":"debug","position":{"start":{"line":409,"column":36,"offset":19287},"end":{"line":409,"column":43,"offset":19294},"indent":[]}},{"type":"text","value":" enabled, the plugin will log which\nmanifest is used and the operations added.","position":{"start":{"line":409,"column":43,"offset":19294},"end":{"line":410,"column":43,"offset":19372},"indent":[1]}}],"position":{"start":{"line":408,"column":1,"offset":19175},"end":{"line":410,"column":43,"offset":19372},"indent":[1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Target variants/tags other than ","position":{"start":{"line":412,"column":6,"offset":19379},"end":{"line":412,"column":38,"offset":19411},"indent":[]}},{"type":"inlineCode","value":"current","position":{"start":{"line":412,"column":38,"offset":19411},"end":{"line":412,"column":47,"offset":19420},"indent":[]}},{"type":"text","value":"(default, no variant/tag)","position":{"start":{"line":412,"column":47,"offset":19420},"end":{"line":412,"column":72,"offset":19445},"indent":[]}}],"position":{"start":{"line":412,"column":1,"offset":19374},"end":{"line":412,"column":72,"offset":19445},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Operations are now registered against a variant/tag and retrieved from the\nmanifest specific to a variant/tag. This does not change the default behavior\nof the Warthog platform, which universally uses the variant/tag ","position":{"start":{"line":414,"column":1,"offset":19447},"end":{"line":416,"column":65,"offset":19664},"indent":[1,1]}},{"type":"inlineCode","value":"current","position":{"start":{"line":416,"column":65,"offset":19664},"end":{"line":416,"column":74,"offset":19673},"indent":[]}},{"type":"text","value":" when\nunspecified. Variants/tags represent different environments, such as\n","position":{"start":{"line":416,"column":74,"offset":19673},"end":{"line":418,"column":1,"offset":19748},"indent":[1,1]}},{"type":"inlineCode","value":"staging","position":{"start":{"line":418,"column":1,"offset":19748},"end":{"line":418,"column":10,"offset":19757},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":418,"column":10,"offset":19757},"end":{"line":418,"column":12,"offset":19759},"indent":[]}},{"type":"inlineCode","value":"test","position":{"start":{"line":418,"column":12,"offset":19759},"end":{"line":418,"column":18,"offset":19765},"indent":[]}},{"type":"text","value":" or ","position":{"start":{"line":418,"column":18,"offset":19765},"end":{"line":418,"column":22,"offset":19769},"indent":[]}},{"type":"inlineCode","value":"prod","position":{"start":{"line":418,"column":22,"offset":19769},"end":{"line":418,"column":28,"offset":19775},"indent":[]}},{"type":"text","value":", so they do not share data. This means that\noperations must be re-registered when using or transitioning to a new\nvariant/tag.","position":{"start":{"line":418,"column":28,"offset":19775},"end":{"line":420,"column":13,"offset":19902},"indent":[1,1]}}],"position":{"start":{"line":414,"column":1,"offset":19447},"end":{"line":420,"column":13,"offset":19902},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"When a variant/tag is set in ","position":{"start":{"line":422,"column":1,"offset":19904},"end":{"line":422,"column":30,"offset":19933},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":422,"column":30,"offset":19933},"end":{"line":422,"column":51,"offset":19954},"indent":[]}},{"type":"text","value":", the operation\nwill be validated against the latest schema published under that variant/tag\nand placed in that variant/tag's manifest. To register operations under a\nspecific variant/tag, follow these steps:","position":{"start":{"line":422,"column":51,"offset":19954},"end":{"line":425,"column":42,"offset":20162},"indent":[1,1,1]}}],"position":{"start":{"line":422,"column":1,"offset":19904},"end":{"line":425,"column":42,"offset":20162},"indent":[1,1,1]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"client","position":{"start":{"line":427,"column":5,"offset":20168},"end":{"line":427,"column":11,"offset":20174},"indent":[]}}],"position":{"start":{"line":427,"column":3,"offset":20166},"end":{"line":427,"column":13,"offset":20176},"indent":[]}},{"type":"text","value":": Upgrade the ","position":{"start":{"line":427,"column":13,"offset":20176},"end":{"line":427,"column":27,"offset":20190},"indent":[]}},{"type":"inlineCode","value":"warthog","position":{"start":{"line":427,"column":27,"offset":20190},"end":{"line":427,"column":36,"offset":20199},"indent":[]}},{"type":"text","value":" CLI package to 2.13.0 (by default the variant/tag will be set to the value in the ","position":{"start":{"line":427,"column":36,"offset":20199},"end":{"line":427,"column":119,"offset":20282},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/references/warthog-config/#option-1-use-the-warthog-schema-registry","children":[{"type":"text","value":"warthog config","position":{"start":{"line":427,"column":120,"offset":20283},"end":{"line":427,"column":134,"offset":20297},"indent":[]}}],"position":{"start":{"line":427,"column":119,"offset":20282},"end":{"line":427,"column":233,"offset":20396},"indent":[]}},{"type":"text","value":")","position":{"start":{"line":427,"column":233,"offset":20396},"end":{"line":427,"column":234,"offset":20397},"indent":[]}}],"position":{"start":{"line":427,"column":3,"offset":20166},"end":{"line":427,"column":234,"offset":20397},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":20164},"end":{"line":427,"column":234,"offset":20397},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"server","position":{"start":{"line":428,"column":5,"offset":20402},"end":{"line":428,"column":11,"offset":20408},"indent":[]}}],"position":{"start":{"line":428,"column":3,"offset":20400},"end":{"line":428,"column":13,"offset":20410},"indent":[]}},{"type":"text","value":": Ensure that a schema has been published to the specified graph variant/tag.\nThis can be done by running ","position":{"start":{"line":428,"column":13,"offset":20410},"end":{"line":429,"column":31,"offset":20518},"indent":[3]}},{"type":"inlineCode","value":"warthog service:push --tag <TAG>","position":{"start":{"line":429,"column":31,"offset":20518},"end":{"line":429,"column":65,"offset":20552},"indent":[]}}],"position":{"start":{"line":428,"column":3,"offset":20400},"end":{"line":429,"column":65,"offset":20552},"indent":[3]}}],"position":{"start":{"line":428,"column":1,"offset":20398},"end":{"line":429,"column":65,"offset":20552},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"client","position":{"start":{"line":430,"column":5,"offset":20557},"end":{"line":430,"column":11,"offset":20563},"indent":[]}}],"position":{"start":{"line":430,"column":3,"offset":20555},"end":{"line":430,"column":13,"offset":20565},"indent":[]}},{"type":"text","value":": Ensure that operations have been registered to the specified graph variant/tag.\nThis can be done by running ","position":{"start":{"line":430,"column":13,"offset":20565},"end":{"line":431,"column":31,"offset":20677},"indent":[3]}},{"type":"inlineCode","value":"warthog client:push --tag <TAG>","position":{"start":{"line":431,"column":31,"offset":20677},"end":{"line":431,"column":64,"offset":20710},"indent":[]}},{"type":"text","value":" or modifying the service in the ","position":{"start":{"line":431,"column":64,"offset":20710},"end":{"line":431,"column":97,"offset":20743},"indent":[]}},{"type":"inlineCode","value":"warthog.config.js","position":{"start":{"line":431,"column":97,"offset":20743},"end":{"line":431,"column":116,"offset":20762},"indent":[]}}],"position":{"start":{"line":430,"column":3,"offset":20555},"end":{"line":431,"column":116,"offset":20762},"indent":[3]}}],"position":{"start":{"line":430,"column":1,"offset":20553},"end":{"line":431,"column":116,"offset":20762},"indent":[1]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"strong","children":[{"type":"text","value":"server","position":{"start":{"line":432,"column":5,"offset":20767},"end":{"line":432,"column":11,"offset":20773},"indent":[]}}],"position":{"start":{"line":432,"column":3,"offset":20765},"end":{"line":432,"column":13,"offset":20775},"indent":[]}},{"type":"text","value":": Set the ","position":{"start":{"line":432,"column":13,"offset":20775},"end":{"line":432,"column":23,"offset":20785},"indent":[]}},{"type":"inlineCode","value":"schemaTag","position":{"start":{"line":432,"column":23,"offset":20785},"end":{"line":432,"column":34,"offset":20796},"indent":[]}},{"type":"text","value":" field of ","position":{"start":{"line":432,"column":34,"offset":20796},"end":{"line":432,"column":44,"offset":20806},"indent":[]}},{"type":"inlineCode","value":"warthog-server-plugin-operation-registry","position":{"start":{"line":432,"column":44,"offset":20806},"end":{"line":432,"column":86,"offset":20848},"indent":[]}},{"type":"text","value":" to the targeted graph variant/tag","position":{"start":{"line":432,"column":86,"offset":20848},"end":{"line":432,"column":120,"offset":20882},"indent":[]}}],"position":{"start":{"line":432,"column":3,"offset":20765},"end":{"line":432,"column":120,"offset":20882},"indent":[]}}],"position":{"start":{"line":432,"column":1,"offset":20763},"end":{"line":432,"column":120,"offset":20882},"indent":[]}}],"position":{"start":{"line":427,"column":1,"offset":20164},"end":{"line":432,"column":120,"offset":20882},"indent":[1,1,1,1,1]}},{"type":"code","lang":"js","meta":null,"value":"const server = new ApolloServer({\n  plugins: [\n    require(\"warthog-server-plugin-operation-registry\")({\n      schemaTag: \"prod\", // highlight-line\n\n      // suggested before enforcing the safelist\n      debug: true,\n      dryRun: true\n    })\n  ]\n});","position":{"start":{"line":434,"column":1,"offset":20884},"end":{"line":446,"column":4,"offset":21144},"indent":[1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"We know it can be challenging to communicate with all consumers of your\ndata > graph to publish their operations to a new variant/tag. Reach out to\nthe Warthog team > if you want to move to a variant/tag-based registry, and\nwe'll be happy to migrate > all operations registered to the current\nvariant/tag to the variant/tag of your choosing to > make that process\neasier.","position":{"start":{"line":448,"column":3,"offset":21148},"end":{"line":453,"column":10,"offset":21529},"indent":[3,3,3,3,3]}}],"position":{"start":{"line":448,"column":3,"offset":21148},"end":{"line":453,"column":10,"offset":21529},"indent":[3,3,3,3,3]}}],"position":{"start":{"line":448,"column":1,"offset":21146},"end":{"line":453,"column":10,"offset":21529},"indent":[1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"text","value":"Change details","position":{"start":{"line":455,"column":5,"offset":21535},"end":{"line":455,"column":19,"offset":21549},"indent":[]}}],"position":{"start":{"line":455,"column":1,"offset":21531},"end":{"line":455,"column":19,"offset":21549},"indent":[]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Manifest storage location","position":{"start":{"line":457,"column":6,"offset":21556},"end":{"line":457,"column":31,"offset":21581},"indent":[]}}],"position":{"start":{"line":457,"column":1,"offset":21551},"end":{"line":457,"column":31,"offset":21581},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the previous version of the operation registry, the operation manifest was\nsecured by the schema hash, which provided the shared secret between the\nWarthog cloud and warthog-server. The side-effect of this model was coupling\noperation registration and schema uploads, since a manifest needed to be\ncreated for each schema publish with a new hash. Concretely the GCS url was:","position":{"start":{"line":459,"column":1,"offset":21583},"end":{"line":463,"column":77,"offset":21960},"indent":[1,1,1,1]}}],"position":{"start":{"line":459,"column":1,"offset":21583},"end":{"line":463,"column":77,"offset":21960},"indent":[1,1,1,1]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"/(hash of service id)/(schema hash)/manifest.json","position":{"start":{"line":465,"column":1,"offset":21962},"end":{"line":465,"column":52,"offset":22013},"indent":[]}}],"position":{"start":{"line":465,"column":1,"offset":21962},"end":{"line":465,"column":52,"offset":22013},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The new model removes this coupling by using the Warthog api key as the shared\nsecret. In order to enable independent secret rotation, the api key is used\nto reference a storage secret that then references the manifests","position":{"start":{"line":467,"column":1,"offset":22015},"end":{"line":469,"column":65,"offset":22234},"indent":[1,1]}}],"position":{"start":{"line":467,"column":1,"offset":22015},"end":{"line":469,"column":65,"offset":22234},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"inlineCode","value":"/(service id)/storage-secret/(hash of api key).json","position":{"start":{"line":471,"column":1,"offset":22236},"end":{"line":471,"column":54,"offset":22289},"indent":[]}},{"type":"text","value":" ","position":{"start":{"line":471,"column":54,"offset":22289},"end":{"line":471,"column":55,"offset":22290},"indent":[]}},{"type":"jsx","value":"<br/>","position":{"start":{"line":471,"column":55,"offset":22290},"end":{"line":471,"column":60,"offset":22295},"indent":[]}},{"type":"text","value":"\n","position":{"start":{"line":471,"column":60,"offset":22295},"end":{"line":472,"column":1,"offset":22296},"indent":[1]}},{"type":"inlineCode","value":"/(service id)/(storage secret)/(tag)/manifest.v2.json","position":{"start":{"line":472,"column":1,"offset":22296},"end":{"line":472,"column":56,"offset":22351},"indent":[]}}],"position":{"start":{"line":471,"column":1,"offset":22236},"end":{"line":472,"column":56,"offset":22351},"indent":[1]}},{"type":"paragraph","children":[{"type":"text","value":"These changes should be transparent, since the new version of the operation\nregistry plugin, ","position":{"start":{"line":474,"column":1,"offset":22353},"end":{"line":475,"column":18,"offset":22446},"indent":[1]}},{"type":"inlineCode","value":"0.2.0-alpha.1","position":{"start":{"line":475,"column":18,"offset":22446},"end":{"line":475,"column":33,"offset":22461},"indent":[]}},{"type":"text","value":", will attempt to use the new scheme and then\nfallback on the old.All warthog cli versions write to the new and old manifest\nlocations without additional configuration.","position":{"start":{"line":475,"column":33,"offset":22461},"end":{"line":477,"column":44,"offset":22629},"indent":[1,1]}}],"position":{"start":{"line":474,"column":1,"offset":22353},"end":{"line":477,"column":44,"offset":22629},"indent":[1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Be aware that the the variant/tag specific manifest will\nonly be created after a ","position":{"start":{"line":479,"column":1,"offset":22631},"end":{"line":480,"column":25,"offset":22712},"indent":[1]}},{"type":"inlineCode","value":"client:push","position":{"start":{"line":480,"column":25,"offset":22712},"end":{"line":480,"column":38,"offset":22725},"indent":[]}},{"type":"text","value":", so the plugin may fallback on the old\nmanifest, which contains the operations for ","position":{"start":{"line":480,"column":38,"offset":22725},"end":{"line":481,"column":45,"offset":22809},"indent":[1]}},{"type":"inlineCode","value":"current","position":{"start":{"line":481,"column":45,"offset":22809},"end":{"line":481,"column":54,"offset":22818},"indent":[]}},{"type":"text","value":", when ","position":{"start":{"line":481,"column":54,"offset":22818},"end":{"line":481,"column":61,"offset":22825},"indent":[]}},{"type":"inlineCode","value":"schemaTag","position":{"start":{"line":481,"column":61,"offset":22825},"end":{"line":481,"column":72,"offset":22836},"indent":[]}},{"type":"text","value":" is\nspecified in the operation registry plugin.","position":{"start":{"line":481,"column":72,"offset":22836},"end":{"line":482,"column":44,"offset":22883},"indent":[1]}}],"position":{"start":{"line":479,"column":1,"offset":22631},"end":{"line":482,"column":44,"offset":22883},"indent":[1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Operation registration observability","position":{"start":{"line":484,"column":6,"offset":22890},"end":{"line":484,"column":42,"offset":22926},"indent":[]}}],"position":{"start":{"line":484,"column":1,"offset":22885},"end":{"line":484,"column":42,"offset":22926},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"To improve the client side registration, ","position":{"start":{"line":486,"column":1,"offset":22928},"end":{"line":486,"column":42,"offset":22969},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":486,"column":42,"offset":22969},"end":{"line":486,"column":63,"offset":22990},"indent":[]}},{"type":"text","value":" now includes\nthe file name and location for operations added and connects the error\nmessage with the operation that fails.","position":{"start":{"line":486,"column":63,"offset":22990},"end":{"line":488,"column":39,"offset":23113},"indent":[1,1]}}],"position":{"start":{"line":486,"column":1,"offset":22928},"end":{"line":488,"column":39,"offset":23113},"indent":[1,1]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Success","position":{"start":{"line":490,"column":7,"offset":23121},"end":{"line":490,"column":14,"offset":23128},"indent":[]}}],"position":{"start":{"line":490,"column":1,"offset":23115},"end":{"line":490,"column":14,"offset":23128},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A successful registration will show the operations that are newly registered:","position":{"start":{"line":492,"column":1,"offset":23130},"end":{"line":492,"column":78,"offset":23207},"indent":[]}}],"position":{"start":{"line":492,"column":1,"offset":23130},"end":{"line":492,"column":78,"offset":23207},"indent":[]}},{"type":"jsx","value":"<img\n  src=\"../img/operation-registry/client-push-success.png\"\n  width=\"80%\"\n  style=\"margin: 5%\"\n  alt=\"warthog client:push successful push\"\n/>","position":{"start":{"line":494,"column":1,"offset":23209},"end":{"line":499,"column":3,"offset":23353},"indent":[1,1,1,1,1]}},{"type":"blockquote","children":[{"type":"paragraph","children":[{"type":"text","value":"Note: If all operations have already been registered, then ","position":{"start":{"line":501,"column":3,"offset":23357},"end":{"line":501,"column":62,"offset":23416},"indent":[]}},{"type":"inlineCode","value":"warthog client:push","position":{"start":{"line":501,"column":62,"offset":23416},"end":{"line":501,"column":83,"offset":23437},"indent":[]}},{"type":"text","value":" will explain that all operations are registered and not print any specific details","position":{"start":{"line":501,"column":83,"offset":23437},"end":{"line":501,"column":166,"offset":23520},"indent":[]}}],"position":{"start":{"line":501,"column":3,"offset":23357},"end":{"line":501,"column":166,"offset":23520},"indent":[]}}],"position":{"start":{"line":501,"column":1,"offset":23355},"end":{"line":501,"column":166,"offset":23520},"indent":[]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Validation errors","position":{"start":{"line":503,"column":7,"offset":23528},"end":{"line":503,"column":24,"offset":23545},"indent":[]}}],"position":{"start":{"line":503,"column":1,"offset":23522},"end":{"line":503,"column":24,"offset":23545},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"A failed registration will include the validation failure next to the operation:","position":{"start":{"line":505,"column":1,"offset":23547},"end":{"line":505,"column":81,"offset":23627},"indent":[]}}],"position":{"start":{"line":505,"column":1,"offset":23547},"end":{"line":505,"column":81,"offset":23627},"indent":[]}},{"type":"jsx","value":"<img\n  src=\"../img/operation-registry/client-push-failure.png\"\n  width=\"80%\"\n  style=\"margin: 5%\"\n  alt=\"warthog client:push failure\"\n/>","position":{"start":{"line":507,"column":1,"offset":23629},"end":{"line":512,"column":3,"offset":23765},"indent":[1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Metrics and usage statistics","position":{"start":{"line":514,"column":6,"offset":23772},"end":{"line":514,"column":34,"offset":23800},"indent":[]}}],"position":{"start":{"line":514,"column":1,"offset":23767},"end":{"line":514,"column":34,"offset":23800},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The new registry plugin will report usage metrics to Warthog, which are\ndisplayed in the client details in the clients tab and operation filter in\nthe metric tab","position":{"start":{"line":516,"column":1,"offset":23802},"end":{"line":518,"column":15,"offset":23963},"indent":[1,1]}}],"position":{"start":{"line":516,"column":1,"offset":23802},"end":{"line":518,"column":15,"offset":23963},"indent":[1,1]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Clients page","position":{"start":{"line":520,"column":7,"offset":23971},"end":{"line":520,"column":19,"offset":23983},"indent":[]}}],"position":{"start":{"line":520,"column":1,"offset":23965},"end":{"line":520,"column":19,"offset":23983},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The clients page will show the unregistered operation reported by client","position":{"start":{"line":522,"column":1,"offset":23985},"end":{"line":522,"column":73,"offset":24057},"indent":[]}}],"position":{"start":{"line":522,"column":1,"offset":23985},"end":{"line":522,"column":73,"offset":24057},"indent":[]}},{"type":"jsx","value":"<img\n  src=\"../img/operation-registry/clients-page.png\"\n  width=\"80%\"\n  style=\"margin: 5%\"\n  alt=\"The clients page showing unregistered operations\"\n/>","position":{"start":{"line":524,"column":1,"offset":24059},"end":{"line":529,"column":3,"offset":24209},"indent":[1,1,1,1,1]}},{"type":"heading","depth":5,"children":[{"type":"text","value":"Metrics page","position":{"start":{"line":531,"column":7,"offset":24217},"end":{"line":531,"column":19,"offset":24229},"indent":[]}}],"position":{"start":{"line":531,"column":1,"offset":24211},"end":{"line":531,"column":19,"offset":24229},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"The filter on the metrics page will provide the option to show unregistered operations only","position":{"start":{"line":533,"column":1,"offset":24231},"end":{"line":533,"column":92,"offset":24322},"indent":[]}}],"position":{"start":{"line":533,"column":1,"offset":24231},"end":{"line":533,"column":92,"offset":24322},"indent":[]}},{"type":"jsx","value":"<img\n  src=\"../img/operation-registry/metrics-filter.png\"\n  width=\"50%\"\n  style=\"margin: 5%\"\n  alt=\"The metrics filter showing the option to select unregistered operations\"\n/>","position":{"start":{"line":535,"column":1,"offset":24324},"end":{"line":540,"column":3,"offset":24499},"indent":[1,1,1,1,1]}},{"type":"heading","depth":4,"children":[{"type":"text","value":"Variant/tag awareness","position":{"start":{"line":542,"column":6,"offset":24506},"end":{"line":542,"column":27,"offset":24527},"indent":[]}}],"position":{"start":{"line":542,"column":1,"offset":24501},"end":{"line":542,"column":27,"offset":24527},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Operations are now registered against a variant/tag and retrieved from the\nmanifest specific to a variant/tag. When a variant/tag is set, the operation\nwill be validated against the latest schema published under that variant/tag\nand placed in that variant/tag's manifest. This variant/tag specific manifest\ncan be consumed by the operation registry plugin by setting the ","position":{"start":{"line":544,"column":1,"offset":24529},"end":{"line":548,"column":65,"offset":24900},"indent":[1,1,1,1]}},{"type":"inlineCode","value":"schemaTag","position":{"start":{"line":548,"column":65,"offset":24900},"end":{"line":548,"column":76,"offset":24911},"indent":[]}},{"type":"text","value":"\noption.","position":{"start":{"line":548,"column":76,"offset":24911},"end":{"line":549,"column":8,"offset":24919},"indent":[1]}}],"position":{"start":{"line":544,"column":1,"offset":24529},"end":{"line":549,"column":8,"offset":24919},"indent":[1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Since the operation registry double-writes operations and has a fallback\nmechanism for transparent upgrades on ","position":{"start":{"line":551,"column":1,"offset":24921},"end":{"line":552,"column":39,"offset":25032},"indent":[1]}},{"type":"inlineCode","value":"current","position":{"start":{"line":552,"column":39,"offset":25032},"end":{"line":552,"column":48,"offset":25041},"indent":[]}},{"type":"text","value":", be sure to follow\n","position":{"start":{"line":552,"column":48,"offset":25041},"end":{"line":553,"column":1,"offset":25061},"indent":[1]}},{"type":"link","title":null,"url":"#target-variantstags-other-than-currentdefault-no-varianttag","children":[{"type":"text","value":"these steps","position":{"start":{"line":553,"column":2,"offset":25062},"end":{"line":553,"column":13,"offset":25073},"indent":[]}}],"position":{"start":{"line":553,"column":1,"offset":25061},"end":{"line":553,"column":76,"offset":25136},"indent":[]}},{"type":"text","value":"\nand run the operation registry plugin with ","position":{"start":{"line":553,"column":76,"offset":25136},"end":{"line":554,"column":44,"offset":25180},"indent":[1]}},{"type":"inlineCode","value":"debug","position":{"start":{"line":554,"column":44,"offset":25180},"end":{"line":554,"column":51,"offset":25187},"indent":[]}},{"type":"text","value":" enabled.","position":{"start":{"line":554,"column":51,"offset":25187},"end":{"line":554,"column":60,"offset":25196},"indent":[]}}],"position":{"start":{"line":551,"column":1,"offset":24921},"end":{"line":554,"column":60,"offset":25196},"indent":[1,1,1]}},{"type":"export","value":"export const _frontmatter = {\"title\":\"Securing your graph\",\"description\":\"How to secure your graph by enforcing a safelist of registered operations\"}","position":{"start":{"line":557,"column":1,"offset":25199},"end":{"line":557,"column":150,"offset":25348},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":557,"column":150,"offset":25348}}},"scopeImports":["import { ExpansionPanel } from \"gatsby-theme-apollo-docs\";","import React from 'react'"],"scopeIdentifiers":["ExpansionPanel","React"],"body":"function _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\n/* @jsx mdx */\nvar _frontmatter = {\n  \"title\": \"Securing your graph\",\n  \"description\": \"How to secure your graph by enforcing a safelist of registered operations\"\n};\n\nvar makeShortcode = function makeShortcode(name) {\n  return function MDXDefaultShortcode(props) {\n    console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\");\n    return mdx(\"div\", props);\n  };\n};\n\nvar layoutProps = {\n  _frontmatter: _frontmatter\n};\nvar MDXLayout = \"wrapper\";\nreturn function MDXContent(_ref) {\n  var components = _ref.components,\n      props = _objectWithoutProperties(_ref, [\"components\"]);\n\n  return mdx(MDXLayout, _extends({}, layoutProps, props, {\n    components: components,\n    mdxType: \"MDXLayout\"\n  }), mdx(\"h2\", {\n    \"id\": \"overview\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#overview\",\n    \"aria-label\": \"overview permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Overview\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" Operation safelisting is an Warthog Platform feature that is only available to subscribers of the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.warthog.dev/plans/\"\n  }), mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Apollo Team\"), \" and \", mdx(\"em\", {\n    parentName: \"a\"\n  }, \"Enterprise\"), \" plans\"), \". Visit \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/intro/platform.html\"\n  }), \"this guide\"), \" to learn more about the Warthog Platform.\")), mdx(\"p\", null, \"Any API requires security and confidence prior to going to production. During development, GraphQL offers front-end engineers the ability to explore all the data available to them and fetch exactly what they need for the components they're building. However, in production, it can be unnecessary and undesirable to provide this flexibility.\"), mdx(\"p\", null, \"The Warthog Platform comes with an \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"operation registry\"), \" and \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"safelisting\"), \" mechanism built into it, which allows organizations to:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Provide demand control for their production GraphQL APIs.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Permit the exact operations necessary for their client applications.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Eliminate the risk of unexpected, and possibly costly, operations being executed against their graph.\")), mdx(\"p\", null, \"Operations defined within client applications can be extracted and uploaded to Warthog Engine using the Warthog CLI. Warthog Server then fetches a manifest of these operations from Warthog Engine and forbids the execution of any operations that were not in that manifest.\"), mdx(\"h3\", {\n    \"id\": \"prerequisites\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#prerequisites\",\n    \"aria-label\": \"prerequisites permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Prerequisites\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/warthog-server/\"\n  }), \"Warthog Server 2.2.x\"), \" (or newer).\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To get started with Warthog Server, visit \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/warthog-server/\"\n  }), \"its documentation\"), \".\"))), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"A client application which utilizes \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"gql\"), \" tagged template literals for its operations or, alternatively, stores operations in \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \".graphql\"), \" files.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"An Warthog Engine API key.\", mdx(\"ul\", {\n    parentName: \"li\"\n  }, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"To obtain an API key, visit \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://engine.warthog.dev\"\n  }), \"Warthog Engine\"), \" and create a service. You will need and Engine account with a Team or Enterprise subscription to be able to upload to the operation registry.\")))), mdx(\"h3\", {\n    \"id\": \"limitations\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#limitations\",\n    \"aria-label\": \"limitations permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Limitations\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Subscriptions within Warthog Server should be disabled. For more information, see the instructions below.\")), mdx(\"p\", null, \"Please \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.warthog.dev/contact-sales/\"\n  }), \"contact the Warthog sales team\"), \" if you require a solution to any of these limitations.\"), mdx(\"h2\", {\n    \"id\": \"installation-steps\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#installation-steps\",\n    \"aria-label\": \"installation steps permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Installation steps\"), mdx(\"p\", null, \"Setting up operation registration and safelisting is a full-stack process, so you will need to have access to the client code containing the operations you want to register, and to the server within which you want to enforce the safelist.\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"The \", mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Warthog CLI\"), \" is used to search the client codebase for GraphQL operations and upload them to Warthog Engine.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"Warthog Server\"), \" is then configured with a plugin which fetches the manifest from Warthog Engine and enforces safelisting using that manifest.\")), mdx(\"p\", null, \"The following steps will walk through the steps necessary for both the client and server codebases.\"), mdx(\"ol\", null, mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#1-install-the-warthog-command-line-tool\"\n  }), \"Install the Warthog CLI\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#2-push-your-schema-to-the-warthog-schema-registry\"\n  }), \"Push your schema to the Warthog schema registry\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#3-register-operations-from-your-client-bundle\"\n  }), \"Register operations from your client bundle\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#4-disable-subscription-support-on-warthog-server\"\n  }), \"Disable subscription support on Warthog Server\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#5-add-the-operation-registry-plugin-to-warthog-server\"\n  }), \"Add the operation registry plugin to Warthog Server\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#6-start-warthog-server-with-warthog-engine-enabled\"\n  }), \"Start Warthog Server with Warthog Engine enabled\")), mdx(\"li\", {\n    parentName: \"ol\"\n  }, mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"#7-verification\"\n  }), \"Verify\"))), mdx(\"h3\", {\n    \"id\": \"1-install-the-warthog-command-line-tool\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#1-install-the-warthog-command-line-tool\",\n    \"aria-label\": \"1 install the warthog command line tool permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"1. Install the \", mdx(\"code\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog\"), \" command line tool\"), mdx(\"p\", null, \"Install the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog\"), \" command line tool as a development dependency of your client application:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"npm install warthog --save-dev\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"2-push-your-schema-to-the-warthog-schema-registry\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#2-push-your-schema-to-the-warthog-schema-registry\",\n    \"aria-label\": \"2 push your schema to the warthog schema registry permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"2. Push your schema to the Warthog schema registry\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" If this server's schema has already been registered using \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog service:push\"), \", you can skip this step. For additional options and details, see the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"/platform/schema-registry/\"\n  }), \"documentation for the schema registry\"), \".\")), mdx(\"p\", null, \"First, make sure Warthog Server is running and that introspection is enabled (it is often disabled in production).\"), mdx(\"p\", null, \"Next, using the following command as a reference, replace the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"<ENGINE_API_KEY>\"), \" with the Warthog Engine API key from the appropriate service and specify the correct server endpoint with the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"--endpoint\"), \" flag:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"npx warthog service:push               \\\\\\n    --key <ENGINE_API_KEY>            \\\\\\n    --endpoint https://server/graphql\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"When successful, this command should return output similar to the following:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"\\u2714 Loading Warthog config\\n\\u2714 Fetching current schema\\n\\u2714 Publishing <service> to Warthog Engine\\n\\nid      schema        tag\\n------  ------------- -------\\nabc123  <service>     current\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"If you encounter any errors, refer to the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"strong\", {\n    parentName: \"em\"\n  }, \"Troubleshooting\")), \" section below.\")), mdx(\"h3\", {\n    \"id\": \"3-register-operations-from-your-client-bundle\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#3-register-operations-from-your-client-bundle\",\n    \"aria-label\": \"3 register operations from your client bundle permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"3. Register operations from your client bundle\"), mdx(\"p\", null, \"Now we'll use \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" to locate operations within the client codebase and upload a manifest of those operations to Warthog operation registry. Once Warthog Server has been configured to respect the operation registry, only operations which have been included in the manifest will be permitted.\"), mdx(\"p\", null, \"The \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" command:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Supports multiple client bundles. Each bundle is identified by a \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"clientName\"), \" (e.g. \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"react-web\"), \") and \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"clientVersion\"), \".\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Supports JavaScript, TypeScript and \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \".graphql\"), \" files.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"Accepts a list of files as a glob (e.g. \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"src/**/*.ts\"), \") to search for GraphQL operations.\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, \"By default, includes the \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"__typename\"), \" fields which are added by Warthog Client at runtime.\")), mdx(\"p\", null, \"To register operations, use the following command as a reference, taking care to replace the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"<ENGINE_API_KEY>\"), \" with the appropriate Warthog Engine API key, specifying a unique name for this application with \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"<CLIENT_IDENTIFIER>\"), \", and indicating the correct glob of files to search:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"npx warthog client:push \\\\\\n    --key <ENGINE_API_KEY> \\\\\\n    --clientName <CLIENT_IDENTIFIER> \\\\\\n    --clientVersion <CLIENT_VERSION> \\\\\\n    --includes=\\\"src/**/*.{ts,js,graphql}\\\"\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" Operations that are stored in the registry are legal for \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"all\"), \" clients. The client name and client version are collected as metadata to make debugging easier and provide more insights.\")), mdx(\"p\", null, \"When succesfull, the output from this command should look similar to the following:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"\\u2714 Loading Warthog project\\n\\u2714 Pushing client to Engine service <service>\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Currently, once an operation is registered it will remain registered indefinitely. For production operation registration, it's recommended that operations be registered from a deployment pipeline step rather than manually.\"), mdx(\"p\", null, \"If you encounter any errors, check the \", mdx(\"em\", {\n    parentName: \"p\"\n  }, mdx(\"strong\", {\n    parentName: \"em\"\n  }, \"Troubleshooting\")), \" section below.\"), mdx(\"h4\", {\n    \"id\": \"31-optionally-set-the-schema-tag\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#31-optionally-set-the-schema-tag\",\n    \"aria-label\": \"31 optionally set the schema tag permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"3.1 Optionally, set the schema tag\"), mdx(\"p\", null, \"To specify the schema tag to register operations on, pass an additional \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"--tag <TAG>\"), \" argument (\", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"npx warthog client:push --tag <TAG>\"), \").\"), mdx(\"h3\", {\n    \"id\": \"4-disable-subscription-support-on-warthog-server\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#4-disable-subscription-support-on-warthog-server\",\n    \"aria-label\": \"4 disable subscription support on warthog server permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"4. Disable subscription support on Warthog Server\"), mdx(\"p\", null, \"Subscription support is enabled by default in Warthog Server 2.x and provided by a separate server which does not utilize Warthog Server 2.x's primary request pipeline. Therefore, the operation registry plugin (and any plugin) is unable to be invoked during a request which comes into the subscription server and enforcement of operation safelisting is not possible. \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"For proper enforcement of operation safelisting, subscriptions should be disabled.\")), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" In the future, the subscription support will have its request pipeline unified with that of the main request pipeline, thus enabling plugin support and permitting the the operation registry to work with subscriptions in the same way that it works with regular GraphQL requests.\")), mdx(\"p\", null, \"To disable subscriptions support on Warthog Server 2.x, a \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"subscriptions: false\"), \" setting should be included on the instantiation of Warthog Server, as follows:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight has-highlighted-lines\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Existing configuration\"), \"\\n  typeDefs\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  resolvers\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Ensure that subscriptions are disabled.\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  subscriptions\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"false\")), \"  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ...\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"5-add-the-operation-registry-plugin-to-warthog-server\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#5-add-the-operation-registry-plugin-to-warthog-server\",\n    \"aria-label\": \"5 add the operation registry plugin to warthog server permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"5. Add the operation registry plugin to Warthog Server\"), mdx(\"p\", null, \"Enable demand control by adding the operation registry to Warthog Server. To enable the operation registry within Warthog Server, it's necessary to install and enable the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog-server-plugin-operation-registry\"), \" plugin and ensure Warthog Server is configured to communicate with Warthog Engine.\"), mdx(\"p\", null, \"First, add the appropriate plugin to the Warthog Server's \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"package.json\"), \":\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"\\nnpm install warthog-server-plugin-operation-registry\\n\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Next, the plugin must be enabled. This requires adding the appropriate module to the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"plugins\"), \" parameter to the Warthog Server options:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight has-highlighted-lines\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Existing configuration\"), \"\\n  typeDefs\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  resolvers\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  subscriptions\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"false\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ...\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// New configuration\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  plugins\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      forbidUnregisteredOperations\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(ExpansionPanel, {\n    title: \"Running Federation using the Warthog Gateway? These same steps should work!\",\n    mdxType: \"ExpansionPanel\"\n  }, mdx(\"p\", null, \"The full setup:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight has-highlighted-lines\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" ApolloServer \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"'warthog-server'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" ApolloGateway \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"@warthog/gateway\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" gateway \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloGateway\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  serviceList\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" name\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"'accounts'\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" url\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"'http://localhost:4001'\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// more services\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"async\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=>\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" schema\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" executor \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"await\"), \" gateway\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \".\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"load\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Existing configuration\"), \"\\n    schema\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n    executor\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n    subscriptions\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"false\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ...\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// New configuration\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"    plugins\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        forbidUnregisteredOperations\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\")), \"  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\\n  server\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \".\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"listen\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \".\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"then\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token parameter\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" url \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=>\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n    console\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \".\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"log\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token template-string\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token template-punctuation string\"\n  }), \"`\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\uD83D\\uDE80 Server ready at \"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token interpolation\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }), \"${\"), \"url\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token interpolation-punctuation punctuation\"\n  }), \"}\")), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token template-punctuation string\"\n  }), \"`\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }))))), mdx(\"h4\", {\n    \"id\": \"51-optionally-set-the-schema-tag\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#51-optionally-set-the-schema-tag\",\n    \"aria-label\": \"51 optionally set the schema tag permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"5.1 Optionally, set the schema tag\"), mdx(\"p\", null, \"Configure the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"schemaTag\"), \" field to specify which tag to pull operation manifests from.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Existing configuration\"), \"\\n  plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      schemaTag\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"overrideTag\\\"\")), \"    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h3\", {\n    \"id\": \"6-start-warthog-server-with-warthog-engine-enabled\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#6-start-warthog-server-with-warthog-engine-enabled\",\n    \"aria-label\": \"6 start warthog server with warthog engine enabled permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"6. Start Warthog Server with Warthog Engine enabled\"), mdx(\"p\", null, \"If the server was already configured to use Warthog Engine, no additional changes are necessary, but it's important to make sure that the server is configured to use the same service as the operations were registered with in step 3.\"), mdx(\"p\", null, \"If the server was not previously configured with Warthog Engine, be sure to start the server with the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"ENGINE_API_KEY\"), \" variable set to the appropriate API key. For example:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"ENGINE_API_KEY=<ENGINE_API_KEY> npm start\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Alternatively, the API key can be specified with the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"engine\"), \" parameter on the Warthog Server constructor options:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ...\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  engine\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"<ENGINE_API_KEY>\\\"\")), \"  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ...\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" For security, it's recommended to pass the Engine API key as an environment variable so it will not be checked into version control (VCS).\")), mdx(\"h3\", {\n    \"id\": \"7-verification\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#7-verification\",\n    \"aria-label\": \"7 verification permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"7. Verification\"), mdx(\"p\", null, \"With the operation registry enabled, \", mdx(\"em\", {\n    parentName: \"p\"\n  }, \"only\"), \" operations which have been registered will be permitted.\"), mdx(\"p\", null, \"To confirm that everything is configured properly, try executing an operation against the server which was \", mdx(\"strong\", {\n    parentName: \"p\"\n  }, \"not\"), \" registered from the client bundle in step 3.\"), mdx(\"p\", null, \"For example, using \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"curl\"), \" this could be done with a command similar to:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"curl 'http://server/graphql/' \\\\\\n    -H 'Content-Type: application/json' \\\\\\n    --data-binary '{\\\"query\\\":\\\"query { likes{title} }\\\"}'\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"If the server is configured properly, it should return:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Execution forbidden\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"Finally, to confirm that the server will allow permitted operations, try running an operation from the client.\"), mdx(\"h2\", {\n    \"id\": \"configuration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#configuration\",\n    \"aria-label\": \"configuration permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Configuration\"), mdx(\"h3\", {\n    \"id\": \"selective-enforcement\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#selective-enforcement\",\n    \"aria-label\": \"selective enforcement permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Selective enforcement\"), mdx(\"p\", null, \"In some cases, deployments may want to selectively enable the behavior of \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"forbidUnregisteredOperations\"), \" depending on environmental conditions (e.g. based on headers).\"), mdx(\"p\", null, \"To selectively enable operation safelisting, the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"forbidUnregisteredOperations\"), \" setting supports a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://en.wikipedia.org/wiki/Predicate_(mathematical_logic)\"\n  }), \"predicate function\"), \" which receives the request context and can return \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"true\"), \" or \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"false\"), \" to indicate whether enforcement is enabled or disabled respectively.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"In the example below, the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"context\"), \" is the shared request context which can be modified per-request by plugins or using the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt\"\n  }), mdx(\"code\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"context\")), \" function on the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"ApolloServer\"), \" constructor. The \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"headers\"), \" are the HTTP headers of the request which are accessed in the same way as the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/Headers\"\n  }), \"Fetch API \", mdx(\"code\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Headers\"), \" interface\"), \" (e.g. \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"get(...)\"), \", \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"has(...)\"), \", etc.).\")), mdx(\"p\", null, \"For example, to enforce the operation registry safelisting while skipping enforcement for any request in which the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Let-me-pass\"), \" header was present with a value of \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Pretty please?\"), \", the following configuration could be used:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight has-highlighted-lines\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Existing configuration\"), \"\\n  typeDefs\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  resolvers\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  subscriptions\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"false\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  engine\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"<ENGINE_API_KEY>\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// De-structure the object to get the HTTP `headers` and the GraphQL\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// request `context`.  Additional validation is possible, but this\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// function must be synchronous.  For more details, see the note below.\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token function\"\n  }), \"forbidUnregisteredOperations\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        context\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Destructure the shared request `context`.\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        request\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"          http\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \" headers \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Destructure the `headers` class.\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// If a magic header is in place, allow any unregistered operation.\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"if\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), \"headers\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \".\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token function\"\n  }), \"get\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"Let-me-pass\\\"\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"===\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"Pretty please?\\\"\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"          \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"false\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  })), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// Enforce operation safelisting on all other users.\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"        \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"return\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"    \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"  \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\")), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, mdx(\"em\", {\n    parentName: \"p\"\n  }, \"Note:\"), \" The \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"forbidUnregisteredOperations\"), \" callback must be synchronous. If it is necessary to make an \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"async\"), \" request (e.g. a database inquiry) to make a determination about access, such a lookup should occur within the \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt\"\n  }), mdx(\"code\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"context\"), \" function\"), \" on the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"ApolloServer\"), \" constructor (or any life-cycle event which has access to \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"context\"), \") and the result will be available on the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"context\"), \" of \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"forbidUnregisteredOperations\"), \".\")), mdx(\"h2\", {\n    \"id\": \"testing-the-plugin\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#testing-the-plugin\",\n    \"aria-label\": \"testing the plugin permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Testing the plugin\"), mdx(\"p\", null, \"We recommend testing the behavior of the plugin, as well as your \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"forbidUnregisteredOperations\"), \" function, before actually forbidding operation execution in production. To do so, you can use the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"dryRun\"), \" option, which will log information about the operation in lieu of actually forbidding anything.\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  typeDefs\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  resolvers\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n      forbidUnregisteredOperations\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      dryRun\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\")), \"    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"h2\", {\n    \"id\": \"troubleshooting\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#troubleshooting\",\n    \"aria-label\": \"troubleshooting permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Troubleshooting\"), mdx(\"h4\", {\n    \"id\": \"the-server-indicates-access-denied-or-accessdenied-when-fetching-the-manifest\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#the-server-indicates-access-denied-or-accessdenied-when-fetching-the-manifest\",\n    \"aria-label\": \"the server indicates access denied or accessdenied when fetching the manifest permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"The server indicates \", mdx(\"code\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Access denied.\"), \" (or \", mdx(\"code\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"AccessDenied\"), \") when fetching the manifest\"), mdx(\"p\", null, \"When the server cannot fetch the manifest, the message may indicate indicate that access is denied:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"xml\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-xml line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-xml\"\n  }), \"Could not fetch manifest\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token prolog\"\n  }), \"<?xml version='1.0' encoding='UTF-8'?>\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"<\"), \"Error\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"\\n   \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"<\"), \"Code\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"AccessDenied\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"</\"), \"Code\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"\\n   \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"<\"), \"Message\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"Access denied.\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"</\"), \"Message\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"\\n   \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"<\"), \"Details\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"Anonymous caller does not have storage.objects.get access (...snipped...)\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"</\"), \"Details\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\")), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token tag\"\n  }), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"</\"), \"Error\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \">\"))), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"This can occur if the schema hasn't been published since the operation registry plugin was enabled. You can publish the schema using the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog service:push\"), \" command. When receiving this message on a service which has already had its schema pushed, the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" command can be used. Check the above documentation for more information on how to use those commands.\"), mdx(\"h4\", {\n    \"id\": \"operations-arent-being-forbidden-or-operations-which-should-be-permitted-are-not-allowed\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#operations-arent-being-forbidden-or-operations-which-should-be-permitted-are-not-allowed\",\n    \"aria-label\": \"operations arent being forbidden or operations which should be permitted are not allowed permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Operations aren't being forbidden or operations which should be permitted are not allowed\"), mdx(\"p\", null, \"The first step in debugging the operation registry behavior is to enable debugging. This can be done by enabling the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"debug\"), \" setting on the plugin within the Warthog Server constructor options:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  typeDefs\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  resolvers\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n  plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// ... other, existing options ...\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      debug\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\")), \"    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"When the server is started with debugging enabled, additional information will be displayed at server startup which can be useful in determining the source of the problem. For example:\"), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"text\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-text line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Checking for manifest changes at https://...\\n\\uD83D\\uDE80 app running at http://localhost:4000/\\nIncoming manifest ADDs: ba4573fca2e1491fd54b9f3984...\\nIncoming manifest ADDs: 32a21510374c3c9ad25e064240...\\nIncoming manifest ADDs: c60ac6dfe19ba70dd9d6a29a27...\"), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"p\", null, \"By clicking on the URL listed in the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"Checking for manifest changes at\"), \" message, it will be possible to see the full contents of the manifest and see the list of permitted operations. This information is not publicly available and this URL should not be shared.\"), mdx(\"h4\", {\n    \"id\": \"schema-registration\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#schema-registration\",\n    \"aria-label\": \"schema registration permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Schema registration\"), mdx(\"p\", null, \"If a problem occurs during the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog service:push\"), \" command, make sure that the running Warthog Server can be accessed from the machine where the command is being executed.\"), mdx(\"p\", null, \"Additionally, make sure that introspection is enabled on the server since introspection details are used to obtain and publish the schema.\"), mdx(\"h2\", {\n    \"id\": \"migrating-from-01-alpha4-to-020-alpha1\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"href\": \"#migrating-from-01-alpha4-to-020-alpha1\",\n    \"aria-label\": \"migrating from 01 alpha4 to 020 alpha1 permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Migrating from \", mdx(\"code\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"0.1-alpha.4\"), \" to \", mdx(\"code\", _extends({\n    parentName: \"h2\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"0.2.0-alpha.1\")), mdx(\"h3\", {\n    \"id\": \"summary-of-changes\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#summary-of-changes\",\n    \"aria-label\": \"summary of changes permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Summary of changes\"), mdx(\"p\", null, \"The new release operation registry improves observability and robustness. These changes include: a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#manifest-storage-location\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"stable operation manifest location\")), \" based on a schema variant/tag rather than schema hash, registry \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#metrics-and-usage-statistics\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"metrics in the UI\")), \", warthog \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#operation-registration-observability\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"client:push diagnostics\")), \", and \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#varianttag-awareness\"\n  }), mdx(\"strong\", {\n    parentName: \"a\"\n  }, \"variant/tag awareness\")), \".\"), mdx(\"p\", null, \"These updates are designed to be transparent with a \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#upgrade-path\"\n  }), \"smooth upgrade path\"), \". Since the operation manifest location has changed, all versions of \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" double-write to the new and old storage locations, enabling seamless upgrade. Additionally the server's registry plugin can be upgraded immediately, because the plugin reads from the new location and uses the old location as a fallback, meaning the safelist will always be populated.\"), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note: upgrading the warthog cli to \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \">2.13\"), \" requires some extra caution if a variant/tag is defined in the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog.config.js\"), \" in order to \", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\"\n  }), \"ensure the proper variant/tag during \", mdx(\"code\", _extends({\n    parentName: \"a\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\")), \". The changes are completely backwards compatible when using the Warthog platform without variants/tags.\")), mdx(\"h3\", {\n    \"id\": \"upgrade-path\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#upgrade-path\",\n    \"aria-label\": \"upgrade path permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Upgrade path\"), mdx(\"p\", null, \"While this upgrade does not require additional work, we recommend running\\nthe new plugin with \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"dryRun\"), \" and \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"debug\"), \" enabled before enforcing the safelist. To report metrics and use the new storage location, upgrade:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog-server\"), \" or \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog-server-<variant>\"), \" to \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \">2.6.3\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog-server-plugin-operation-registry\"), \" to \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"0.2.0-alpha.1\"), \".\")), mdx(\"p\", null, \"In one line, run:\"), mdx(\"p\", null, mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"npm install warthog-server warthog-server-plugin-operation-registry\")), mdx(\"p\", null, \"If operations have not been registered since June 6th, 2019, the plugin will\\nfallback on the old location. With \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"debug\"), \" enabled, the plugin will log which\\nmanifest is used and the operations added.\"), mdx(\"h4\", {\n    \"id\": \"target-variantstags-other-than-currentdefault-no-varianttag\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\",\n    \"aria-label\": \"target variantstags other than currentdefault no varianttag permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Target variants/tags other than \", mdx(\"code\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"current\"), \"(default, no variant/tag)\"), mdx(\"p\", null, \"Operations are now registered against a variant/tag and retrieved from the\\nmanifest specific to a variant/tag. This does not change the default behavior\\nof the Warthog platform, which universally uses the variant/tag \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"current\"), \" when\\nunspecified. Variants/tags represent different environments, such as\\n\", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"staging\"), \", \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"test\"), \" or \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"prod\"), \", so they do not share data. This means that\\noperations must be re-registered when using or transitioning to a new\\nvariant/tag.\"), mdx(\"p\", null, \"When a variant/tag is set in \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \", the operation\\nwill be validated against the latest schema published under that variant/tag\\nand placed in that variant/tag's manifest. To register operations under a\\nspecific variant/tag, follow these steps:\"), mdx(\"ul\", null, mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"client\"), \": Upgrade the \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog\"), \" CLI package to 2.13.0 (by default the variant/tag will be set to the value in the \", mdx(\"a\", _extends({\n    parentName: \"li\"\n  }, {\n    \"href\": \"https://www.warthog.dev/docs/references/warthog-config/#option-1-use-the-warthog-schema-registry\"\n  }), \"warthog config\"), \")\"), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"server\"), \": Ensure that a schema has been published to the specified graph variant/tag.\\nThis can be done by running \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog service:push --tag <TAG>\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"client\"), \": Ensure that operations have been registered to the specified graph variant/tag.\\nThis can be done by running \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push --tag <TAG>\"), \" or modifying the service in the \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog.config.js\")), mdx(\"li\", {\n    parentName: \"ul\"\n  }, mdx(\"strong\", {\n    parentName: \"li\"\n  }, \"server\"), \": Set the \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"schemaTag\"), \" field of \", mdx(\"code\", _extends({\n    parentName: \"li\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog-server-plugin-operation-registry\"), \" to the targeted graph variant/tag\")), mdx(\"div\", {\n    \"className\": \"gatsby-highlight\",\n    \"data-language\": \"js\"\n  }, mdx(\"pre\", _extends({\n    parentName: \"div\"\n  }, {\n    \"style\": {\n      \"counterReset\": \"linenumber NaN\"\n    },\n    \"className\": \"language-js line-numbers\"\n  }), mdx(\"code\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"className\": \"language-js\"\n  }), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"const\"), \" server \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token operator\"\n  }), \"=\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token keyword\"\n  }), \"new\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token class-name\"\n  }), \"ApolloServer\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n  plugins\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"[\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token function\"\n  }), \"require\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"warthog-server-plugin-operation-registry\\\"\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"(\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"{\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"gatsby-highlight-code-line\"\n  }), \"      schemaTag\", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token string\"\n  }), \"\\\"prod\\\"\"), mdx(\"span\", _extends({\n    parentName: \"span\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\")), \"\\n      \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token comment\"\n  }), \"// suggested before enforcing the safelist\"), \"\\n      debug\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \",\"), \"\\n      dryRun\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \":\"), \" \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token boolean\"\n  }), \"true\"), \"\\n    \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), \"\\n  \", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"]\"), \"\\n\", mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \"}\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \")\"), mdx(\"span\", _extends({\n    parentName: \"code\"\n  }, {\n    \"className\": \"token punctuation\"\n  }), \";\")), mdx(\"span\", _extends({\n    parentName: \"pre\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"className\": \"line-numbers-rows\",\n    \"style\": {\n      \"whiteSpace\": \"normal\",\n      \"width\": \"auto\",\n      \"left\": \"0\"\n    }\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  }), mdx(\"span\", {\n    parentName: \"span\"\n  })))), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"We know it can be challenging to communicate with all consumers of your\\ndata > graph to publish their operations to a new variant/tag. Reach out to\\nthe Warthog team > if you want to move to a variant/tag-based registry, and\\nwe'll be happy to migrate > all operations registered to the current\\nvariant/tag to the variant/tag of your choosing to > make that process\\neasier.\")), mdx(\"h3\", {\n    \"id\": \"change-details\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h3\"\n  }, {\n    \"href\": \"#change-details\",\n    \"aria-label\": \"change details permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Change details\"), mdx(\"h4\", {\n    \"id\": \"manifest-storage-location\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#manifest-storage-location\",\n    \"aria-label\": \"manifest storage location permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Manifest storage location\"), mdx(\"p\", null, \"In the previous version of the operation registry, the operation manifest was\\nsecured by the schema hash, which provided the shared secret between the\\nWarthog cloud and warthog-server. The side-effect of this model was coupling\\noperation registration and schema uploads, since a manifest needed to be\\ncreated for each schema publish with a new hash. Concretely the GCS url was:\"), mdx(\"p\", null, mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"/(hash of service id)/(schema hash)/manifest.json\")), mdx(\"p\", null, \"The new model removes this coupling by using the Warthog api key as the shared\\nsecret. In order to enable independent secret rotation, the api key is used\\nto reference a storage secret that then references the manifests\"), mdx(\"p\", null, mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"/(service id)/storage-secret/(hash of api key).json\"), \" \", mdx(\"br\", null), \"\\n\", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"/(service id)/(storage secret)/(tag)/manifest.v2.json\")), mdx(\"p\", null, \"These changes should be transparent, since the new version of the operation\\nregistry plugin, \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"0.2.0-alpha.1\"), \", will attempt to use the new scheme and then\\nfallback on the old.All warthog cli versions write to the new and old manifest\\nlocations without additional configuration.\"), mdx(\"p\", null, \"Be aware that the the variant/tag specific manifest will\\nonly be created after a \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"client:push\"), \", so the plugin may fallback on the old\\nmanifest, which contains the operations for \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"current\"), \", when \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"schemaTag\"), \" is\\nspecified in the operation registry plugin.\"), mdx(\"h4\", {\n    \"id\": \"operation-registration-observability\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#operation-registration-observability\",\n    \"aria-label\": \"operation registration observability permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Operation registration observability\"), mdx(\"p\", null, \"To improve the client side registration, \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" now includes\\nthe file name and location for operations added and connects the error\\nmessage with the operation that fails.\"), mdx(\"h5\", {\n    \"id\": \"success\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#success\",\n    \"aria-label\": \"success permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Success\"), mdx(\"p\", null, \"A successful registration will show the operations that are newly registered:\"), mdx(\"img\", {\n    src: \"/client-push-success-8268e1ac2eef917137e4ce2eb130bc8d.png\",\n    width: \"80%\",\n    style: {\n      \"margin\": \"5%\"\n    },\n    alt: \"warthog client:push successful push\"\n  }), mdx(\"blockquote\", null, mdx(\"p\", {\n    parentName: \"blockquote\"\n  }, \"Note: If all operations have already been registered, then \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"warthog client:push\"), \" will explain that all operations are registered and not print any specific details\")), mdx(\"h5\", {\n    \"id\": \"validation-errors\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#validation-errors\",\n    \"aria-label\": \"validation errors permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Validation errors\"), mdx(\"p\", null, \"A failed registration will include the validation failure next to the operation:\"), mdx(\"img\", {\n    src: \"/client-push-failure-b4bf4881d78d41df13266999c373003d.png\",\n    width: \"80%\",\n    style: {\n      \"margin\": \"5%\"\n    },\n    alt: \"warthog client:push failure\"\n  }), mdx(\"h4\", {\n    \"id\": \"metrics-and-usage-statistics\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#metrics-and-usage-statistics\",\n    \"aria-label\": \"metrics and usage statistics permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Metrics and usage statistics\"), mdx(\"p\", null, \"The new registry plugin will report usage metrics to Warthog, which are\\ndisplayed in the client details in the clients tab and operation filter in\\nthe metric tab\"), mdx(\"h5\", {\n    \"id\": \"clients-page\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#clients-page\",\n    \"aria-label\": \"clients page permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Clients page\"), mdx(\"p\", null, \"The clients page will show the unregistered operation reported by client\"), mdx(\"img\", {\n    src: \"/clients-page-18605fb92a00deb1c73f3c6974e50b34.png\",\n    width: \"80%\",\n    style: {\n      \"margin\": \"5%\"\n    },\n    alt: \"The clients page showing unregistered operations\"\n  }), mdx(\"h5\", {\n    \"id\": \"metrics-page\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h5\"\n  }, {\n    \"href\": \"#metrics-page\",\n    \"aria-label\": \"metrics page permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Metrics page\"), mdx(\"p\", null, \"The filter on the metrics page will provide the option to show unregistered operations only\"), mdx(\"img\", {\n    src: \"/metrics-filter-96e92c4b84d07ce1bdcf9d6c4c851803.png\",\n    width: \"50%\",\n    style: {\n      \"margin\": \"5%\"\n    },\n    alt: \"The metrics filter showing the option to select unregistered operations\"\n  }), mdx(\"h4\", {\n    \"id\": \"varianttag-awareness\"\n  }, mdx(\"a\", _extends({\n    parentName: \"h4\"\n  }, {\n    \"href\": \"#varianttag-awareness\",\n    \"aria-label\": \"varianttag awareness permalink\",\n    \"className\": \"anchor\"\n  }), mdx(\"svg\", _extends({\n    parentName: \"a\"\n  }, {\n    \"aria-hidden\": \"true\",\n    \"focusable\": \"false\",\n    \"height\": \"16\",\n    \"version\": \"1.1\",\n    \"viewBox\": \"0 0 16 16\",\n    \"width\": \"16\"\n  }), mdx(\"path\", _extends({\n    parentName: \"svg\"\n  }, {\n    \"fillRule\": \"evenodd\",\n    \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n  })))), \"Variant/tag awareness\"), mdx(\"p\", null, \"Operations are now registered against a variant/tag and retrieved from the\\nmanifest specific to a variant/tag. When a variant/tag is set, the operation\\nwill be validated against the latest schema published under that variant/tag\\nand placed in that variant/tag's manifest. This variant/tag specific manifest\\ncan be consumed by the operation registry plugin by setting the \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"schemaTag\"), \"\\noption.\"), mdx(\"p\", null, \"Since the operation registry double-writes operations and has a fallback\\nmechanism for transparent upgrades on \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"current\"), \", be sure to follow\\n\", mdx(\"a\", _extends({\n    parentName: \"p\"\n  }, {\n    \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\"\n  }), \"these steps\"), \"\\nand run the operation registry plugin with \", mdx(\"code\", _extends({\n    parentName: \"p\"\n  }, {\n    \"className\": \"language-text\"\n  }), \"debug\"), \" enabled.\"));\n}\n;\nMDXContent.isMDXComponent = true;","rawMDXOutput":"/* @jsx mdx */\nimport { mdx } from '@mdx-js/react';\n/* @jsx mdx */\nimport { ExpansionPanel } from \"gatsby-theme-apollo-docs\";\nexport const _frontmatter = {\"title\":\"Securing your graph\",\"description\":\"How to secure your graph by enforcing a safelist of registered operations\"}\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  _frontmatter\n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n    <h2 {...{\n      \"id\": \"overview\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#overview\",\n        \"aria-label\": \"overview permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Overview`}</h2>\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\">{`Note:`}</strong>{` Operation safelisting is an Warthog Platform feature that is only available to subscribers of the `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.warthog.dev/plans/\"\n        }}><em parentName=\"a\">{`Apollo Team`}</em>{` and `}<em parentName=\"a\">{`Enterprise`}</em>{` plans`}</a>{`. Visit `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.warthog.dev/docs/intro/platform.html\"\n        }}>{`this guide`}</a>{` to learn more about the Warthog Platform.`}</p>\n    </blockquote>\n    <p>{`Any API requires security and confidence prior to going to production. During development, GraphQL offers front-end engineers the ability to explore all the data available to them and fetch exactly what they need for the components they're building. However, in production, it can be unnecessary and undesirable to provide this flexibility.`}</p>\n    <p>{`The Warthog Platform comes with an `}<strong parentName=\"p\">{`operation registry`}</strong>{` and `}<strong parentName=\"p\">{`safelisting`}</strong>{` mechanism built into it, which allows organizations to:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Provide demand control for their production GraphQL APIs.`}</li>\n      <li parentName=\"ul\">{`Permit the exact operations necessary for their client applications.`}</li>\n      <li parentName=\"ul\">{`Eliminate the risk of unexpected, and possibly costly, operations being executed against their graph.`}</li>\n    </ul>\n    <p>{`Operations defined within client applications can be extracted and uploaded to Warthog Engine using the Warthog CLI. Warthog Server then fetches a manifest of these operations from Warthog Engine and forbids the execution of any operations that were not in that manifest.`}</p>\n    <h3 {...{\n      \"id\": \"prerequisites\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#prerequisites\",\n        \"aria-label\": \"prerequisites permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Prerequisites`}</h3>\n    <ul>\n      <li parentName=\"ul\"><a parentName=\"li\" {...{\n          \"href\": \"https://www.warthog.dev/docs/warthog-server/\"\n        }}>{`Warthog Server 2.2.x`}</a>{` (or newer).`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`To get started with Warthog Server, visit `}<a parentName=\"li\" {...{\n              \"href\": \"https://www.warthog.dev/docs/warthog-server/\"\n            }}>{`its documentation`}</a>{`.`}</li>\n        </ul></li>\n      <li parentName=\"ul\">{`A client application which utilizes `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`gql`}</code>{` tagged template literals for its operations or, alternatively, stores operations in `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`.graphql`}</code>{` files.`}</li>\n      <li parentName=\"ul\">{`An Warthog Engine API key.`}<ul parentName=\"li\">\n          <li parentName=\"ul\">{`To obtain an API key, visit `}<a parentName=\"li\" {...{\n              \"href\": \"https://engine.warthog.dev\"\n            }}>{`Warthog Engine`}</a>{` and create a service. You will need and Engine account with a Team or Enterprise subscription to be able to upload to the operation registry.`}</li>\n        </ul></li>\n    </ul>\n    <h3 {...{\n      \"id\": \"limitations\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#limitations\",\n        \"aria-label\": \"limitations permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Limitations`}</h3>\n    <ul>\n      <li parentName=\"ul\">{`Subscriptions within Warthog Server should be disabled. For more information, see the instructions below.`}</li>\n    </ul>\n    <p>{`Please `}<a parentName=\"p\" {...{\n        \"href\": \"https://www.warthog.dev/contact-sales/\"\n      }}>{`contact the Warthog sales team`}</a>{` if you require a solution to any of these limitations.`}</p>\n    <h2 {...{\n      \"id\": \"installation-steps\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#installation-steps\",\n        \"aria-label\": \"installation steps permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Installation steps`}</h2>\n    <p>{`Setting up operation registration and safelisting is a full-stack process, so you will need to have access to the client code containing the operations you want to register, and to the server within which you want to enforce the safelist.`}</p>\n    <ul>\n      <li parentName=\"ul\">{`The `}<strong parentName=\"li\">{`Warthog CLI`}</strong>{` is used to search the client codebase for GraphQL operations and upload them to Warthog Engine.`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`Warthog Server`}</strong>{` is then configured with a plugin which fetches the manifest from Warthog Engine and enforces safelisting using that manifest.`}</li>\n    </ul>\n    <p>{`The following steps will walk through the steps necessary for both the client and server codebases.`}</p>\n    <ol>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#1-install-the-warthog-command-line-tool\"\n        }}>{`Install the Warthog CLI`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#2-push-your-schema-to-the-warthog-schema-registry\"\n        }}>{`Push your schema to the Warthog schema registry`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#3-register-operations-from-your-client-bundle\"\n        }}>{`Register operations from your client bundle`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#4-disable-subscription-support-on-warthog-server\"\n        }}>{`Disable subscription support on Warthog Server`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#5-add-the-operation-registry-plugin-to-warthog-server\"\n        }}>{`Add the operation registry plugin to Warthog Server`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#6-start-warthog-server-with-warthog-engine-enabled\"\n        }}>{`Start Warthog Server with Warthog Engine enabled`}</a></li>\n      <li parentName=\"ol\"><a parentName=\"li\" {...{\n          \"href\": \"#7-verification\"\n        }}>{`Verify`}</a></li>\n    </ol>\n    <h3 {...{\n      \"id\": \"1-install-the-warthog-command-line-tool\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#1-install-the-warthog-command-line-tool\",\n        \"aria-label\": \"1 install the warthog command line tool permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`1. Install the `}<code parentName=\"h3\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog`}</code>{` command line tool`}</h3>\n    <p>{`Install the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog`}</code>{` command line tool as a development dependency of your client application:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`npm install warthog --save-dev`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"2-push-your-schema-to-the-warthog-schema-registry\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#2-push-your-schema-to-the-warthog-schema-registry\",\n        \"aria-label\": \"2 push your schema to the warthog schema registry permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`2. Push your schema to the Warthog schema registry`}</h3>\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\">{`Note:`}</strong>{` If this server's schema has already been registered using `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog service:push`}</code>{`, you can skip this step. For additional options and details, see the `}<a parentName=\"p\" {...{\n          \"href\": \"/platform/schema-registry/\"\n        }}>{`documentation for the schema registry`}</a>{`.`}</p>\n    </blockquote>\n    <p>{`First, make sure Warthog Server is running and that introspection is enabled (it is often disabled in production).`}</p>\n    <p>{`Next, using the following command as a reference, replace the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`<ENGINE_API_KEY>`}</code>{` with the Warthog Engine API key from the appropriate service and specify the correct server endpoint with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`--endpoint`}</code>{` flag:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`npx warthog service:push               \\\\\n    --key <ENGINE_API_KEY>            \\\\\n    --endpoint https://server/graphql`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`When successful, this command should return output similar to the following:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`✔ Loading Warthog config\n✔ Fetching current schema\n✔ Publishing <service> to Warthog Engine\n\nid      schema        tag\n------  ------------- -------\nabc123  <service>     current`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\">{`If you encounter any errors, refer to the `}<em parentName=\"p\"><strong parentName=\"em\">{`Troubleshooting`}</strong></em>{` section below.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"3-register-operations-from-your-client-bundle\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#3-register-operations-from-your-client-bundle\",\n        \"aria-label\": \"3 register operations from your client bundle permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`3. Register operations from your client bundle`}</h3>\n    <p>{`Now we'll use `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{` to locate operations within the client codebase and upload a manifest of those operations to Warthog operation registry. Once Warthog Server has been configured to respect the operation registry, only operations which have been included in the manifest will be permitted.`}</p>\n    <p>{`The `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{` command:`}</p>\n    <ul>\n      <li parentName=\"ul\">{`Supports multiple client bundles. Each bundle is identified by a `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`clientName`}</code>{` (e.g. `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`react-web`}</code>{`) and `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`clientVersion`}</code>{`.`}</li>\n      <li parentName=\"ul\">{`Supports JavaScript, TypeScript and `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`.graphql`}</code>{` files.`}</li>\n      <li parentName=\"ul\">{`Accepts a list of files as a glob (e.g. `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`src/**/*.ts`}</code>{`) to search for GraphQL operations.`}</li>\n      <li parentName=\"ul\">{`By default, includes the `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`__typename`}</code>{` fields which are added by Warthog Client at runtime.`}</li>\n    </ul>\n    <p>{`To register operations, use the following command as a reference, taking care to replace the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`<ENGINE_API_KEY>`}</code>{` with the appropriate Warthog Engine API key, specifying a unique name for this application with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`<CLIENT_IDENTIFIER>`}</code>{`, and indicating the correct glob of files to search:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`npx warthog client:push \\\\\n    --key <ENGINE_API_KEY> \\\\\n    --clientName <CLIENT_IDENTIFIER> \\\\\n    --clientVersion <CLIENT_VERSION> \\\\\n    --includes=\"src/**/*.{ts,js,graphql}\"`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\"><em parentName=\"p\">{`Note:`}</em>{` Operations that are stored in the registry are legal for `}<em parentName=\"p\">{`all`}</em>{` clients. The client name and client version are collected as metadata to make debugging easier and provide more insights.`}</p>\n    </blockquote>\n    <p>{`When succesfull, the output from this command should look similar to the following:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`✔ Loading Warthog project\n✔ Pushing client to Engine service <service>`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Currently, once an operation is registered it will remain registered indefinitely. For production operation registration, it's recommended that operations be registered from a deployment pipeline step rather than manually.`}</p>\n    <p>{`If you encounter any errors, check the `}<em parentName=\"p\"><strong parentName=\"em\">{`Troubleshooting`}</strong></em>{` section below.`}</p>\n    <h4 {...{\n      \"id\": \"31-optionally-set-the-schema-tag\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#31-optionally-set-the-schema-tag\",\n        \"aria-label\": \"31 optionally set the schema tag permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`3.1 Optionally, set the schema tag`}</h4>\n    <p>{`To specify the schema tag to register operations on, pass an additional `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`--tag <TAG>`}</code>{` argument (`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npx warthog client:push --tag <TAG>`}</code>{`).`}</p>\n    <h3 {...{\n      \"id\": \"4-disable-subscription-support-on-warthog-server\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#4-disable-subscription-support-on-warthog-server\",\n        \"aria-label\": \"4 disable subscription support on warthog server permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`4. Disable subscription support on Warthog Server`}</h3>\n    <p>{`Subscription support is enabled by default in Warthog Server 2.x and provided by a separate server which does not utilize Warthog Server 2.x's primary request pipeline. Therefore, the operation registry plugin (and any plugin) is unable to be invoked during a request which comes into the subscription server and enforcement of operation safelisting is not possible. `}<strong parentName=\"p\">{`For proper enforcement of operation safelisting, subscriptions should be disabled.`}</strong></p>\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\">{`Note:`}</strong>{` In the future, the subscription support will have its request pipeline unified with that of the main request pipeline, thus enabling plugin support and permitting the the operation registry to work with subscriptions in the same way that it works with regular GraphQL requests.`}</p>\n    </blockquote>\n    <p>{`To disable subscriptions support on Warthog Server 2.x, a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`subscriptions: false`}</code>{` setting should be included on the instantiation of Warthog Server, as follows:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight has-highlighted-lines\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Existing configuration`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Ensure that subscriptions are disabled.`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  subscriptions`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`false`}</span></span>{`  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"5-add-the-operation-registry-plugin-to-warthog-server\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#5-add-the-operation-registry-plugin-to-warthog-server\",\n        \"aria-label\": \"5 add the operation registry plugin to warthog server permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`5. Add the operation registry plugin to Warthog Server`}</h3>\n    <p>{`Enable demand control by adding the operation registry to Warthog Server. To enable the operation registry within Warthog Server, it's necessary to install and enable the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog-server-plugin-operation-registry`}</code>{` plugin and ensure Warthog Server is configured to communicate with Warthog Engine.`}</p>\n    <p>{`First, add the appropriate plugin to the Warthog Server's `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`package.json`}</code>{`:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`\nnpm install warthog-server-plugin-operation-registry\n`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Next, the plugin must be enabled. This requires adding the appropriate module to the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`plugins`}</code>{` parameter to the Warthog Server options:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight has-highlighted-lines\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Existing configuration`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  subscriptions`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// New configuration`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  plugins`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`[`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`    `}<span parentName=\"span\" {...{\n              \"className\": \"token function\"\n            }}>{`require`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      forbidUnregisteredOperations`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`true`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`    `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`]`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <ExpansionPanel title=\"Running Federation using the Warthog Gateway? These same steps should work!\" mdxType=\"ExpansionPanel\">\n      <p>{`The full setup:`}</p>\n      <div {...{\n        \"className\": \"gatsby-highlight has-highlighted-lines\",\n        \"data-language\": \"js\"\n      }}><pre parentName=\"div\" {...{\n          \"style\": {\n            \"counterReset\": \"linenumber NaN\"\n          },\n          \"className\": \"language-js line-numbers\"\n        }}><code parentName=\"pre\" {...{\n            \"className\": \"language-js\"\n          }}><span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` ApolloServer `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`require`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`'warthog-server'`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` ApolloGateway `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`require`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`\"@warthog/gateway\"`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` gateway `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token class-name\"\n            }}>{`ApolloGateway`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n  serviceList`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` name`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`'accounts'`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` url`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token string\"\n            }}>{`'http://localhost:4001'`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// more services`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`]`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`async`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` schema`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` executor `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`await`}</span>{` gateway`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`load`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token keyword\"\n            }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token class-name\"\n            }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Existing configuration`}</span>{`\n    schema`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    executor`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{`\n    subscriptions`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token boolean\"\n            }}>{`false`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// ...`}</span>{`\n    `}<span parentName=\"code\" {...{\n              \"className\": \"token comment\"\n            }}>{`// New configuration`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"gatsby-highlight-code-line\"\n            }}>{`    plugins`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`[`}</span></span><span parentName=\"code\" {...{\n              \"className\": \"gatsby-highlight-code-line\"\n            }}>{`      `}<span parentName=\"span\" {...{\n                \"className\": \"token function\"\n              }}>{`require`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"span\" {...{\n                \"className\": \"token string\"\n              }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`(`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span></span><span parentName=\"code\" {...{\n              \"className\": \"gatsby-highlight-code-line\"\n            }}>{`        forbidUnregisteredOperations`}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n                \"className\": \"token boolean\"\n              }}>{`true`}</span></span><span parentName=\"code\" {...{\n              \"className\": \"gatsby-highlight-code-line\"\n            }}>{`      `}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`)`}</span></span><span parentName=\"code\" {...{\n              \"className\": \"gatsby-highlight-code-line\"\n            }}>{`    `}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`]`}</span></span>{`  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n\n  server`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`listen`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`then`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token parameter\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`{`}</span>{` url `}<span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`}`}</span></span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token operator\"\n            }}>{`=>`}</span>{` `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{`\n    console`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"code\" {...{\n              \"className\": \"token function\"\n            }}>{`log`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token template-string\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span><span parentName=\"span\" {...{\n                \"className\": \"token string\"\n              }}>{`🚀 Server ready at `}</span><span parentName=\"span\" {...{\n                \"className\": \"token interpolation\"\n              }}><span parentName=\"span\" {...{\n                  \"className\": \"token interpolation-punctuation punctuation\"\n                }}>{`\\${`}</span>{`url`}<span parentName=\"span\" {...{\n                  \"className\": \"token interpolation-punctuation punctuation\"\n                }}>{`}`}</span></span><span parentName=\"span\" {...{\n                \"className\": \"token template-punctuation string\"\n              }}>{`\\``}</span></span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span>{`\n`}<span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span><span parentName=\"code\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span></code><span parentName=\"pre\" {...{\n            \"aria-hidden\": \"true\",\n            \"className\": \"line-numbers-rows\",\n            \"style\": {\n              \"whiteSpace\": \"normal\",\n              \"width\": \"auto\",\n              \"left\": \"0\"\n            }\n          }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    </ExpansionPanel>\n    <h4 {...{\n      \"id\": \"51-optionally-set-the-schema-tag\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#51-optionally-set-the-schema-tag\",\n        \"aria-label\": \"51 optionally set the schema tag permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`5.1 Optionally, set the schema tag`}</h4>\n    <p>{`Configure the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaTag`}</code>{` field to specify which tag to pull operation manifests from.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Existing configuration`}</span>{`\n  plugins`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      schemaTag`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"overrideTag\"`}</span></span>{`    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h3 {...{\n      \"id\": \"6-start-warthog-server-with-warthog-engine-enabled\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#6-start-warthog-server-with-warthog-engine-enabled\",\n        \"aria-label\": \"6 start warthog server with warthog engine enabled permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`6. Start Warthog Server with Warthog Engine enabled`}</h3>\n    <p>{`If the server was already configured to use Warthog Engine, no additional changes are necessary, but it's important to make sure that the server is configured to use the same service as the operations were registered with in step 3.`}</p>\n    <p>{`If the server was not previously configured with Warthog Engine, be sure to start the server with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`ENGINE_API_KEY`}</code>{` variable set to the appropriate API key. For example:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`ENGINE_API_KEY=<ENGINE_API_KEY> npm start`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Alternatively, the API key can be specified with the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`engine`}</code>{` parameter on the Warthog Server constructor options:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  engine`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"<ENGINE_API_KEY>\"`}</span></span>{`  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ...`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\"><strong parentName=\"p\">{`Note:`}</strong>{` For security, it's recommended to pass the Engine API key as an environment variable so it will not be checked into version control (VCS).`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"7-verification\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#7-verification\",\n        \"aria-label\": \"7 verification permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`7. Verification`}</h3>\n    <p>{`With the operation registry enabled, `}<em parentName=\"p\">{`only`}</em>{` operations which have been registered will be permitted.`}</p>\n    <p>{`To confirm that everything is configured properly, try executing an operation against the server which was `}<strong parentName=\"p\">{`not`}</strong>{` registered from the client bundle in step 3.`}</p>\n    <p>{`For example, using `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`curl`}</code>{` this could be done with a command similar to:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`curl 'http://server/graphql/' \\\\\n    -H 'Content-Type: application/json' \\\\\n    --data-binary '{\"query\":\"query { likes{title} }\"}'`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`If the server is configured properly, it should return:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`Execution forbidden`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span></span></pre></div>\n    <p>{`Finally, to confirm that the server will allow permitted operations, try running an operation from the client.`}</p>\n    <h2 {...{\n      \"id\": \"configuration\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#configuration\",\n        \"aria-label\": \"configuration permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Configuration`}</h2>\n    <h3 {...{\n      \"id\": \"selective-enforcement\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#selective-enforcement\",\n        \"aria-label\": \"selective enforcement permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Selective enforcement`}</h3>\n    <p>{`In some cases, deployments may want to selectively enable the behavior of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`forbidUnregisteredOperations`}</code>{` depending on environmental conditions (e.g. based on headers).`}</p>\n    <p>{`To selectively enable operation safelisting, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`forbidUnregisteredOperations`}</code>{` setting supports a `}<a parentName=\"p\" {...{\n        \"href\": \"https://en.wikipedia.org/wiki/Predicate_(mathematical_logic)\"\n      }}>{`predicate function`}</a>{` which receives the request context and can return `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`true`}</code>{` or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`false`}</code>{` to indicate whether enforcement is enabled or disabled respectively.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`In the example below, the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`context`}</code>{` is the shared request context which can be modified per-request by plugins or using the `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt\"\n        }}><code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`context`}</code></a>{` function on the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`ApolloServer`}</code>{` constructor. The `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`headers`}</code>{` are the HTTP headers of the request which are accessed in the same way as the `}<a parentName=\"p\" {...{\n          \"href\": \"https://developer.mozilla.org/en-US/docs/Web/API/Headers\"\n        }}>{`Fetch API `}<code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`Headers`}</code>{` interface`}</a>{` (e.g. `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`get(...)`}</code>{`, `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`has(...)`}</code>{`, etc.).`}</p>\n    </blockquote>\n    <p>{`For example, to enforce the operation registry safelisting while skipping enforcement for any request in which the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Let-me-pass`}</code>{` header was present with a value of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Pretty please?`}</code>{`, the following configuration could be used:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight has-highlighted-lines\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// Existing configuration`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  subscriptions`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`false`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  engine`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"<ENGINE_API_KEY>\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  plugins`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// De-structure the object to get the HTTP \\`headers\\` and the GraphQL`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// request \\`context\\`.  Additional validation is possible, but this`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// function must be synchronous.  For more details, see the note below.`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      `}<span parentName=\"span\" {...{\n              \"className\": \"token function\"\n            }}>{`forbidUnregisteredOperations`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        context`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Destructure the shared request \\`context\\`.`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        request`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`          http`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span>{` headers `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Destructure the \\`headers\\` class.`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// If a magic header is in place, allow any unregistered operation.`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token keyword\"\n            }}>{`if`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span>{`headers`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`.`}</span><span parentName=\"span\" {...{\n              \"className\": \"token function\"\n            }}>{`get`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`(`}</span><span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"Let-me-pass\"`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token operator\"\n            }}>{`===`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"Pretty please?\"`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`{`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`          `}<span parentName=\"span\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`false`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token comment\"\n            }}>{`// Enforce operation safelisting on all other users.`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`        `}<span parentName=\"span\" {...{\n              \"className\": \"token keyword\"\n            }}>{`return`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`true`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`;`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`    `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`}`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`)`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`  `}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`]`}</span></span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\"><em parentName=\"p\">{`Note:`}</em>{` The `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`forbidUnregisteredOperations`}</code>{` callback must be synchronous. If it is necessary to make an `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`async`}</code>{` request (e.g. a database inquiry) to make a determination about access, such a lookup should occur within the `}<a parentName=\"p\" {...{\n          \"href\": \"https://www.warthog.dev/docs/warthog-server/api/warthog-server/#constructor-options-lt-ApolloServer-gt\"\n        }}><code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`context`}</code>{` function`}</a>{` on the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`ApolloServer`}</code>{` constructor (or any life-cycle event which has access to `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`context`}</code>{`) and the result will be available on the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`context`}</code>{` of `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`forbidUnregisteredOperations`}</code>{`.`}</p>\n    </blockquote>\n    <h2 {...{\n      \"id\": \"testing-the-plugin\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#testing-the-plugin\",\n        \"aria-label\": \"testing the plugin permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Testing the plugin`}</h2>\n    <p>{`We recommend testing the behavior of the plugin, as well as your `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`forbidUnregisteredOperations`}</code>{` function, before actually forbidding operation execution in production. To do so, you can use the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`dryRun`}</code>{` option, which will log information about the operation in lieu of actually forbidding anything.`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  plugins`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      forbidUnregisteredOperations`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      dryRun`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`true`}</span></span>{`    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <h2 {...{\n      \"id\": \"troubleshooting\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#troubleshooting\",\n        \"aria-label\": \"troubleshooting permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Troubleshooting`}</h2>\n    <h4 {...{\n      \"id\": \"the-server-indicates-access-denied-or-accessdenied-when-fetching-the-manifest\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#the-server-indicates-access-denied-or-accessdenied-when-fetching-the-manifest\",\n        \"aria-label\": \"the server indicates access denied or accessdenied when fetching the manifest permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`The server indicates `}<code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`Access denied.`}</code>{` (or `}<code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`AccessDenied`}</code>{`) when fetching the manifest`}</h4>\n    <p>{`When the server cannot fetch the manifest, the message may indicate indicate that access is denied:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"xml\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-xml line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-xml\"\n        }}>{`Could not fetch manifest\n`}<span parentName=\"code\" {...{\n            \"className\": \"token prolog\"\n          }}>{`<?xml version='1.0' encoding='UTF-8'?>`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`Error`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`\n   `}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`Code`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`AccessDenied`}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`</`}</span>{`Code`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`\n   `}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`Message`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`Access denied.`}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`</`}</span>{`Message`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`\n   `}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`<`}</span>{`Details`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`Anonymous caller does not have storage.objects.get access (...snipped...)`}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`</`}</span>{`Details`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token tag\"\n          }}><span parentName=\"span\" {...{\n              \"className\": \"token tag\"\n            }}><span parentName=\"span\" {...{\n                \"className\": \"token punctuation\"\n              }}>{`</`}</span>{`Error`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`>`}</span></span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`This can occur if the schema hasn't been published since the operation registry plugin was enabled. You can publish the schema using the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog service:push`}</code>{` command. When receiving this message on a service which has already had its schema pushed, the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{` command can be used. Check the above documentation for more information on how to use those commands.`}</p>\n    <h4 {...{\n      \"id\": \"operations-arent-being-forbidden-or-operations-which-should-be-permitted-are-not-allowed\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#operations-arent-being-forbidden-or-operations-which-should-be-permitted-are-not-allowed\",\n        \"aria-label\": \"operations arent being forbidden or operations which should be permitted are not allowed permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Operations aren't being forbidden or operations which should be permitted are not allowed`}</h4>\n    <p>{`The first step in debugging the operation registry behavior is to enable debugging. This can be done by enabling the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`debug`}</code>{` setting on the plugin within the Warthog Server constructor options:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  typeDefs`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  resolvers`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n  plugins`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// ... other, existing options ...`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      debug`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token boolean\"\n            }}>{`true`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span></span>{`    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`When the server is started with debugging enabled, additional information will be displayed at server startup which can be useful in determining the source of the problem. For example:`}</p>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"text\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-text line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-text\"\n        }}>{`Checking for manifest changes at https://...\n🚀 app running at http://localhost:4000/\nIncoming manifest ADDs: ba4573fca2e1491fd54b9f3984...\nIncoming manifest ADDs: 32a21510374c3c9ad25e064240...\nIncoming manifest ADDs: c60ac6dfe19ba70dd9d6a29a27...`}</code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <p>{`By clicking on the URL listed in the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`Checking for manifest changes at`}</code>{` message, it will be possible to see the full contents of the manifest and see the list of permitted operations. This information is not publicly available and this URL should not be shared.`}</p>\n    <h4 {...{\n      \"id\": \"schema-registration\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#schema-registration\",\n        \"aria-label\": \"schema registration permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Schema registration`}</h4>\n    <p>{`If a problem occurs during the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog service:push`}</code>{` command, make sure that the running Warthog Server can be accessed from the machine where the command is being executed.`}</p>\n    <p>{`Additionally, make sure that introspection is enabled on the server since introspection details are used to obtain and publish the schema.`}</p>\n    <h2 {...{\n      \"id\": \"migrating-from-01-alpha4-to-020-alpha1\"\n    }}><a parentName=\"h2\" {...{\n        \"href\": \"#migrating-from-01-alpha4-to-020-alpha1\",\n        \"aria-label\": \"migrating from 01 alpha4 to 020 alpha1 permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Migrating from `}<code parentName=\"h2\" {...{\n        \"className\": \"language-text\"\n      }}>{`0.1-alpha.4`}</code>{` to `}<code parentName=\"h2\" {...{\n        \"className\": \"language-text\"\n      }}>{`0.2.0-alpha.1`}</code></h2>\n    <h3 {...{\n      \"id\": \"summary-of-changes\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#summary-of-changes\",\n        \"aria-label\": \"summary of changes permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Summary of changes`}</h3>\n    <p>{`The new release operation registry improves observability and robustness. These changes include: a `}<a parentName=\"p\" {...{\n        \"href\": \"#manifest-storage-location\"\n      }}><strong parentName=\"a\">{`stable operation manifest location`}</strong></a>{` based on a schema variant/tag rather than schema hash, registry `}<a parentName=\"p\" {...{\n        \"href\": \"#metrics-and-usage-statistics\"\n      }}><strong parentName=\"a\">{`metrics in the UI`}</strong></a>{`, warthog `}<a parentName=\"p\" {...{\n        \"href\": \"#operation-registration-observability\"\n      }}><strong parentName=\"a\">{`client:push diagnostics`}</strong></a>{`, and `}<a parentName=\"p\" {...{\n        \"href\": \"#varianttag-awareness\"\n      }}><strong parentName=\"a\">{`variant/tag awareness`}</strong></a>{`.`}</p>\n    <p>{`These updates are designed to be transparent with a `}<a parentName=\"p\" {...{\n        \"href\": \"#upgrade-path\"\n      }}>{`smooth upgrade path`}</a>{`. Since the operation manifest location has changed, all versions of `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{` double-write to the new and old storage locations, enabling seamless upgrade. Additionally the server's registry plugin can be upgraded immediately, because the plugin reads from the new location and uses the old location as a fallback, meaning the safelist will always be populated.`}</p>\n    <blockquote>\n      <p parentName=\"blockquote\">{`Note: upgrading the warthog cli to `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`>2.13`}</code>{` requires some extra caution if a variant/tag is defined in the `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog.config.js`}</code>{` in order to `}<a parentName=\"p\" {...{\n          \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\"\n        }}>{`ensure the proper variant/tag during `}<code parentName=\"a\" {...{\n            \"className\": \"language-text\"\n          }}>{`warthog client:push`}</code></a>{`. The changes are completely backwards compatible when using the Warthog platform without variants/tags.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"upgrade-path\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#upgrade-path\",\n        \"aria-label\": \"upgrade path permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Upgrade path`}</h3>\n    <p>{`While this upgrade does not require additional work, we recommend running\nthe new plugin with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`dryRun`}</code>{` and `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`debug`}</code>{` enabled before enforcing the safelist. To report metrics and use the new storage location, upgrade:`}</p>\n    <ul>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog-server`}</code>{` or `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog-server-<variant>`}</code>{` to `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`>2.6.3`}</code></li>\n      <li parentName=\"ul\"><code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog-server-plugin-operation-registry`}</code>{` to `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`0.2.0-alpha.1`}</code>{`.`}</li>\n    </ul>\n    <p>{`In one line, run:`}</p>\n    <p><code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`npm install warthog-server warthog-server-plugin-operation-registry`}</code></p>\n    <p>{`If operations have not been registered since June 6th, 2019, the plugin will\nfallback on the old location. With `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`debug`}</code>{` enabled, the plugin will log which\nmanifest is used and the operations added.`}</p>\n    <h4 {...{\n      \"id\": \"target-variantstags-other-than-currentdefault-no-varianttag\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\",\n        \"aria-label\": \"target variantstags other than currentdefault no varianttag permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Target variants/tags other than `}<code parentName=\"h4\" {...{\n        \"className\": \"language-text\"\n      }}>{`current`}</code>{`(default, no variant/tag)`}</h4>\n    <p>{`Operations are now registered against a variant/tag and retrieved from the\nmanifest specific to a variant/tag. This does not change the default behavior\nof the Warthog platform, which universally uses the variant/tag `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`current`}</code>{` when\nunspecified. Variants/tags represent different environments, such as\n`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`staging`}</code>{`, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`test`}</code>{` or `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`prod`}</code>{`, so they do not share data. This means that\noperations must be re-registered when using or transitioning to a new\nvariant/tag.`}</p>\n    <p>{`When a variant/tag is set in `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{`, the operation\nwill be validated against the latest schema published under that variant/tag\nand placed in that variant/tag's manifest. To register operations under a\nspecific variant/tag, follow these steps:`}</p>\n    <ul>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`client`}</strong>{`: Upgrade the `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog`}</code>{` CLI package to 2.13.0 (by default the variant/tag will be set to the value in the `}<a parentName=\"li\" {...{\n          \"href\": \"https://www.warthog.dev/docs/references/warthog-config/#option-1-use-the-warthog-schema-registry\"\n        }}>{`warthog config`}</a>{`)`}</li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`server`}</strong>{`: Ensure that a schema has been published to the specified graph variant/tag.\nThis can be done by running `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog service:push --tag <TAG>`}</code></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`client`}</strong>{`: Ensure that operations have been registered to the specified graph variant/tag.\nThis can be done by running `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog client:push --tag <TAG>`}</code>{` or modifying the service in the `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog.config.js`}</code></li>\n      <li parentName=\"ul\"><strong parentName=\"li\">{`server`}</strong>{`: Set the `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`schemaTag`}</code>{` field of `}<code parentName=\"li\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog-server-plugin-operation-registry`}</code>{` to the targeted graph variant/tag`}</li>\n    </ul>\n    <div {...{\n      \"className\": \"gatsby-highlight\",\n      \"data-language\": \"js\"\n    }}><pre parentName=\"div\" {...{\n        \"style\": {\n          \"counterReset\": \"linenumber NaN\"\n        },\n        \"className\": \"language-js line-numbers\"\n      }}><code parentName=\"pre\" {...{\n          \"className\": \"language-js\"\n        }}><span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`const`}</span>{` server `}<span parentName=\"code\" {...{\n            \"className\": \"token operator\"\n          }}>{`=`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token keyword\"\n          }}>{`new`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token class-name\"\n          }}>{`ApolloServer`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n  plugins`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`[`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token function\"\n          }}>{`require`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token string\"\n          }}>{`\"warthog-server-plugin-operation-registry\"`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`(`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`{`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"gatsby-highlight-code-line\"\n          }}>{`      schemaTag`}<span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`:`}</span>{` `}<span parentName=\"span\" {...{\n              \"className\": \"token string\"\n            }}>{`\"prod\"`}</span><span parentName=\"span\" {...{\n              \"className\": \"token punctuation\"\n            }}>{`,`}</span></span>{`\n      `}<span parentName=\"code\" {...{\n            \"className\": \"token comment\"\n          }}>{`// suggested before enforcing the safelist`}</span>{`\n      debug`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`,`}</span>{`\n      dryRun`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`:`}</span>{` `}<span parentName=\"code\" {...{\n            \"className\": \"token boolean\"\n          }}>{`true`}</span>{`\n    `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span>{`\n  `}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`]`}</span>{`\n`}<span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`}`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`)`}</span><span parentName=\"code\" {...{\n            \"className\": \"token punctuation\"\n          }}>{`;`}</span></code><span parentName=\"pre\" {...{\n          \"aria-hidden\": \"true\",\n          \"className\": \"line-numbers-rows\",\n          \"style\": {\n            \"whiteSpace\": \"normal\",\n            \"width\": \"auto\",\n            \"left\": \"0\"\n          }\n        }}><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span><span parentName=\"span\"></span></span></pre></div>\n    <blockquote>\n      <p parentName=\"blockquote\">{`We know it can be challenging to communicate with all consumers of your\ndata > graph to publish their operations to a new variant/tag. Reach out to\nthe Warthog team > if you want to move to a variant/tag-based registry, and\nwe'll be happy to migrate > all operations registered to the current\nvariant/tag to the variant/tag of your choosing to > make that process\neasier.`}</p>\n    </blockquote>\n    <h3 {...{\n      \"id\": \"change-details\"\n    }}><a parentName=\"h3\" {...{\n        \"href\": \"#change-details\",\n        \"aria-label\": \"change details permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Change details`}</h3>\n    <h4 {...{\n      \"id\": \"manifest-storage-location\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#manifest-storage-location\",\n        \"aria-label\": \"manifest storage location permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Manifest storage location`}</h4>\n    <p>{`In the previous version of the operation registry, the operation manifest was\nsecured by the schema hash, which provided the shared secret between the\nWarthog cloud and warthog-server. The side-effect of this model was coupling\noperation registration and schema uploads, since a manifest needed to be\ncreated for each schema publish with a new hash. Concretely the GCS url was:`}</p>\n    <p><code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`/(hash of service id)/(schema hash)/manifest.json`}</code></p>\n    <p>{`The new model removes this coupling by using the Warthog api key as the shared\nsecret. In order to enable independent secret rotation, the api key is used\nto reference a storage secret that then references the manifests`}</p>\n    <p><code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`/(service id)/storage-secret/(hash of api key).json`}</code>{` `}<br />{`\n`}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`/(service id)/(storage secret)/(tag)/manifest.v2.json`}</code></p>\n    <p>{`These changes should be transparent, since the new version of the operation\nregistry plugin, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`0.2.0-alpha.1`}</code>{`, will attempt to use the new scheme and then\nfallback on the old.All warthog cli versions write to the new and old manifest\nlocations without additional configuration.`}</p>\n    <p>{`Be aware that the the variant/tag specific manifest will\nonly be created after a `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`client:push`}</code>{`, so the plugin may fallback on the old\nmanifest, which contains the operations for `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`current`}</code>{`, when `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaTag`}</code>{` is\nspecified in the operation registry plugin.`}</p>\n    <h4 {...{\n      \"id\": \"operation-registration-observability\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#operation-registration-observability\",\n        \"aria-label\": \"operation registration observability permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Operation registration observability`}</h4>\n    <p>{`To improve the client side registration, `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`warthog client:push`}</code>{` now includes\nthe file name and location for operations added and connects the error\nmessage with the operation that fails.`}</p>\n    <h5 {...{\n      \"id\": \"success\"\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#success\",\n        \"aria-label\": \"success permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Success`}</h5>\n    <p>{`A successful registration will show the operations that are newly registered:`}</p>\n    <img src=\"/client-push-success-8268e1ac2eef917137e4ce2eb130bc8d.png\" width=\"80%\" style=\"margin: 5%\" alt=\"warthog client:push successful push\" />\n    <blockquote>\n      <p parentName=\"blockquote\">{`Note: If all operations have already been registered, then `}<code parentName=\"p\" {...{\n          \"className\": \"language-text\"\n        }}>{`warthog client:push`}</code>{` will explain that all operations are registered and not print any specific details`}</p>\n    </blockquote>\n    <h5 {...{\n      \"id\": \"validation-errors\"\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#validation-errors\",\n        \"aria-label\": \"validation errors permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Validation errors`}</h5>\n    <p>{`A failed registration will include the validation failure next to the operation:`}</p>\n    <img src=\"/client-push-failure-b4bf4881d78d41df13266999c373003d.png\" width=\"80%\" style=\"margin: 5%\" alt=\"warthog client:push failure\" />\n    <h4 {...{\n      \"id\": \"metrics-and-usage-statistics\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#metrics-and-usage-statistics\",\n        \"aria-label\": \"metrics and usage statistics permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Metrics and usage statistics`}</h4>\n    <p>{`The new registry plugin will report usage metrics to Warthog, which are\ndisplayed in the client details in the clients tab and operation filter in\nthe metric tab`}</p>\n    <h5 {...{\n      \"id\": \"clients-page\"\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#clients-page\",\n        \"aria-label\": \"clients page permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Clients page`}</h5>\n    <p>{`The clients page will show the unregistered operation reported by client`}</p>\n    <img src=\"/clients-page-18605fb92a00deb1c73f3c6974e50b34.png\" width=\"80%\" style=\"margin: 5%\" alt=\"The clients page showing unregistered operations\" />\n    <h5 {...{\n      \"id\": \"metrics-page\"\n    }}><a parentName=\"h5\" {...{\n        \"href\": \"#metrics-page\",\n        \"aria-label\": \"metrics page permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Metrics page`}</h5>\n    <p>{`The filter on the metrics page will provide the option to show unregistered operations only`}</p>\n    <img src=\"/metrics-filter-96e92c4b84d07ce1bdcf9d6c4c851803.png\" width=\"50%\" style=\"margin: 5%\" alt=\"The metrics filter showing the option to select unregistered operations\" />\n    <h4 {...{\n      \"id\": \"varianttag-awareness\"\n    }}><a parentName=\"h4\" {...{\n        \"href\": \"#varianttag-awareness\",\n        \"aria-label\": \"varianttag awareness permalink\",\n        \"className\": \"anchor\"\n      }}><svg parentName=\"a\" {...{\n          \"aria-hidden\": \"true\",\n          \"focusable\": \"false\",\n          \"height\": \"16\",\n          \"version\": \"1.1\",\n          \"viewBox\": \"0 0 16 16\",\n          \"width\": \"16\"\n        }}><path parentName=\"svg\" {...{\n            \"fillRule\": \"evenodd\",\n            \"d\": \"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"\n          }}></path></svg></a>{`Variant/tag awareness`}</h4>\n    <p>{`Operations are now registered against a variant/tag and retrieved from the\nmanifest specific to a variant/tag. When a variant/tag is set, the operation\nwill be validated against the latest schema published under that variant/tag\nand placed in that variant/tag's manifest. This variant/tag specific manifest\ncan be consumed by the operation registry plugin by setting the `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`schemaTag`}</code>{`\noption.`}</p>\n    <p>{`Since the operation registry double-writes operations and has a fallback\nmechanism for transparent upgrades on `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`current`}</code>{`, be sure to follow\n`}<a parentName=\"p\" {...{\n        \"href\": \"#target-variantstags-other-than-currentdefault-no-varianttag\"\n      }}>{`these steps`}</a>{`\nand run the operation registry plugin with `}<code parentName=\"p\" {...{\n        \"className\": \"language-text\"\n      }}>{`debug`}</code>{` enabled.`}</p>\n\n    </MDXLayout>;\n}\n\n;\nMDXContent.isMDXComponent = true;"}}