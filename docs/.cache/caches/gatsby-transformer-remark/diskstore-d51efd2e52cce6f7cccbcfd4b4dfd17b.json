{"expireTime":9007200819376317000,"key":"transformer-remark-markdown-ast-b1689c5b2f5d3d1d31db4abb2a29653c-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-prismjsgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Using GraphQL, clients describe exactly the data they want through the fields they put in their requests. This gives us the ability to precisely connect which clients, and which queries from those clients, are using exactly which fields in our schema ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":252,"offset":252},"indent":[]}},{"type":"text","value":"â€”","position":{"start":{"line":2,"column":252,"offset":252},"end":{"line":2,"column":259,"offset":259},"indent":[]}},{"type":"text","value":" an insight that's immensely valuable as GraphQL development scales within an organization.","position":{"start":{"line":2,"column":259,"offset":259},"end":{"line":2,"column":350,"offset":350},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":350,"offset":350},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Warthog provides a client identification and tracking system, which allows you to answer questions like ","position":{"start":{"line":4,"column":1,"offset":352},"end":{"line":4,"column":105,"offset":456},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"\"which query is using this field?\"","position":{"start":{"line":4,"column":106,"offset":457},"end":{"line":4,"column":140,"offset":491},"indent":[]}}],"position":{"start":{"line":4,"column":105,"offset":456},"end":{"line":4,"column":141,"offset":492},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":4,"column":141,"offset":492},"end":{"line":4,"column":146,"offset":497},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"\"which versions of my iOS app are running this query?\"","position":{"start":{"line":4,"column":147,"offset":498},"end":{"line":4,"column":201,"offset":552},"indent":[]}}],"position":{"start":{"line":4,"column":146,"offset":497},"end":{"line":4,"column":202,"offset":553},"indent":[]}},{"type":"text","value":". It segments usage data by ","position":{"start":{"line":4,"column":202,"offset":553},"end":{"line":4,"column":230,"offset":581},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"client name and version","position":{"start":{"line":4,"column":232,"offset":583},"end":{"line":4,"column":255,"offset":606},"indent":[]}}],"position":{"start":{"line":4,"column":230,"offset":581},"end":{"line":4,"column":257,"offset":608},"indent":[]}},{"type":"text","value":" and allows for ","position":{"start":{"line":4,"column":257,"offset":608},"end":{"line":4,"column":273,"offset":624},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"field-level understanding","position":{"start":{"line":4,"column":275,"offset":626},"end":{"line":4,"column":300,"offset":651},"indent":[]}}],"position":{"start":{"line":4,"column":273,"offset":624},"end":{"line":4,"column":302,"offset":653},"indent":[]}},{"type":"text","value":" of how consumers are interacting with your graph in real-time.","position":{"start":{"line":4,"column":302,"offset":653},"end":{"line":4,"column":365,"offset":716},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":352},"end":{"line":4,"column":365,"offset":716},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Like any API, your graph will end up with many consumers with different frequencies, subselections, and permissions as it grows over time. Warthog allows all reported data to be tagged with client information so it can be filtered and analyzed across different sets of clients and stacks.","position":{"start":{"line":6,"column":1,"offset":718},"end":{"line":6,"column":289,"offset":1006},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":718},"end":{"line":6,"column":289,"offset":1006},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here's an example of client identity reporting in Engine:","position":{"start":{"line":8,"column":1,"offset":1008},"end":{"line":8,"column":58,"offset":1065},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":1008},"end":{"line":8,"column":58,"offset":1065},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/overview-d6be789eb6757e6cd8f729ab53e890fb.png","alt":"client overview","position":{"start":{"line":10,"column":1,"offset":1067},"end":{"line":10,"column":57,"offset":1123},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":1067},"end":{"line":10,"column":57,"offset":1123},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#setup","title":null,"data":{"hProperties":{"aria-label":"setup permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Setup","position":{"start":{"line":12,"column":4,"offset":1128},"end":{"line":12,"column":9,"offset":1133},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":1125},"end":{"line":12,"column":9,"offset":1133},"indent":[]},"data":{"id":"setup","htmlAttributes":{"id":"setup"},"hProperties":{"id":"setup"}}},{"type":"paragraph","children":[{"type":"text","value":"Warthog Server 2.2.3+ will look for specific request headers, ","position":{"start":{"line":14,"column":1,"offset":1135},"end":{"line":14,"column":63,"offset":1197},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">goldcaddy77-client-name</code>","position":{"start":{"line":14,"column":63,"offset":1197},"end":{"line":14,"column":88,"offset":1222},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":14,"column":88,"offset":1222},"end":{"line":14,"column":93,"offset":1227},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">goldcaddy77-client-version</code>","position":{"start":{"line":14,"column":93,"offset":1227},"end":{"line":14,"column":121,"offset":1255},"indent":[]}},{"type":"text","value":", by default. If present, Warthog Server will extract them and make sure the data for that request is reported to Warthog's systems with the correct client and version tag.","position":{"start":{"line":14,"column":121,"offset":1255},"end":{"line":14,"column":293,"offset":1427},"indent":[]}}],"position":{"start":{"line":14,"column":1,"offset":1135},"end":{"line":14,"column":293,"offset":1427},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"With Warthog Client 2.4.6+, simply passing the ","position":{"start":{"line":16,"column":1,"offset":1429},"end":{"line":16,"column":48,"offset":1476},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">name</code>","position":{"start":{"line":16,"column":48,"offset":1476},"end":{"line":16,"column":54,"offset":1482},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":16,"column":54,"offset":1482},"end":{"line":16,"column":59,"offset":1487},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">version</code>","position":{"start":{"line":16,"column":59,"offset":1487},"end":{"line":16,"column":68,"offset":1496},"indent":[]}},{"type":"text","value":" options in your ","position":{"start":{"line":16,"column":68,"offset":1496},"end":{"line":16,"column":85,"offset":1513},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ApolloClient</code>","position":{"start":{"line":16,"column":85,"offset":1513},"end":{"line":16,"column":99,"offset":1527},"indent":[]}},{"type":"text","value":" constructor will automatically add these headers to every request. Setting up client identity reporting is as simple as adding configuration to Warthog Client:","position":{"start":{"line":16,"column":99,"offset":1527},"end":{"line":16,"column":259,"offset":1687},"indent":[]}}],"position":{"start":{"line":16,"column":1,"offset":1429},"end":{"line":16,"column":259,"offset":1687},"indent":[]}},{"type":"html","lang":"js{8-9}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'warthog-client'</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HttpLink <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">'warthog-link-http'</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  link<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpLink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    uri<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  name<span class=\"token punctuation\">:</span> <span class=\"token string\">'insert your client name'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">  version<span class=\"token punctuation\">:</span> <span class=\"token string\">'insert your client version'</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":18,"column":1,"offset":1689},"end":{"line":29,"column":4,"offset":1980},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"If you are not using Warthog Server and would like to gain client awareness,\nplease reach out to opensource ","position":{"start":{"line":31,"column":1,"offset":1982},"end":{"line":32,"column":32,"offset":2090},"indent":[1]}},{"type":"linkReference","identifier":"at","label":"at","referenceType":"shortcut","children":[{"type":"text","value":"at","position":{"start":{"line":32,"column":33,"offset":2091},"end":{"line":32,"column":35,"offset":2093},"indent":[]}}],"position":{"start":{"line":32,"column":32,"offset":2090},"end":{"line":32,"column":36,"offset":2094},"indent":[]}},{"type":"text","value":" warthog.dev to work with us to add\nsupport to your server language of choice.","position":{"start":{"line":32,"column":36,"offset":2094},"end":{"line":33,"column":43,"offset":2172},"indent":[1]}}],"position":{"start":{"line":31,"column":1,"offset":1982},"end":{"line":33,"column":43,"offset":2172},"indent":[1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#use-cases","title":null,"data":{"hProperties":{"aria-label":"use cases permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Use Cases","position":{"start":{"line":35,"column":4,"offset":2177},"end":{"line":35,"column":13,"offset":2186},"indent":[]}}],"position":{"start":{"line":35,"column":1,"offset":2174},"end":{"line":35,"column":13,"offset":2186},"indent":[]},"data":{"id":"use-cases","htmlAttributes":{"id":"use-cases"},"hProperties":{"id":"use-cases"}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#isolating-clients","title":null,"data":{"hProperties":{"aria-label":"isolating clients permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Isolating Clients","position":{"start":{"line":37,"column":5,"offset":2192},"end":{"line":37,"column":22,"offset":2209},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":2188},"end":{"line":37,"column":22,"offset":2209},"indent":[]},"data":{"id":"isolating-clients","htmlAttributes":{"id":"isolating-clients"},"hProperties":{"id":"isolating-clients"}}},{"type":"paragraph","children":[{"type":"text","value":"Filtering queries by client enables isolation of issues that affect a portion\nof all clients. In the opposite sense, if a client becomes problematic, such as\nrequesting expensive fields or using deprecated fields, the Warthog Platform\nenables tracking down the faulty client to start solving the issue with the\nowner. When changing, replacing, or deprecating a field in the API, the client\nmetadata enables quickly identifying the client-side changes that need to\noccur to completely remove the field.","position":{"start":{"line":39,"column":1,"offset":2211},"end":{"line":45,"column":38,"offset":2712},"indent":[1,1,1,1,1,1]}}],"position":{"start":{"line":39,"column":1,"offset":2211},"end":{"line":45,"column":38,"offset":2712},"indent":[1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/field-usage-963f97491e5bcd9388f1c4db8db99e17.png","alt":"client field","position":{"start":{"line":47,"column":1,"offset":2714},"end":{"line":47,"column":57,"offset":2770},"indent":[]}}],"position":{"start":{"line":47,"column":1,"offset":2714},"end":{"line":47,"column":57,"offset":2770},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#cutover","title":null,"data":{"hProperties":{"aria-label":"cutover permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Cutover","position":{"start":{"line":49,"column":5,"offset":2776},"end":{"line":49,"column":12,"offset":2783},"indent":[]}}],"position":{"start":{"line":49,"column":1,"offset":2772},"end":{"line":49,"column":12,"offset":2783},"indent":[]},"data":{"id":"cutover","htmlAttributes":{"id":"cutover"},"hProperties":{"id":"cutover"}}},{"type":"paragraph","children":[{"type":"text","value":"Similarly to deprecation, adding fields to your graph often means that clients will also change. These modifications can be done incrementally or discretely during a cutover period. The cutover period and time immediately following change the utilization of the graph drastically and can expose some unexpected behavior. Filtering by client version enables monitoring the health of a release in real-time. The following demonstrates a cutover from one backend to another.","position":{"start":{"line":51,"column":1,"offset":2785},"end":{"line":51,"column":472,"offset":3256},"indent":[]}}],"position":{"start":{"line":51,"column":1,"offset":2785},"end":{"line":51,"column":472,"offset":3256},"indent":[]}},{"type":"paragraph","children":[{"type":"image","title":null,"url":"/cutover-ecbaae93dee3b59330da0f33945701a9.png","alt":"druid cutover","position":{"start":{"line":53,"column":1,"offset":3258},"end":{"line":53,"column":54,"offset":3311},"indent":[]}}],"position":{"start":{"line":53,"column":1,"offset":3258},"end":{"line":53,"column":54,"offset":3311},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#advanced-setup","title":null,"data":{"hProperties":{"aria-label":"advanced setup permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Advanced setup","position":{"start":{"line":55,"column":4,"offset":3316},"end":{"line":55,"column":18,"offset":3330},"indent":[]}}],"position":{"start":{"line":55,"column":1,"offset":3313},"end":{"line":55,"column":18,"offset":3330},"indent":[]},"data":{"id":"advanced-setup","htmlAttributes":{"id":"advanced-setup"},"hProperties":{"id":"advanced-setup"}}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#client","title":null,"data":{"hProperties":{"aria-label":"client permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Client","position":{"start":{"line":57,"column":5,"offset":3336},"end":{"line":57,"column":11,"offset":3342},"indent":[]}}],"position":{"start":{"line":57,"column":1,"offset":3332},"end":{"line":57,"column":11,"offset":3342},"indent":[]},"data":{"id":"client","htmlAttributes":{"id":"client"},"hProperties":{"id":"client"}}},{"type":"paragraph","children":[{"type":"text","value":"The requester is responsible for setting HTTP headers on its requests in a way the server will understand. As noted in \"setup\", Warthog Client and Server will handle this automatically. For advanced cases, rather than setting the ","position":{"start":{"line":59,"column":1,"offset":3344},"end":{"line":59,"column":231,"offset":3574},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">name</code>","position":{"start":{"line":59,"column":231,"offset":3574},"end":{"line":59,"column":237,"offset":3580},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":59,"column":237,"offset":3580},"end":{"line":59,"column":242,"offset":3585},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">version</code>","position":{"start":{"line":59,"column":242,"offset":3585},"end":{"line":59,"column":251,"offset":3594},"indent":[]}},{"type":"text","value":" on ","position":{"start":{"line":59,"column":251,"offset":3594},"end":{"line":59,"column":255,"offset":3598},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ApolloClient</code>","position":{"start":{"line":59,"column":255,"offset":3598},"end":{"line":59,"column":269,"offset":3612},"indent":[]}},{"type":"text","value":", ","position":{"start":{"line":59,"column":269,"offset":3612},"end":{"line":59,"column":271,"offset":3614},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">headers</code>","position":{"start":{"line":59,"column":271,"offset":3614},"end":{"line":59,"column":280,"offset":3623},"indent":[]}},{"type":"text","value":" can be set on the ","position":{"start":{"line":59,"column":280,"offset":3623},"end":{"line":59,"column":299,"offset":3642},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">HttpLink</code>","position":{"start":{"line":59,"column":299,"offset":3642},"end":{"line":59,"column":309,"offset":3652},"indent":[]}},{"type":"text","value":" directly.","position":{"start":{"line":59,"column":309,"offset":3652},"end":{"line":59,"column":319,"offset":3662},"indent":[]}}],"position":{"start":{"line":59,"column":1,"offset":3344},"end":{"line":59,"column":319,"offset":3662},"indent":[]}},{"type":"html","lang":"js{8-16}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloClient <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"warthog-client\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> HttpLink <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"warthog-link-http\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> ApolloLink <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"warthog-link\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> client <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloClient</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  link<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">HttpLink</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    uri<span class=\"token punctuation\">:</span> <span class=\"token string\">'http://localhost:4000/graphql'</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    headers<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'client-name-for-advanced-use-cases'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'Web'</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token string\">'client-version-for-advanced-use-cases'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'1'</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":61,"column":1,"offset":3664},"end":{"line":75,"column":4,"offset":4047},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#server","title":null,"data":{"hProperties":{"aria-label":"server permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Server","position":{"start":{"line":77,"column":5,"offset":4053},"end":{"line":77,"column":11,"offset":4059},"indent":[]}}],"position":{"start":{"line":77,"column":1,"offset":4049},"end":{"line":77,"column":11,"offset":4059},"indent":[]},"data":{"id":"server","htmlAttributes":{"id":"server"},"hProperties":{"id":"server"}}},{"type":"paragraph","children":[{"type":"text","value":"The server is responsible for collecting and assigning the client information\nto a request. To send client-tagged metrics to Warthog, pass a\n","position":{"start":{"line":79,"column":1,"offset":4061},"end":{"line":81,"column":1,"offset":4202},"indent":[1,1]}},{"type":"html","value":"<code class=\"language-text\">generateClientInfo</code>","position":{"start":{"line":81,"column":1,"offset":4202},"end":{"line":81,"column":21,"offset":4222},"indent":[]}},{"type":"text","value":" function into the ","position":{"start":{"line":81,"column":21,"offset":4222},"end":{"line":81,"column":40,"offset":4241},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":81,"column":40,"offset":4241},"end":{"line":81,"column":54,"offset":4255},"indent":[]}},{"type":"text","value":" constructor. The\nfollowing example checks the headers and provides a fallback:","position":{"start":{"line":81,"column":54,"offset":4255},"end":{"line":82,"column":62,"offset":4334},"indent":[1]}}],"position":{"start":{"line":79,"column":1,"offset":4061},"end":{"line":82,"column":62,"offset":4334},"indent":[1,1,1]}},{"type":"html","lang":"js{8-22}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"warthog-server\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n  resolvers<span class=\"token punctuation\">,</span>\n  engine<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n    apiKey<span class=\"token punctuation\">:</span> <span class=\"token string\">'YOUR API KEY HERE'</span><span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">    <span class=\"token function-variable function\">generateClientInfo</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> request <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// The default approach suggested in \"Setup\", which</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// uses headers provided by Warthog Client, should work</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// for most use cases, but advanced cases can use</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// their own logic for determining the client name</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token comment\">// and version and return them from this function.</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> clientName<span class=\"token punctuation\">,</span> clientVersion <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">userSuppliedLogic</span><span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">      <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">        clientName<span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">        clientVersion</span><span class=\"gatsby-highlight-code-line\">      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\">    <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"></span>server<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ðŸš€  Server ready at </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":84,"column":1,"offset":4336},"end":{"line":110,"column":4,"offset":5079},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":111,"column":1,"offset":5080}}}}