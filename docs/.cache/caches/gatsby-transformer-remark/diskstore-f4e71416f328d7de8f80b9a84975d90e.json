{"expireTime":9007200819376322000,"key":"transformer-remark-markdown-ast-558442ba7941cbddd4a90ee5f50b0a30-gatsby-remark-autolink-headersgatsby-remark-copy-linked-filesgatsby-remark-prismjsgatsby-remark-check-links-","val":{"type":"root","children":[{"type":"paragraph","children":[{"type":"text","value":"Time to accomplish: ","position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":21,"offset":21},"indent":[]}},{"type":"emphasis","children":[{"type":"text","value":"10 Minutes","position":{"start":{"line":2,"column":22,"offset":22},"end":{"line":2,"column":32,"offset":32},"indent":[]}}],"position":{"start":{"line":2,"column":21,"offset":21},"end":{"line":2,"column":33,"offset":33},"indent":[]}}],"position":{"start":{"line":2,"column":1,"offset":1},"end":{"line":2,"column":33,"offset":33},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we've constructed our schema, we need to hook up our data sources to our GraphQL API. GraphQL APIs are extremely flexible because you can layer them on top of any service, including any business logic, REST APIs, databases, or gRPC services.","position":{"start":{"line":4,"column":1,"offset":35},"end":{"line":4,"column":251,"offset":285},"indent":[]}}],"position":{"start":{"line":4,"column":1,"offset":35},"end":{"line":4,"column":251,"offset":285},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Warthog makes connecting these services to your graph simple with our data source API. An ","position":{"start":{"line":6,"column":1,"offset":287},"end":{"line":6,"column":91,"offset":377},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"Warthog data source","position":{"start":{"line":6,"column":93,"offset":379},"end":{"line":6,"column":112,"offset":398},"indent":[]}}],"position":{"start":{"line":6,"column":91,"offset":377},"end":{"line":6,"column":114,"offset":400},"indent":[]}},{"type":"text","value":" is a class that encapsulates all of the data fetching logic, as well as caching and deduplication, for a particular service. By using Warthog data sources to hook up your services to your graph API, you're also following best practices for organizing your code.","position":{"start":{"line":6,"column":114,"offset":400},"end":{"line":6,"column":376,"offset":662},"indent":[]}}],"position":{"start":{"line":6,"column":1,"offset":287},"end":{"line":6,"column":376,"offset":662},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In the next sections, we'll build data sources for a REST API and a SQL database and connect them to Warthog Server. Don't worry if you're not familiar with either of those technologies, you won't need to understand them deeply in order to follow the examples. ðŸ˜€","position":{"start":{"line":8,"column":1,"offset":664},"end":{"line":8,"column":264,"offset":927},"indent":[]}}],"position":{"start":{"line":8,"column":1,"offset":664},"end":{"line":8,"column":264,"offset":927},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#connect-a-rest-api","title":null,"data":{"hProperties":{"aria-label":"connect a rest api permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Connect a REST API","position":{"start":{"line":10,"column":4,"offset":932},"end":{"line":10,"column":22,"offset":950},"indent":[]}}],"position":{"start":{"line":10,"column":1,"offset":929},"end":{"line":10,"column":22,"offset":950},"indent":[]},"data":{"id":"connect-a-rest-api","htmlAttributes":{"id":"connect-a-rest-api"},"hProperties":{"id":"connect-a-rest-api"}}},{"type":"paragraph","children":[{"type":"text","value":"First, let's connect the ","position":{"start":{"line":12,"column":1,"offset":952},"end":{"line":12,"column":26,"offset":977},"indent":[]}},{"type":"link","title":null,"url":"https://github.com/r-spacex/SpaceX-API","children":[{"type":"text","value":"Space-X v2 REST API","position":{"start":{"line":12,"column":27,"offset":978},"end":{"line":12,"column":46,"offset":997},"indent":[]}}],"position":{"start":{"line":12,"column":26,"offset":977},"end":{"line":12,"column":87,"offset":1038},"indent":[]}},{"type":"text","value":" to our graph. To get started, install the ","position":{"start":{"line":12,"column":87,"offset":1038},"end":{"line":12,"column":130,"offset":1081},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">warthog-datasource-rest</code>","position":{"start":{"line":12,"column":130,"offset":1081},"end":{"line":12,"column":155,"offset":1106},"indent":[]}},{"type":"text","value":" package:","position":{"start":{"line":12,"column":155,"offset":1106},"end":{"line":12,"column":164,"offset":1115},"indent":[]}}],"position":{"start":{"line":12,"column":1,"offset":952},"end":{"line":12,"column":164,"offset":1115},"indent":[]}},{"type":"html","lang":"bash","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"bash\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-bash line-numbers\"><code class=\"language-bash\"><span class=\"token function\">npm</span> <span class=\"token function\">install</span> warthog-datasource-rest --save</code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span></span></pre></div>","position":{"start":{"line":14,"column":1,"offset":1117},"end":{"line":16,"column":4,"offset":1171},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"This package exposes the ","position":{"start":{"line":18,"column":1,"offset":1173},"end":{"line":18,"column":26,"offset":1198},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">RESTDataSource</code>","position":{"start":{"line":18,"column":26,"offset":1198},"end":{"line":18,"column":42,"offset":1214},"indent":[]}},{"type":"text","value":" class that is responsible for fetching data from a REST API. To build a data source for a REST API, extend the ","position":{"start":{"line":18,"column":42,"offset":1214},"end":{"line":18,"column":154,"offset":1326},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">RESTDataSource</code>","position":{"start":{"line":18,"column":154,"offset":1326},"end":{"line":18,"column":170,"offset":1342},"indent":[]}},{"type":"text","value":" class and define ","position":{"start":{"line":18,"column":170,"offset":1342},"end":{"line":18,"column":188,"offset":1360},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">this.baseURL</code>","position":{"start":{"line":18,"column":188,"offset":1360},"end":{"line":18,"column":202,"offset":1374},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":18,"column":202,"offset":1374},"end":{"line":18,"column":203,"offset":1375},"indent":[]}}],"position":{"start":{"line":18,"column":1,"offset":1173},"end":{"line":18,"column":203,"offset":1375},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"In our example, the ","position":{"start":{"line":20,"column":1,"offset":1377},"end":{"line":20,"column":21,"offset":1397},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">baseURL</code>","position":{"start":{"line":20,"column":21,"offset":1397},"end":{"line":20,"column":30,"offset":1406},"indent":[]}},{"type":"text","value":" for our API is ","position":{"start":{"line":20,"column":30,"offset":1406},"end":{"line":20,"column":46,"offset":1422},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">https://api.spacexdata.com/v2/</code>","position":{"start":{"line":20,"column":46,"offset":1422},"end":{"line":20,"column":78,"offset":1454},"indent":[]}},{"type":"text","value":". Let's create our ","position":{"start":{"line":20,"column":78,"offset":1454},"end":{"line":20,"column":97,"offset":1473},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":20,"column":97,"offset":1473},"end":{"line":20,"column":108,"offset":1484},"indent":[]}},{"type":"text","value":" data source by adding the code below to ","position":{"start":{"line":20,"column":108,"offset":1484},"end":{"line":20,"column":149,"offset":1525},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/datasources/launch.js</code>","position":{"start":{"line":20,"column":149,"offset":1525},"end":{"line":20,"column":176,"offset":1552},"indent":[]}},{"type":"text","value":":","position":{"start":{"line":20,"column":176,"offset":1552},"end":{"line":20,"column":177,"offset":1553},"indent":[]}}],"position":{"start":{"line":20,"column":1,"offset":1377},"end":{"line":20,"column":177,"offset":1553},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/datasources/launch.js","position":{"start":{"line":22,"column":2,"offset":1556},"end":{"line":22,"column":27,"offset":1581},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1555},"end":{"line":22,"column":28,"offset":1582},"indent":[]}}],"position":{"start":{"line":22,"column":1,"offset":1555},"end":{"line":22,"column":28,"offset":1582},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> RESTDataSource <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'warthog-datasource-rest'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">LaunchAPI</span> <span class=\"token keyword\">extends</span> <span class=\"token class-name\">RESTDataSource</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">super</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>baseURL <span class=\"token operator\">=</span> <span class=\"token string\">'https://api.spacexdata.com/v2/'</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n\nmodule<span class=\"token punctuation\">.</span>exports <span class=\"token operator\">=</span> LaunchAPI<span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":24,"column":1,"offset":1584},"end":{"line":35,"column":4,"offset":1817},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The Warthog ","position":{"start":{"line":37,"column":1,"offset":1819},"end":{"line":37,"column":13,"offset":1831},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">RESTDataSource</code>","position":{"start":{"line":37,"column":13,"offset":1831},"end":{"line":37,"column":29,"offset":1847},"indent":[]}},{"type":"text","value":" also sets up an in-memory cache that caches responses from our REST resources with no additional setup. We call this ","position":{"start":{"line":37,"column":29,"offset":1847},"end":{"line":37,"column":147,"offset":1965},"indent":[]}},{"type":"strong","children":[{"type":"text","value":"partial query caching","position":{"start":{"line":37,"column":149,"offset":1967},"end":{"line":37,"column":170,"offset":1988},"indent":[]}}],"position":{"start":{"line":37,"column":147,"offset":1965},"end":{"line":37,"column":172,"offset":1990},"indent":[]}},{"type":"text","value":". What's great about this cache is that you can reuse existing caching logic that your REST API exposes. If you're curious to learn more about partial query caching with Warthog data sources, please check out ","position":{"start":{"line":37,"column":172,"offset":1990},"end":{"line":37,"column":381,"offset":2199},"indent":[]}},{"type":"link","title":null,"url":"https://blog.warthog.dev/easy-and-performant-graphql-over-rest-e02796993b2b","children":[{"type":"text","value":"our blog post","position":{"start":{"line":37,"column":382,"offset":2200},"end":{"line":37,"column":395,"offset":2213},"indent":[]}}],"position":{"start":{"line":37,"column":381,"offset":2199},"end":{"line":37,"column":473,"offset":2291},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":37,"column":473,"offset":2291},"end":{"line":37,"column":474,"offset":2292},"indent":[]}}],"position":{"start":{"line":37,"column":1,"offset":1819},"end":{"line":37,"column":474,"offset":2292},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#write-data-fetching-methods","title":null,"data":{"hProperties":{"aria-label":"write data fetching methods permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Write data fetching methods","position":{"start":{"line":39,"column":5,"offset":2298},"end":{"line":39,"column":32,"offset":2325},"indent":[]}}],"position":{"start":{"line":39,"column":1,"offset":2294},"end":{"line":39,"column":32,"offset":2325},"indent":[]},"data":{"id":"write-data-fetching-methods","htmlAttributes":{"id":"write-data-fetching-methods"},"hProperties":{"id":"write-data-fetching-methods"}}},{"type":"paragraph","children":[{"type":"text","value":"The next step is to add methods to the ","position":{"start":{"line":41,"column":1,"offset":2327},"end":{"line":41,"column":40,"offset":2366},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":41,"column":40,"offset":2366},"end":{"line":41,"column":51,"offset":2377},"indent":[]}},{"type":"text","value":" data source that correspond to the queries our graph API needs to fetch. According to our schema, we'll need a method to get all of the launches. Let's add a ","position":{"start":{"line":41,"column":51,"offset":2377},"end":{"line":41,"column":210,"offset":2536},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getAllLaunches</code>","position":{"start":{"line":41,"column":210,"offset":2536},"end":{"line":41,"column":226,"offset":2552},"indent":[]}},{"type":"text","value":" method to our ","position":{"start":{"line":41,"column":226,"offset":2552},"end":{"line":41,"column":241,"offset":2567},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":41,"column":241,"offset":2567},"end":{"line":41,"column":252,"offset":2578},"indent":[]}},{"type":"text","value":" class now:","position":{"start":{"line":41,"column":252,"offset":2578},"end":{"line":41,"column":263,"offset":2589},"indent":[]}}],"position":{"start":{"line":41,"column":1,"offset":2327},"end":{"line":41,"column":263,"offset":2589},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/datasources/launch.js","position":{"start":{"line":43,"column":2,"offset":2592},"end":{"line":43,"column":27,"offset":2617},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2591},"end":{"line":43,"column":28,"offset":2618},"indent":[]}}],"position":{"start":{"line":43,"column":1,"offset":2591},"end":{"line":43,"column":28,"offset":2618},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token function\">getAllLaunches</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'launches'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> Array<span class=\"token punctuation\">.</span><span class=\"token function\">isArray</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">)</span>\n    <span class=\"token operator\">?</span> response<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">launch</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">launchReducer</span><span class=\"token punctuation\">(</span>launch<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":45,"column":1,"offset":2620},"end":{"line":52,"column":4,"offset":2803},"indent":[1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The Warthog REST data sources have helper methods that correspond to HTTP verbs like ","position":{"start":{"line":54,"column":1,"offset":2805},"end":{"line":54,"column":86,"offset":2890},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">GET</code>","position":{"start":{"line":54,"column":86,"offset":2890},"end":{"line":54,"column":91,"offset":2895},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":54,"column":91,"offset":2895},"end":{"line":54,"column":96,"offset":2900},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">POST</code>","position":{"start":{"line":54,"column":96,"offset":2900},"end":{"line":54,"column":102,"offset":2906},"indent":[]}},{"type":"text","value":". In the code above, ","position":{"start":{"line":54,"column":102,"offset":2906},"end":{"line":54,"column":123,"offset":2927},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">this.get(&#39;launches&#39;)</code>","position":{"start":{"line":54,"column":123,"offset":2927},"end":{"line":54,"column":145,"offset":2949},"indent":[]}},{"type":"text","value":", makes a ","position":{"start":{"line":54,"column":145,"offset":2949},"end":{"line":54,"column":155,"offset":2959},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">GET</code>","position":{"start":{"line":54,"column":155,"offset":2959},"end":{"line":54,"column":160,"offset":2964},"indent":[]}},{"type":"text","value":" request to ","position":{"start":{"line":54,"column":160,"offset":2964},"end":{"line":54,"column":172,"offset":2976},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">https://api.spacexdata.com/v2/launches</code>","position":{"start":{"line":54,"column":172,"offset":2976},"end":{"line":54,"column":212,"offset":3016},"indent":[]}},{"type":"text","value":" and stores the returned launches in the ","position":{"start":{"line":54,"column":212,"offset":3016},"end":{"line":54,"column":253,"offset":3057},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">response</code>","position":{"start":{"line":54,"column":253,"offset":3057},"end":{"line":54,"column":263,"offset":3067},"indent":[]}},{"type":"text","value":" variable. Then, the ","position":{"start":{"line":54,"column":263,"offset":3067},"end":{"line":54,"column":284,"offset":3088},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getAllLaunches</code>","position":{"start":{"line":54,"column":284,"offset":3088},"end":{"line":54,"column":300,"offset":3104},"indent":[]}},{"type":"text","value":" method maps over the launches and transforms the response from our REST endpoint with ","position":{"start":{"line":54,"column":300,"offset":3104},"end":{"line":54,"column":387,"offset":3191},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">this.launchReducer</code>","position":{"start":{"line":54,"column":387,"offset":3191},"end":{"line":54,"column":407,"offset":3211},"indent":[]}},{"type":"text","value":". If there are no launches, an empty array is returned.","position":{"start":{"line":54,"column":407,"offset":3211},"end":{"line":54,"column":462,"offset":3266},"indent":[]}}],"position":{"start":{"line":54,"column":1,"offset":2805},"end":{"line":54,"column":462,"offset":3266},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now, we need to write our ","position":{"start":{"line":56,"column":1,"offset":3268},"end":{"line":56,"column":27,"offset":3294},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchReducer</code>","position":{"start":{"line":56,"column":27,"offset":3294},"end":{"line":56,"column":42,"offset":3309},"indent":[]}},{"type":"text","value":" method in order to transform our launch data into the shape our schema expects. We recommend this approach in order to decouple your graph API from business logic specific to your REST API. First, let's recall what our ","position":{"start":{"line":56,"column":42,"offset":3309},"end":{"line":56,"column":262,"offset":3529},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">Launch</code>","position":{"start":{"line":56,"column":262,"offset":3529},"end":{"line":56,"column":270,"offset":3537},"indent":[]}},{"type":"text","value":" type looks like in our schema. You don't have to copy this code:","position":{"start":{"line":56,"column":270,"offset":3537},"end":{"line":56,"column":335,"offset":3602},"indent":[]}}],"position":{"start":{"line":56,"column":1,"offset":3268},"end":{"line":56,"column":335,"offset":3602},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/schema.js","position":{"start":{"line":58,"column":2,"offset":3605},"end":{"line":58,"column":15,"offset":3618},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3604},"end":{"line":58,"column":16,"offset":3619},"indent":[]}}],"position":{"start":{"line":58,"column":1,"offset":3604},"end":{"line":58,"column":16,"offset":3619},"indent":[]}},{"type":"html","lang":"graphql","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-graphql line-numbers\"><code class=\"language-graphql\"><span class=\"token keyword\">type</span> <span class=\"token class-name\">Launch</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> ID<span class=\"token operator\">!</span>\n  <span class=\"token attr-name\">site</span><span class=\"token punctuation\">:</span> String\n  <span class=\"token attr-name\">mission</span><span class=\"token punctuation\">:</span> Mission\n  <span class=\"token attr-name\">rocket</span><span class=\"token punctuation\">:</span> Rocket\n  <span class=\"token attr-name\">isBooked</span><span class=\"token punctuation\">:</span> Boolean<span class=\"token operator\">!</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":60,"column":1,"offset":3621},"end":{"line":68,"column":4,"offset":3733},"indent":[1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Next, let's write a ","position":{"start":{"line":70,"column":1,"offset":3735},"end":{"line":70,"column":21,"offset":3755},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchReducer</code>","position":{"start":{"line":70,"column":21,"offset":3755},"end":{"line":70,"column":36,"offset":3770},"indent":[]}},{"type":"text","value":" function to transform the data into that shape. Copy the following code into your ","position":{"start":{"line":70,"column":36,"offset":3770},"end":{"line":70,"column":119,"offset":3853},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":70,"column":119,"offset":3853},"end":{"line":70,"column":130,"offset":3864},"indent":[]}},{"type":"text","value":" class:","position":{"start":{"line":70,"column":130,"offset":3864},"end":{"line":70,"column":137,"offset":3871},"indent":[]}}],"position":{"start":{"line":70,"column":1,"offset":3735},"end":{"line":70,"column":137,"offset":3871},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/datasources/launch.js","position":{"start":{"line":72,"column":2,"offset":3874},"end":{"line":72,"column":27,"offset":3899},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":3873},"end":{"line":72,"column":28,"offset":3900},"indent":[]}}],"position":{"start":{"line":72,"column":1,"offset":3873},"end":{"line":72,"column":28,"offset":3900},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token function\">launchReducer</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">launch</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">{</span>\n    id<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>flight_number <span class=\"token operator\">||</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    cursor<span class=\"token punctuation\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>launch<span class=\"token punctuation\">.</span>launch_date_unix<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">,</span>\n    site<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>launch_site <span class=\"token operator\">&amp;&amp;</span> launch<span class=\"token punctuation\">.</span>launch_site<span class=\"token punctuation\">.</span>site_name<span class=\"token punctuation\">,</span>\n    mission<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      name<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>mission_name<span class=\"token punctuation\">,</span>\n      missionPatchSmall<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>links<span class=\"token punctuation\">.</span>mission_patch_small<span class=\"token punctuation\">,</span>\n      missionPatchLarge<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>links<span class=\"token punctuation\">.</span>mission_patch<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    rocket<span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span>\n      id<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>rocket<span class=\"token punctuation\">.</span>rocket_id<span class=\"token punctuation\">,</span>\n      name<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>rocket<span class=\"token punctuation\">.</span>rocket_name<span class=\"token punctuation\">,</span>\n      type<span class=\"token punctuation\">:</span> launch<span class=\"token punctuation\">.</span>rocket<span class=\"token punctuation\">.</span>rocket_type<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":74,"column":1,"offset":3902},"end":{"line":92,"column":4,"offset":4393},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"With the above changes, we can easily make changes to the ","position":{"start":{"line":94,"column":1,"offset":4395},"end":{"line":94,"column":59,"offset":4453},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchReducer</code>","position":{"start":{"line":94,"column":59,"offset":4453},"end":{"line":94,"column":74,"offset":4468},"indent":[]}},{"type":"text","value":" method while the ","position":{"start":{"line":94,"column":74,"offset":4468},"end":{"line":94,"column":92,"offset":4486},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getAllLaunches</code>","position":{"start":{"line":94,"column":92,"offset":4486},"end":{"line":94,"column":108,"offset":4502},"indent":[]}},{"type":"text","value":" method stays lean and concise. The ","position":{"start":{"line":94,"column":108,"offset":4502},"end":{"line":94,"column":144,"offset":4538},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchReducer</code>","position":{"start":{"line":94,"column":144,"offset":4538},"end":{"line":94,"column":159,"offset":4553},"indent":[]}},{"type":"text","value":" method also makes testing the ","position":{"start":{"line":94,"column":159,"offset":4553},"end":{"line":94,"column":190,"offset":4584},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":94,"column":190,"offset":4584},"end":{"line":94,"column":201,"offset":4595},"indent":[]}},{"type":"text","value":" data source class easier, which we'll cover later.","position":{"start":{"line":94,"column":201,"offset":4595},"end":{"line":94,"column":252,"offset":4646},"indent":[]}}],"position":{"start":{"line":94,"column":1,"offset":4395},"end":{"line":94,"column":252,"offset":4646},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Next, let's take care of fetching a specific launch by its ID. Let's add two methods, ","position":{"start":{"line":96,"column":1,"offset":4648},"end":{"line":96,"column":87,"offset":4734},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getLaunchById</code>","position":{"start":{"line":96,"column":87,"offset":4734},"end":{"line":96,"column":102,"offset":4749},"indent":[]}},{"type":"text","value":", and ","position":{"start":{"line":96,"column":102,"offset":4749},"end":{"line":96,"column":108,"offset":4755},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getLaunchesByIds</code>","position":{"start":{"line":96,"column":108,"offset":4755},"end":{"line":96,"column":126,"offset":4773},"indent":[]}},{"type":"text","value":" to the ","position":{"start":{"line":96,"column":126,"offset":4773},"end":{"line":96,"column":134,"offset":4781},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":96,"column":134,"offset":4781},"end":{"line":96,"column":145,"offset":4792},"indent":[]}},{"type":"text","value":" class.","position":{"start":{"line":96,"column":145,"offset":4792},"end":{"line":96,"column":152,"offset":4799},"indent":[]}}],"position":{"start":{"line":96,"column":1,"offset":4648},"end":{"line":96,"column":152,"offset":4799},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/datasources/launch.js","position":{"start":{"line":98,"column":2,"offset":4802},"end":{"line":98,"column":27,"offset":4827},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":4801},"end":{"line":98,"column":28,"offset":4828},"indent":[]}}],"position":{"start":{"line":98,"column":1,"offset":4801},"end":{"line":98,"column":28,"offset":4828},"indent":[]}},{"type":"html","lang":"js","meta":null,"value":"<div class=\"gatsby-highlight\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">async</span> <span class=\"token function\">getLaunchById</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> launchId <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> response <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">get</span><span class=\"token punctuation\">(</span><span class=\"token string\">'launches'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span> flight_number<span class=\"token punctuation\">:</span> launchId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">launchReducer</span><span class=\"token punctuation\">(</span>response<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">getLaunchesByIds</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> launchIds <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> Promise<span class=\"token punctuation\">.</span><span class=\"token function\">all</span><span class=\"token punctuation\">(</span>\n    launchIds<span class=\"token punctuation\">.</span><span class=\"token function\">map</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">launchId</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">getLaunchById</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> launchId <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":100,"column":1,"offset":4830},"end":{"line":111,"column":4,"offset":5124},"indent":[1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":113,"column":1,"offset":5126},"end":{"line":113,"column":5,"offset":5130},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getLaunchById</code>","position":{"start":{"line":113,"column":5,"offset":5130},"end":{"line":113,"column":20,"offset":5145},"indent":[]}},{"type":"text","value":" method takes in a flight number and returns the data for a particular launch, while ","position":{"start":{"line":113,"column":20,"offset":5145},"end":{"line":113,"column":105,"offset":5230},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">getLaunchesByIds</code>","position":{"start":{"line":113,"column":105,"offset":5230},"end":{"line":113,"column":123,"offset":5248},"indent":[]}},{"type":"text","value":" returns several launches based on their respective ","position":{"start":{"line":113,"column":123,"offset":5248},"end":{"line":113,"column":175,"offset":5300},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchIds</code>","position":{"start":{"line":113,"column":175,"offset":5300},"end":{"line":113,"column":186,"offset":5311},"indent":[]}},{"type":"text","value":".","position":{"start":{"line":113,"column":186,"offset":5311},"end":{"line":113,"column":187,"offset":5312},"indent":[]}}],"position":{"start":{"line":113,"column":1,"offset":5126},"end":{"line":113,"column":187,"offset":5312},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we've connected our REST API successfully, let's connect our database!","position":{"start":{"line":115,"column":1,"offset":5314},"end":{"line":115,"column":80,"offset":5393},"indent":[]}}],"position":{"start":{"line":115,"column":1,"offset":5314},"end":{"line":115,"column":80,"offset":5393},"indent":[]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#connect-a-database","title":null,"data":{"hProperties":{"aria-label":"connect a database permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Connect a database","position":{"start":{"line":117,"column":4,"offset":5398},"end":{"line":117,"column":22,"offset":5416},"indent":[]}}],"position":{"start":{"line":117,"column":1,"offset":5395},"end":{"line":117,"column":22,"offset":5416},"indent":[]},"data":{"id":"connect-a-database","htmlAttributes":{"id":"connect-a-database"},"hProperties":{"id":"connect-a-database"}}},{"type":"paragraph","children":[{"type":"text","value":"Our REST API is read-only, so we need to connect our graph API to a database for saving and fetching user data. This tutorial uses SQLite for our SQL database, and Sequelize for our ORM. Our ","position":{"start":{"line":119,"column":1,"offset":5418},"end":{"line":119,"column":192,"offset":5609},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">package.json</code>","position":{"start":{"line":119,"column":192,"offset":5609},"end":{"line":119,"column":206,"offset":5623},"indent":[]}},{"type":"text","value":" already included these packages, thus they were installed in the first part of this tutorial with ","position":{"start":{"line":119,"column":206,"offset":5623},"end":{"line":119,"column":305,"offset":5722},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">npm install</code>","position":{"start":{"line":119,"column":305,"offset":5722},"end":{"line":119,"column":318,"offset":5735},"indent":[]}},{"type":"text","value":". Also, since this section contains some SQL-specific code that isn't necessary to understanding Warthog data sources, we've already built a ","position":{"start":{"line":119,"column":318,"offset":5735},"end":{"line":119,"column":459,"offset":5876},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">UserAPI</code>","position":{"start":{"line":119,"column":459,"offset":5876},"end":{"line":119,"column":468,"offset":5885},"indent":[]}},{"type":"text","value":" data source for you in ","position":{"start":{"line":119,"column":468,"offset":5885},"end":{"line":119,"column":492,"offset":5909},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/datasources/user.js</code>","position":{"start":{"line":119,"column":492,"offset":5909},"end":{"line":119,"column":517,"offset":5934},"indent":[]}},{"type":"text","value":". Please navigate to that file so we can explain the overall concepts.","position":{"start":{"line":119,"column":517,"offset":5934},"end":{"line":119,"column":587,"offset":6004},"indent":[]}}],"position":{"start":{"line":119,"column":1,"offset":5418},"end":{"line":119,"column":587,"offset":6004},"indent":[]}},{"type":"heading","depth":3,"children":[{"type":"link","url":"#build-a-custom-data-source","title":null,"data":{"hProperties":{"aria-label":"build a custom data source permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Build a custom data source","position":{"start":{"line":121,"column":5,"offset":6010},"end":{"line":121,"column":31,"offset":6036},"indent":[]}}],"position":{"start":{"line":121,"column":1,"offset":6006},"end":{"line":121,"column":31,"offset":6036},"indent":[]},"data":{"id":"build-a-custom-data-source","htmlAttributes":{"id":"build-a-custom-data-source"},"hProperties":{"id":"build-a-custom-data-source"}}},{"type":"paragraph","children":[{"type":"text","value":"Warthog doesn't have support for a SQL data source yet (although we'd love to help guide you if you're interested in contributing), so we will need to create a custom data source for our database by extending the generic Warthog data source class. You can create your own with the ","position":{"start":{"line":123,"column":1,"offset":6038},"end":{"line":123,"column":282,"offset":6319},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">warthog-datasource</code>","position":{"start":{"line":123,"column":282,"offset":6319},"end":{"line":123,"column":302,"offset":6339},"indent":[]}},{"type":"text","value":" package.","position":{"start":{"line":123,"column":302,"offset":6339},"end":{"line":123,"column":311,"offset":6348},"indent":[]}}],"position":{"start":{"line":123,"column":1,"offset":6038},"end":{"line":123,"column":311,"offset":6348},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Here are some of the core concepts for creating your own data source:","position":{"start":{"line":125,"column":1,"offset":6350},"end":{"line":125,"column":70,"offset":6419},"indent":[]}}],"position":{"start":{"line":125,"column":1,"offset":6350},"end":{"line":125,"column":70,"offset":6419},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"The ","position":{"start":{"line":127,"column":3,"offset":6423},"end":{"line":127,"column":7,"offset":6427},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">initialize</code>","position":{"start":{"line":127,"column":7,"offset":6427},"end":{"line":127,"column":19,"offset":6439},"indent":[]}},{"type":"text","value":" method: You'll need to implement this method if you want to pass in any configuration options to your class. Here, we're using this method to access our graph API's context.","position":{"start":{"line":127,"column":19,"offset":6439},"end":{"line":127,"column":193,"offset":6613},"indent":[]}}],"position":{"start":{"line":127,"column":3,"offset":6423},"end":{"line":127,"column":193,"offset":6613},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":6421},"end":{"line":127,"column":193,"offset":6613},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">this.context</code>","position":{"start":{"line":128,"column":3,"offset":6616},"end":{"line":128,"column":17,"offset":6630},"indent":[]}},{"type":"text","value":": A graph API's context is an object that's shared among every resolver in a GraphQL request. We're going to explain this in more detail in the next section. Right now, all you need to know is that the context is useful for storing user information.","position":{"start":{"line":128,"column":17,"offset":6630},"end":{"line":128,"column":266,"offset":6879},"indent":[]}}],"position":{"start":{"line":128,"column":3,"offset":6616},"end":{"line":128,"column":266,"offset":6879},"indent":[]}}],"position":{"start":{"line":128,"column":1,"offset":6614},"end":{"line":128,"column":266,"offset":6879},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"text","value":"Caching: While the REST data source comes with its own built in cache, the generic data source does not. You can use ","position":{"start":{"line":129,"column":3,"offset":6882},"end":{"line":129,"column":120,"offset":6999},"indent":[]}},{"type":"link","title":null,"url":"https://www.warthog.dev/docs/warthog-server/features/data-sources/#using-memcached-redis-as-a-cache-storage-backend","children":[{"type":"text","value":"our cache primitives","position":{"start":{"line":129,"column":121,"offset":7000},"end":{"line":129,"column":141,"offset":7020},"indent":[]}}],"position":{"start":{"line":129,"column":120,"offset":6999},"end":{"line":129,"column":259,"offset":7138},"indent":[]}},{"type":"text","value":" to build your own, however!","position":{"start":{"line":129,"column":259,"offset":7138},"end":{"line":129,"column":287,"offset":7166},"indent":[]}}],"position":{"start":{"line":129,"column":3,"offset":6882},"end":{"line":129,"column":287,"offset":7166},"indent":[]}}],"position":{"start":{"line":129,"column":1,"offset":6880},"end":{"line":129,"column":287,"offset":7166},"indent":[]}}],"position":{"start":{"line":127,"column":1,"offset":6421},"end":{"line":129,"column":287,"offset":7166},"indent":[1,1]}},{"type":"paragraph","children":[{"type":"text","value":"Let's go over some of the methods we created in ","position":{"start":{"line":131,"column":1,"offset":7168},"end":{"line":131,"column":49,"offset":7216},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/datasources/user.js</code>","position":{"start":{"line":131,"column":49,"offset":7216},"end":{"line":131,"column":74,"offset":7241},"indent":[]}},{"type":"text","value":" to fetch and update data in our database. You will want to reference these in the next section:","position":{"start":{"line":131,"column":74,"offset":7241},"end":{"line":131,"column":170,"offset":7337},"indent":[]}}],"position":{"start":{"line":131,"column":1,"offset":7168},"end":{"line":131,"column":170,"offset":7337},"indent":[]}},{"type":"list","ordered":false,"start":null,"spread":false,"children":[{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">findOrCreateUser({ email })</code>","position":{"start":{"line":133,"column":3,"offset":7341},"end":{"line":133,"column":32,"offset":7370},"indent":[]}},{"type":"text","value":": Finds or creates a user with a given ","position":{"start":{"line":133,"column":32,"offset":7370},"end":{"line":133,"column":71,"offset":7409},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">email</code>","position":{"start":{"line":133,"column":71,"offset":7409},"end":{"line":133,"column":78,"offset":7416},"indent":[]}},{"type":"text","value":" in the database","position":{"start":{"line":133,"column":78,"offset":7416},"end":{"line":133,"column":94,"offset":7432},"indent":[]}}],"position":{"start":{"line":133,"column":3,"offset":7341},"end":{"line":133,"column":94,"offset":7432},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":7339},"end":{"line":133,"column":94,"offset":7432},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">bookTrips({ launchIds })</code>","position":{"start":{"line":134,"column":3,"offset":7435},"end":{"line":134,"column":29,"offset":7461},"indent":[]}},{"type":"text","value":": Takes an object with an array of ","position":{"start":{"line":134,"column":29,"offset":7461},"end":{"line":134,"column":64,"offset":7496},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchIds</code>","position":{"start":{"line":134,"column":64,"offset":7496},"end":{"line":134,"column":75,"offset":7507},"indent":[]}},{"type":"text","value":" and books them for the logged in user","position":{"start":{"line":134,"column":75,"offset":7507},"end":{"line":134,"column":113,"offset":7545},"indent":[]}}],"position":{"start":{"line":134,"column":3,"offset":7435},"end":{"line":134,"column":113,"offset":7545},"indent":[]}}],"position":{"start":{"line":134,"column":1,"offset":7433},"end":{"line":134,"column":113,"offset":7545},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">cancelTrip({ launchId })</code>","position":{"start":{"line":135,"column":3,"offset":7548},"end":{"line":135,"column":29,"offset":7574},"indent":[]}},{"type":"text","value":": Takes an object with a ","position":{"start":{"line":135,"column":29,"offset":7574},"end":{"line":135,"column":54,"offset":7599},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">launchId</code>","position":{"start":{"line":135,"column":54,"offset":7599},"end":{"line":135,"column":64,"offset":7609},"indent":[]}},{"type":"text","value":" and cancels that launch for the logged in user","position":{"start":{"line":135,"column":64,"offset":7609},"end":{"line":135,"column":111,"offset":7656},"indent":[]}}],"position":{"start":{"line":135,"column":3,"offset":7548},"end":{"line":135,"column":111,"offset":7656},"indent":[]}}],"position":{"start":{"line":135,"column":1,"offset":7546},"end":{"line":135,"column":111,"offset":7656},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">getLaunchIdsByUser()</code>","position":{"start":{"line":136,"column":3,"offset":7659},"end":{"line":136,"column":25,"offset":7681},"indent":[]}},{"type":"text","value":": Returns all booked launches for the logged in user","position":{"start":{"line":136,"column":25,"offset":7681},"end":{"line":136,"column":77,"offset":7733},"indent":[]}}],"position":{"start":{"line":136,"column":3,"offset":7659},"end":{"line":136,"column":77,"offset":7733},"indent":[]}}],"position":{"start":{"line":136,"column":1,"offset":7657},"end":{"line":136,"column":77,"offset":7733},"indent":[]}},{"type":"listItem","spread":false,"checked":null,"children":[{"type":"paragraph","children":[{"type":"html","value":"<code class=\"language-text\">isBookedOnLaunch({ launchId })</code>","position":{"start":{"line":137,"column":3,"offset":7736},"end":{"line":137,"column":35,"offset":7768},"indent":[]}},{"type":"text","value":": Determines whether the logged in user booked a certain launch","position":{"start":{"line":137,"column":35,"offset":7768},"end":{"line":137,"column":98,"offset":7831},"indent":[]}}],"position":{"start":{"line":137,"column":3,"offset":7736},"end":{"line":137,"column":98,"offset":7831},"indent":[]}}],"position":{"start":{"line":137,"column":1,"offset":7734},"end":{"line":137,"column":98,"offset":7831},"indent":[]}}],"position":{"start":{"line":133,"column":1,"offset":7339},"end":{"line":137,"column":98,"offset":7831},"indent":[1,1,1,1]}},{"type":"heading","depth":2,"children":[{"type":"link","url":"#add-data-sources-to-warthog-server","title":null,"data":{"hProperties":{"aria-label":"add data sources to warthog server permalink","class":"anchor"},"hChildren":[{"type":"raw","value":"<svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg>"}]}},{"type":"text","value":"Add data sources to Warthog Server","position":{"start":{"line":139,"column":4,"offset":7836},"end":{"line":139,"column":38,"offset":7870},"indent":[]}}],"position":{"start":{"line":139,"column":1,"offset":7833},"end":{"line":139,"column":38,"offset":7870},"indent":[]},"data":{"id":"add-data-sources-to-warthog-server","htmlAttributes":{"id":"add-data-sources-to-warthog-server"},"hProperties":{"id":"add-data-sources-to-warthog-server"}}},{"type":"paragraph","children":[{"type":"text","value":"Now that we've built our ","position":{"start":{"line":141,"column":1,"offset":7872},"end":{"line":141,"column":26,"offset":7897},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":141,"column":26,"offset":7897},"end":{"line":141,"column":37,"offset":7908},"indent":[]}},{"type":"text","value":" data source to connect our REST API and our ","position":{"start":{"line":141,"column":37,"offset":7908},"end":{"line":141,"column":82,"offset":7953},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">UserAPI</code>","position":{"start":{"line":141,"column":82,"offset":7953},"end":{"line":141,"column":91,"offset":7962},"indent":[]}},{"type":"text","value":" data source to connect our SQL database, we need to add them to our graph API.","position":{"start":{"line":141,"column":91,"offset":7962},"end":{"line":141,"column":170,"offset":8041},"indent":[]}}],"position":{"start":{"line":141,"column":1,"offset":7872},"end":{"line":141,"column":170,"offset":8041},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Adding our data sources is simple. Just create a ","position":{"start":{"line":143,"column":1,"offset":8043},"end":{"line":143,"column":50,"offset":8092},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">dataSources</code>","position":{"start":{"line":143,"column":50,"offset":8092},"end":{"line":143,"column":63,"offset":8105},"indent":[]}},{"type":"text","value":" property on your ","position":{"start":{"line":143,"column":63,"offset":8105},"end":{"line":143,"column":81,"offset":8123},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":143,"column":81,"offset":8123},"end":{"line":143,"column":95,"offset":8137},"indent":[]}},{"type":"text","value":" that corresponds to a function that returns an object with your instantiated data sources. Let's see what that looks like by navigating to ","position":{"start":{"line":143,"column":95,"offset":8137},"end":{"line":143,"column":235,"offset":8277},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">src/index.js</code>","position":{"start":{"line":143,"column":235,"offset":8277},"end":{"line":143,"column":249,"offset":8291},"indent":[]}},{"type":"text","value":" and adding the code below:","position":{"start":{"line":143,"column":249,"offset":8291},"end":{"line":143,"column":276,"offset":8318},"indent":[]}}],"position":{"start":{"line":143,"column":1,"offset":8043},"end":{"line":143,"column":276,"offset":8318},"indent":[]}},{"type":"paragraph","children":[{"type":"emphasis","children":[{"type":"text","value":"src/index.js","position":{"start":{"line":145,"column":2,"offset":8321},"end":{"line":145,"column":14,"offset":8333},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":8320},"end":{"line":145,"column":15,"offset":8334},"indent":[]}}],"position":{"start":{"line":145,"column":1,"offset":8320},"end":{"line":145,"column":15,"offset":8334},"indent":[]}},{"type":"html","lang":"js{3,5,6,8,12-15}","meta":null,"value":"<div class=\"gatsby-highlight has-highlighted-lines\" data-language=\"js\"><pre style=\"counter-reset: linenumber NaN\" class=\"language-js line-numbers\"><code class=\"language-js\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> ApolloServer <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'warthog-server'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> typeDefs <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./schema'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> createStore <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./utils'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> LaunchAPI <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./datasources/launch'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span><span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> UserAPI <span class=\"token operator\">=</span> <span class=\"token function\">require</span><span class=\"token punctuation\">(</span><span class=\"token string\">'./datasources/user'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"gatsby-highlight-code-line\"><span class=\"token keyword\">const</span> store <span class=\"token operator\">=</span> <span class=\"token function\">createStore</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></span>\n<span class=\"token keyword\">const</span> server <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">ApolloServer</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n  typeDefs<span class=\"token punctuation\">,</span>\n<span class=\"gatsby-highlight-code-line\">  <span class=\"token function-variable function\">dataSources</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span></span><span class=\"gatsby-highlight-code-line\">    launchAPI<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">LaunchAPI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></span><span class=\"gatsby-highlight-code-line\">    userAPI<span class=\"token punctuation\">:</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">UserAPI</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> store <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"gatsby-highlight-code-line\">  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\nserver<span class=\"token punctuation\">.</span><span class=\"token function\">listen</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token parameter\"><span class=\"token punctuation\">{</span> url <span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">ðŸš€ Server ready at </span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>url<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token template-punctuation string\">`</span></span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code><span aria-hidden=\"true\" class=\"line-numbers-rows\" style=\"white-space: normal; width: auto; left: 0;\"><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span><span></span></span></pre></div>","position":{"start":{"line":147,"column":1,"offset":8336},"end":{"line":168,"column":4,"offset":8856},"indent":[1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1,1]}},{"type":"paragraph","children":[{"type":"text","value":"First, we import our ","position":{"start":{"line":170,"column":1,"offset":8858},"end":{"line":170,"column":22,"offset":8879},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">createStore</code>","position":{"start":{"line":170,"column":22,"offset":8879},"end":{"line":170,"column":35,"offset":8892},"indent":[]}},{"type":"text","value":" function to set up our database, as well as our data sources: ","position":{"start":{"line":170,"column":35,"offset":8892},"end":{"line":170,"column":98,"offset":8955},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":170,"column":98,"offset":8955},"end":{"line":170,"column":109,"offset":8966},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":170,"column":109,"offset":8966},"end":{"line":170,"column":114,"offset":8971},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">UserAPI</code>","position":{"start":{"line":170,"column":114,"offset":8971},"end":{"line":170,"column":123,"offset":8980},"indent":[]}},{"type":"text","value":". Then, we create our database by calling ","position":{"start":{"line":170,"column":123,"offset":8980},"end":{"line":170,"column":165,"offset":9022},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">createStore</code>","position":{"start":{"line":170,"column":165,"offset":9022},"end":{"line":170,"column":178,"offset":9035},"indent":[]}},{"type":"text","value":". Finally, we add the ","position":{"start":{"line":170,"column":178,"offset":9035},"end":{"line":170,"column":200,"offset":9057},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">dataSources</code>","position":{"start":{"line":170,"column":200,"offset":9057},"end":{"line":170,"column":213,"offset":9070},"indent":[]}},{"type":"text","value":" function to our ","position":{"start":{"line":170,"column":213,"offset":9070},"end":{"line":170,"column":230,"offset":9087},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">ApolloServer</code>","position":{"start":{"line":170,"column":230,"offset":9087},"end":{"line":170,"column":244,"offset":9101},"indent":[]}},{"type":"text","value":" to connect ","position":{"start":{"line":170,"column":244,"offset":9101},"end":{"line":170,"column":256,"offset":9113},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">LaunchAPI</code>","position":{"start":{"line":170,"column":256,"offset":9113},"end":{"line":170,"column":267,"offset":9124},"indent":[]}},{"type":"text","value":" and ","position":{"start":{"line":170,"column":267,"offset":9124},"end":{"line":170,"column":272,"offset":9129},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">UserAPI</code>","position":{"start":{"line":170,"column":272,"offset":9129},"end":{"line":170,"column":281,"offset":9138},"indent":[]}},{"type":"text","value":" to our graph. We also pass in our database we created to the ","position":{"start":{"line":170,"column":281,"offset":9138},"end":{"line":170,"column":343,"offset":9200},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">UserAPI</code>","position":{"start":{"line":170,"column":343,"offset":9200},"end":{"line":170,"column":352,"offset":9209},"indent":[]}},{"type":"text","value":" data source.","position":{"start":{"line":170,"column":352,"offset":9209},"end":{"line":170,"column":365,"offset":9222},"indent":[]}}],"position":{"start":{"line":170,"column":1,"offset":8858},"end":{"line":170,"column":365,"offset":9222},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"If you use ","position":{"start":{"line":172,"column":1,"offset":9224},"end":{"line":172,"column":12,"offset":9235},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">this.context</code>","position":{"start":{"line":172,"column":12,"offset":9235},"end":{"line":172,"column":26,"offset":9249},"indent":[]}},{"type":"text","value":" in your datasource, it's critical to create a new instance in the ","position":{"start":{"line":172,"column":26,"offset":9249},"end":{"line":172,"column":93,"offset":9316},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">dataSources</code>","position":{"start":{"line":172,"column":93,"offset":9316},"end":{"line":172,"column":106,"offset":9329},"indent":[]}},{"type":"text","value":" function and to not share a single instance. Otherwise, ","position":{"start":{"line":172,"column":106,"offset":9329},"end":{"line":172,"column":163,"offset":9386},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">initialize</code>","position":{"start":{"line":172,"column":163,"offset":9386},"end":{"line":172,"column":175,"offset":9398},"indent":[]}},{"type":"text","value":" may be called during the execution of asynchronous code for a specific user, and replace the  ","position":{"start":{"line":172,"column":175,"offset":9398},"end":{"line":172,"column":270,"offset":9493},"indent":[]}},{"type":"html","value":"<code class=\"language-text\">this.context</code>","position":{"start":{"line":172,"column":270,"offset":9493},"end":{"line":172,"column":284,"offset":9507},"indent":[]}},{"type":"text","value":" by the context of another user.","position":{"start":{"line":172,"column":284,"offset":9507},"end":{"line":172,"column":316,"offset":9539},"indent":[]}}],"position":{"start":{"line":172,"column":1,"offset":9224},"end":{"line":172,"column":316,"offset":9539},"indent":[]}},{"type":"paragraph","children":[{"type":"text","value":"Now that we've hooked up our data sources to Warthog Server, it's time to move on to the next section and learn how to call our data sources from within our resolvers.","position":{"start":{"line":174,"column":1,"offset":9541},"end":{"line":174,"column":168,"offset":9708},"indent":[]}}],"position":{"start":{"line":174,"column":1,"offset":9541},"end":{"line":174,"column":168,"offset":9708},"indent":[]}}],"position":{"start":{"line":1,"column":1,"offset":0},"end":{"line":175,"column":1,"offset":9709}}}}